import{r,R as Ue,j as e,S}from"./index-FOHbnj39.js";import{e as ze,a as Fe,b as Oe}from"./geminiService-BIhn4d3U.js";import{a as Ge,d as He,c as Le,u as Me,b as Ve}from"./dataService-CBqyM4Ad.js";const Ke=({contact:a,userId:c,onBack:I,onNavigate:ue,onAddLog:p})=>{const g=!a,[L,pe]=r.useState("總覽"),[n,M]=r.useState((a==null?void 0:a.name)||""),[_,V]=r.useState((a==null?void 0:a.role)||""),[T,q]=r.useState((a==null?void 0:a.company)||""),[W,B]=r.useState((a==null?void 0:a.phone)||""),[K,X]=r.useState((a==null?void 0:a.email)||""),[Y,be]=r.useState((a==null?void 0:a.birthday)||""),[A,he]=r.useState((a==null?void 0:a.linkedin)||""),[R,fe]=r.useState((a==null?void 0:a.facebook)||""),[D,Z]=r.useState((a==null?void 0:a.notes)||""),[b,J]=r.useState({linkedin:!1,facebook:!1}),[j,ge]=r.useState((a==null?void 0:a.photos)||[]),Q=r.useRef(null),[$,ee]=r.useState((a==null?void 0:a.tags)||[]),[P,je]=r.useState([]),[we,te]=r.useState(!1),[se,ae]=r.useState("");r.useEffect(()=>{if(c){const t=Ge(c,s=>{je(s.map(l=>l.name))});return()=>t()}},[c]);const Ne=Ue.useMemo(()=>{const t=["廠商","客戶","家人","VIP"];return Array.from(new Set([...t,...P]))},[P]),[le,ye]=r.useState([]),[ke,re]=r.useState(!1),[E,U]=r.useState(!1),[w,z]=r.useState(null),[ne,ie]=r.useState(!1),N=r.useRef(null),F=r.useRef(null),oe=r.useRef(null),[ve,O]=r.useState(!1),[d,y]=r.useState({type:"meeting",date:new Date().toISOString().split("T")[0],title:"",description:""}),[k,Ce]=r.useState((a==null?void 0:a.interactions)||[]),Se=()=>{if(!d.title||!d.date)return alert("請輸入標題與日期");const t={id:Date.now().toString(),...d,timeLabel:"剛剛"};Ce([t,...k]),O(!1),y({type:"meeting",date:new Date().toISOString().split("T")[0],title:"",description:""})},Ie=t=>{var i;const s=(i=t.target.files)==null?void 0:i[0];if(!s)return;const l=new FileReader;l.onloadend=()=>{const o=l.result;z(o),me(o)},l.readAsDataURL(s),t.target.value=""},G=async(t=!1)=>{if(!c)return t||alert("錯誤：無法識別使用者身分 (User ID missing)"),!1;if(!n.trim())return t&&g?!0:(t||alert("請輸入姓名"),!1);try{const s={name:n,role:_,company:T,phone:W,email:K,birthday:Y,linkedin:A,facebook:R,notes:D,tags:$,photos:j,interactions:k,avatar:(a==null?void 0:a.avatar)||null,initials:n?n.charAt(0).toUpperCase():"?",updatedAt:new Date().toISOString()};return g?(await Le(c,s),t||p({action:"新增聯絡人",contactName:n||"未命名",type:"create",details:`成功將 ${n} 加入您的通訊錄。`})):(await Me(c,a.id,s),t||p({action:"更新聯絡資訊",contactName:n||"未命名",type:"update",details:`修改了 ${n} 的詳細資料。`})),!0}catch(s){if(console.error("Save failed:",s),!t){let l="儲存失敗";s.code==="permission-denied"?l="權限不足":s.message&&(l=`儲存錯誤: ${s.message}`),alert(l)}return!1}},_e=async()=>{await G(!1)&&I()},Te=async()=>{await G(!0),I()},v=async t=>{await G(!0),ue(t)},Ae=t=>{ee(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},de=async()=>{const t=se.trim();if(t&&c){if(!["廠商","客戶","家人","VIP"].includes(t)&&!P.includes(t))try{await Ve(c,{name:t,icon:"label"})}catch(l){console.error("Error adding tag:",l)}$.includes(t)||ee(l=>[...l,t]),ae(""),te(!1)}},Re=async()=>{if(!(!a||!c)&&window.confirm(`確定要刪除聯絡人 ${n} 嗎？此動作無法復原。`))try{await He(c,a.id),p({action:"刪除聯絡人",contactName:n,type:"delete",details:`已將 ${n} 從聯絡人清單中移除。`}),I()}catch(t){console.error("Delete failed:",t),alert("刪除失敗，請稍後再試")}},De=t=>new Promise((s,l)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=o=>{var C;const x=new Image;x.src=(C=o.target)==null?void 0:C.result,x.onload=()=>{const h=document.createElement("canvas");let m=x.width,u=x.height;const f=800;m>u?m>f&&(u*=f/m,m=f):u>f&&(m*=f/u,u=f),h.width=m,h.height=u;const H=h.getContext("2d");H==null||H.drawImage(x,0,0,m,u),s(h.toDataURL("image/jpeg",.7))},x.onerror=h=>l(h)},i.onerror=o=>l(o)}),$e=async t=>{const s=t.target.files;if(!s)return;const l=5-j.length,i=Array.from(s).slice(0,l);try{const o=await Promise.all(i.map(x=>De(x)));ge(x=>{const C=[...x,...o].slice(0,5);return p({action:"上傳活動照片",contactName:n||"未命名",type:"photo",details:`為 ${n||"未命名"} 上傳了 ${o.length} 張新照片。`}),C})}catch(o){console.error("Image compression failed:",o),alert("圖片處理失敗，請試著上傳較小的圖片。")}t.target.value=""},ce=async()=>{if(!n)return alert("請先輸入姓名以生成話題");re(!0);try{const t=await Fe({name:n,role:_,company:T,notes:D},k);ye(t),p({action:"AI 話題生成",contactName:n,type:"interaction",details:"為下次見面生成了 AI 破冰建議。"})}catch(t){console.error(t)}finally{re(!1)}},xe=async t=>{const s=t==="linkedin"?A:R;if(!s)return alert(`請先輸入 ${t==="linkedin"?"LinkedIn":"Facebook"} 網址`);J(l=>({...l,[t]:!0}));try{const l=await Oe(s),i=t==="linkedin"?"LinkedIn 摘要":"Facebook 摘要";Z(o=>o?`${o}

【${i}】
${l}`:`【${i}】
${l}`),p({action:"AI 摘要生成",contactName:n,type:"interaction",details:`已將 ${i} 加入備註。`})}catch(l){console.error(l),alert("摘要生成失敗")}finally{J(l=>({...l,[t]:!1}))}};r.useEffect(()=>{let t=null;return E&&navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(s=>{t=s,N.current&&(N.current.srcObject=s)}),()=>t==null?void 0:t.getTracks().forEach(s=>s.stop())},[E]);const Pe=()=>{var t;if(N.current&&F.current){const s=F.current,l=N.current;s.width=l.videoWidth,s.height=l.videoHeight,(t=s.getContext("2d"))==null||t.drawImage(l,0,0);const i=s.toDataURL("image/jpeg");z(i),U(!1)}},me=async t=>{if(t){ie(!0);try{const s=await ze(t,"image/jpeg");s.name&&M(s.name),s.role&&V(s.role),s.company&&q(s.company),s.phone&&B(s.phone),s.email&&X(s.email)}catch(s){console.error(s),alert("識別失敗，請重試或手動輸入")}finally{ie(!1)}}},Ee=()=>e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("section",{className:"bg-white dark:bg-slate-800 rounded-3xl p-5 border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"badge"}),"名片識別"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",hidden:!0,ref:oe,onChange:Ie}),e.jsx("button",{onClick:()=>{var t;return(t=oe.current)==null?void 0:t.click()},className:"text-[11px] font-bold text-slate-600 dark:text-slate-300 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 rounded-lg",children:"上傳照片"}),e.jsx("button",{onClick:()=>U(!0),className:"text-[11px] font-bold text-primary px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:"啟動相機"})]})]}),e.jsxs("div",{className:"aspect-[1.6/1] border-2 border-dashed border-slate-100 dark:border-slate-700 rounded-2xl flex items-center justify-center overflow-hidden relative group",children:[w?e.jsx("img",{src:w,className:"w-full h-full object-contain"}):e.jsx("span",{className:"material-symbols-outlined text-slate-200 text-4xl",children:"add_a_photo"}),w&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{z(null)},className:"absolute top-2 right-2 w-8 h-8 bg-black/50 rounded-full text-white flex items-center justify-center hover:bg-black/70 transition-colors",title:"移除圖片",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})}),!ne&&e.jsxs("button",{onClick:()=>w&&me(w),className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-primary hover:bg-blue-600 text-white px-5 py-2.5 rounded-full font-bold text-sm shadow-lg transition-transform active:scale-95",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"document_scanner"}),"開始識別"]})]})]}),ne&&e.jsxs("div",{className:"mt-3 text-center text-xs text-primary font-bold animate-pulse flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"progress_activity"}),"AI 正在辨識名片資訊..."]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"photo_library"}),"活動照片 (",j.length,"/5)"]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,ref:Q,onChange:$e})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 border border-slate-100 dark:border-slate-700 grid grid-cols-3 gap-3",children:[j.map((t,s)=>e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden border border-slate-100",children:e.jsx("img",{src:t,className:"w-full h-full object-cover"})},s)),j.length<5&&e.jsx("button",{onClick:()=>{var t;return(t=Q.current)==null?void 0:t.click()},className:"aspect-square rounded-xl border-2 border-dashed border-slate-100 flex items-center justify-center text-slate-300",children:e.jsx("span",{className:"material-symbols-outlined",children:"add_photo_alternate"})})]})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 px-1",children:"社交圈"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 border border-slate-100 dark:border-slate-700 flex flex-wrap gap-2",children:[Ne.map(t=>e.jsx("button",{onClick:()=>Ae(t),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${$.includes(t)?"bg-primary text-white shadow-md":"bg-slate-50 dark:bg-slate-700 text-slate-400"}`,children:t},t)),we?e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{autoFocus:!0,className:"w-20 px-2 py-1 text-xs border rounded-lg focus:ring-0",value:se,onChange:t=>ae(t.target.value),onKeyDown:t=>t.key==="Enter"&&de()}),e.jsx("button",{onClick:de,className:"text-primary material-symbols-outlined text-sm",children:"check"})]}):e.jsx("button",{onClick:()=>te(!0),className:"px-3 py-1.5 rounded-full border border-dashed border-slate-200 text-slate-300 text-xs font-bold",children:"自定義"})]})]}),e.jsxs("section",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-[32px] p-6 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-white text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-indigo-200",children:"auto_awesome"}),"AI 破冰話題建議"]}),e.jsx("button",{onClick:ce,className:"bg-white/20 hover:bg-white/30 text-white text-[10px] font-bold px-3 py-1 rounded-full backdrop-blur-md transition-all",children:ke?"分析中...":"重新生成"})]}),le.length>0?e.jsx("div",{className:"flex flex-col gap-3",children:le.map((t,s)=>e.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-2xl p-3.5 backdrop-blur-sm",children:[e.jsx("p",{className:"text-white text-sm font-bold leading-snug",children:t.topic}),e.jsxs("p",{className:"text-white/60 text-[10px] mt-1.5 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"lightbulb"}),t.reason]})]},s))}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx("p",{className:"text-white/70 text-xs mb-4",children:"讓 AI 根據過往互動，為您建議合適的話題。"}),e.jsx("button",{onClick:ce,className:"bg-white text-indigo-600 px-6 py-2 rounded-full text-xs font-bold shadow-lg active:scale-95 transition-all",children:"獲取建議"})]})]}),e.jsxs("section",{className:"flex flex-col gap-4",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm px-1",children:"基本資料"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 divide-y divide-slate-50 dark:divide-slate-700",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"手機號碼"}),e.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0",value:W,onChange:t=>B(t.target.value),placeholder:"09xx-xxx-xxx"})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"電子郵件"}),e.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0",value:K,onChange:t=>X(t.target.value),placeholder:"example@mail.com"})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"生日"}),e.jsx("input",{type:"date",className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0",value:Y,onChange:t=>be(t.target.value)})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex justify-between items-center",children:["LinkedIn",e.jsxs("button",{onClick:()=>xe("linkedin"),disabled:b.linkedin,className:"flex items-center gap-1 text-[10px] text-primary bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800 transition-colors disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[12px]",children:b.linkedin?"hourglass_empty":"auto_awesome"}),b.linkedin?"分析中...":"AI 摘要"]})]}),e.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0 placeholder:text-slate-300",value:A,onChange:t=>he(t.target.value),placeholder:"https://linkedin.com/in/..."})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex justify-between items-center",children:["Facebook",e.jsxs("button",{onClick:()=>xe("facebook"),disabled:b.facebook,className:"flex items-center gap-1 text-[10px] text-blue-600 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800 transition-colors disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[12px]",children:b.facebook?"hourglass_empty":"auto_awesome"}),b.facebook?"分析中...":"AI 摘要"]})]}),e.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0 placeholder:text-slate-300",value:R,onChange:t=>fe(t.target.value),placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"個人備註"}),e.jsx("textarea",{className:"w-full bg-transparent border-none p-0 text-sm text-slate-600 dark:text-slate-300 resize-none min-h-[80px] focus:ring-0",value:D,onChange:t=>Z(t.target.value),placeholder:"記錄關於對方的興趣、家庭或特別話題..."})]})]})]})]});return e.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] dark:bg-slate-950 pb-24 overflow-y-auto no-scrollbar relative",children:[E&&e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col",children:[e.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover opacity-80"}),e.jsx("canvas",{ref:F,className:"hidden"}),e.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-between p-8 text-white",children:[e.jsx("button",{onClick:()=>U(!1),className:"self-start w-10 h-10 rounded-full bg-white/20 flex items-center justify-center backdrop-blur-md",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})}),e.jsx("div",{className:"w-[85%] aspect-[1.6/1] border-2 border-white/50 rounded-2xl shadow-[0_0_0_1000px_rgba(0,0,0,0.6)]"}),e.jsx("button",{onClick:Pe,className:"w-20 h-20 rounded-full border-4 border-white p-1 mb-8",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-4 bg-white dark:bg-slate-900 sticky top-0 z-50 border-b border-slate-50 dark:border-slate-800",children:[e.jsx("button",{onClick:Te,className:"text-slate-800 dark:text-white",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:g?"新增聯絡人":"編輯資料"}),e.jsxs("div",{className:"flex gap-2",children:[!g&&e.jsx("button",{onClick:Re,className:"text-rose-500 font-bold p-2 bg-rose-50 dark:bg-rose-900/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})}),e.jsx("button",{onClick:_e,className:"text-primary font-bold text-sm px-4 py-1.5 bg-blue-50 dark:bg-blue-900/20 rounded-full",children:"儲存"})]})]}),e.jsxs("div",{className:"flex flex-col items-center pt-8 pb-6 px-4 bg-white dark:bg-slate-900",children:[e.jsx("div",{className:"relative mb-6",children:e.jsx("img",{src:(a==null?void 0:a.avatar)||`https://ui-avatars.com/api/?name=${n||"?"}&background=random`,className:"w-32 h-32 rounded-[40px] object-cover border-4 border-white shadow-xl",alt:"Avatar"})}),e.jsx("input",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2 text-center bg-transparent border-none focus:ring-0 p-0 w-full",value:n,onChange:t=>M(t.target.value),placeholder:"輸入姓名..."}),e.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-slate-400 text-sm w-full",children:[e.jsx("input",{className:"bg-transparent border-none focus:ring-0 p-0 text-right flex-1 min-w-0",value:_,onChange:t=>V(t.target.value),placeholder:"職稱"}),e.jsx("span",{className:"text-slate-300",children:"@"}),e.jsx("input",{className:"bg-transparent border-none focus:ring-0 p-0 text-left flex-1 min-w-0",value:T,onChange:t=>q(t.target.value),placeholder:"公司名稱"})]})]}),e.jsx("div",{className:"flex px-4 border-b border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-[60px] z-40",children:["總覽","互動紀錄"].map(t=>e.jsx("button",{onClick:()=>pe(t),className:`flex-1 py-4 text-sm font-bold border-b-2 transition-all ${L===t?"border-primary text-primary":"border-transparent text-slate-400"}`,children:t},t))}),e.jsx("div",{className:"p-4",children:L==="總覽"?Ee():e.jsxs("div",{className:"flex flex-col gap-6 pt-4",children:[ve?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-top-4",children:[e.jsx("h5",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"新增互動"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex gap-2",children:["meeting","call","email"].map(t=>e.jsx("button",{onClick:()=>y({...d,type:t}),className:`flex-1 py-1.5 rounded-lg text-xs font-bold border ${d.type===t?"bg-primary text-white border-primary":"bg-slate-50 dark:bg-slate-900 text-slate-500 border-slate-100"}`,children:t==="meeting"?"見面":t==="call"?"通話":"郵件"},t))}),e.jsx("input",{type:"date",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-xl px-3 py-2 text-sm",value:d.date,onChange:t=>y({...d,date:t.target.value})}),e.jsx("input",{placeholder:"標題 (例如：早餐會、專案討論)",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-xl px-3 py-2 text-sm",value:d.title,onChange:t=>y({...d,title:t.target.value})}),e.jsx("textarea",{placeholder:"詳細內容...",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-xl px-3 py-2 text-sm min-h-[80px]",value:d.description,onChange:t=>y({...d,description:t.target.value})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>O(!1),className:"flex-1 py-2 text-slate-500 font-bold text-xs",children:"取消"}),e.jsx("button",{onClick:Se,className:"flex-1 py-2 bg-primary text-white rounded-xl font-bold text-xs shadow-md shadow-blue-500/30",children:"確認新增"})]})]})]}):e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 py-3 rounded-2xl border border-dashed border-slate-300 dark:border-slate-600 font-bold text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),"新增互動紀錄"]}),e.jsx("div",{className:"flex flex-col gap-6 pl-4 border-l-2 border-slate-100 ml-4",children:k.length>0?k.map(t=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[29px] top-0 w-6 h-6 rounded-full bg-blue-100 text-primary flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:t.type==="meeting"?"restaurant":"call"})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm border border-slate-50",children:[e.jsx("h5",{className:"font-bold text-sm mb-1",children:t.title}),e.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:t.date}),e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:t.description})]})]},t.id)):e.jsx("div",{className:"text-center py-10 text-slate-300 text-sm",children:"目前尚無互動紀錄"})})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-[480px] mx-auto bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-100 dark:border-slate-800 flex justify-around py-2.5 px-4 z-40 shadow-[0_-4px_12px_rgba(0,0,0,0.05)]",children:[e.jsxs("button",{onClick:()=>v(S.DASHBOARD),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"contacts"}),e.jsx("span",{className:"text-[11px] font-bold",children:"聯絡人"})]}),e.jsxs("button",{onClick:()=>v(S.CHAT),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"smart_toy"}),e.jsx("span",{className:"text-[11px] font-medium",children:"助理"})]}),e.jsxs("button",{onClick:()=>v(S.HISTORY),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"history"}),e.jsx("span",{className:"text-[11px] font-bold",children:"History"})]}),e.jsxs("button",{onClick:()=>v(S.LOGIN),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"login"}),e.jsx("span",{className:"text-[11px] font-medium",children:"登入"})]})]})]})};export{Ke as default};
