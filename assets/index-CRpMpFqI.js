(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function jS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fp={exports:{}},iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function WR(){if(wT)return iu;wT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return iu.Fragment=e,iu.jsx=t,iu.jsxs=t,iu}var RT;function ZR(){return RT||(RT=1,Fp.exports=WR()),Fp.exports}var w=ZR(),qp={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function jR(){if(bT)return Ne;bT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(G){return G===null||typeof G!="object"?null:(G=S&&G[S]||G["@@iterator"],typeof G=="function"?G:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,P={};function O(G,ie,fe){this.props=G,this.context=ie,this.refs=P,this.updater=fe||k}O.prototype.isReactComponent={},O.prototype.setState=function(G,ie){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ie,"setState")},O.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function Q(){}Q.prototype=O.prototype;function z(G,ie,fe){this.props=G,this.context=ie,this.refs=P,this.updater=fe||k}var ee=z.prototype=new Q;ee.constructor=z,F(ee,O.prototype),ee.isPureReactComponent=!0;var le=Array.isArray;function ae(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function x(G,ie,fe){var pe=fe.ref;return{$$typeof:n,type:G,key:ie,ref:pe!==void 0?pe:null,props:fe}}function U(G,ie){return x(G.type,ie,G.props)}function L(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function H(G){var ie={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(fe){return ie[fe]})}var D=/\/+/g;function Ve(G,ie){return typeof G=="object"&&G!==null&&G.key!=null?H(""+G.key):ie.toString(36)}function ft(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(ae,ae):(G.status="pending",G.then(function(ie){G.status==="pending"&&(G.status="fulfilled",G.value=ie)},function(ie){G.status==="pending"&&(G.status="rejected",G.reason=ie)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Z(G,ie,fe,pe,we){var xe=typeof G;(xe==="undefined"||xe==="boolean")&&(G=null);var Ue=!1;if(G===null)Ue=!0;else switch(xe){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(G.$$typeof){case n:case e:Ue=!0;break;case _:return Ue=G._init,Z(Ue(G._payload),ie,fe,pe,we)}}if(Ue)return we=we(G),Ue=pe===""?"."+Ve(G,0):pe,le(we)?(fe="",Ue!=null&&(fe=Ue.replace(D,"$&/")+"/"),Z(we,ie,fe,"",function(oi){return oi})):we!=null&&(L(we)&&(we=U(we,fe+(we.key==null||G&&G.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+Ue)),ie.push(we)),1;Ue=0;var Et=pe===""?".":pe+":";if(le(G))for(var tt=0;tt<G.length;tt++)pe=G[tt],xe=Et+Ve(pe,tt),Ue+=Z(pe,ie,fe,xe,we);else if(tt=I(G),typeof tt=="function")for(G=tt.call(G),tt=0;!(pe=G.next()).done;)pe=pe.value,xe=Et+Ve(pe,tt++),Ue+=Z(pe,ie,fe,xe,we);else if(xe==="object"){if(typeof G.then=="function")return Z(ft(G),ie,fe,pe,we);throw ie=String(G),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ue(G,ie,fe){if(G==null)return G;var pe=[],we=0;return Z(G,pe,"","",function(xe){return ie.call(fe,xe,we++)}),pe}function ve(G){if(G._status===-1){var ie=G._result;ie=ie(),ie.then(function(fe){(G._status===0||G._status===-1)&&(G._status=1,G._result=fe)},function(fe){(G._status===0||G._status===-1)&&(G._status=2,G._result=fe)}),G._status===-1&&(G._status=0,G._result=ie)}if(G._status===1)return G._result.default;throw G._result}var Ye=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},$e={map:ue,forEach:function(G,ie,fe){ue(G,function(){ie.apply(this,arguments)},fe)},count:function(G){var ie=0;return ue(G,function(){ie++}),ie},toArray:function(G){return ue(G,function(ie){return ie})||[]},only:function(G){if(!L(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Ne.Activity=T,Ne.Children=$e,Ne.Component=O,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=z,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(G){return N.H.useMemoCache(G)}},Ne.cache=function(G){return function(){return G.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(G,ie,fe){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var pe=F({},G.props),we=G.key;if(ie!=null)for(xe in ie.key!==void 0&&(we=""+ie.key),ie)!M.call(ie,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ie.ref===void 0||(pe[xe]=ie[xe]);var xe=arguments.length-2;if(xe===1)pe.children=fe;else if(1<xe){for(var Ue=Array(xe),Et=0;Et<xe;Et++)Ue[Et]=arguments[Et+2];pe.children=Ue}return x(G.type,we,pe)},Ne.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Ne.createElement=function(G,ie,fe){var pe,we={},xe=null;if(ie!=null)for(pe in ie.key!==void 0&&(xe=""+ie.key),ie)M.call(ie,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=ie[pe]);var Ue=arguments.length-2;if(Ue===1)we.children=fe;else if(1<Ue){for(var Et=Array(Ue),tt=0;tt<Ue;tt++)Et[tt]=arguments[tt+2];we.children=Et}if(G&&G.defaultProps)for(pe in Ue=G.defaultProps,Ue)we[pe]===void 0&&(we[pe]=Ue[pe]);return x(G,xe,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(G){return{$$typeof:d,render:G}},Ne.isValidElement=L,Ne.lazy=function(G){return{$$typeof:_,_payload:{_status:-1,_result:G},_init:ve}},Ne.memo=function(G,ie){return{$$typeof:h,type:G,compare:ie===void 0?null:ie}},Ne.startTransition=function(G){var ie=N.T,fe={};N.T=fe;try{var pe=G(),we=N.S;we!==null&&we(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ae,Ye)}catch(xe){Ye(xe)}finally{ie!==null&&fe.types!==null&&(ie.types=fe.types),N.T=ie}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(G){return N.H.use(G)},Ne.useActionState=function(G,ie,fe){return N.H.useActionState(G,ie,fe)},Ne.useCallback=function(G,ie){return N.H.useCallback(G,ie)},Ne.useContext=function(G){return N.H.useContext(G)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(G,ie){return N.H.useDeferredValue(G,ie)},Ne.useEffect=function(G,ie){return N.H.useEffect(G,ie)},Ne.useEffectEvent=function(G){return N.H.useEffectEvent(G)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(G,ie,fe){return N.H.useImperativeHandle(G,ie,fe)},Ne.useInsertionEffect=function(G,ie){return N.H.useInsertionEffect(G,ie)},Ne.useLayoutEffect=function(G,ie){return N.H.useLayoutEffect(G,ie)},Ne.useMemo=function(G,ie){return N.H.useMemo(G,ie)},Ne.useOptimistic=function(G,ie){return N.H.useOptimistic(G,ie)},Ne.useReducer=function(G,ie,fe){return N.H.useReducer(G,ie,fe)},Ne.useRef=function(G){return N.H.useRef(G)},Ne.useState=function(G){return N.H.useState(G)},Ne.useSyncExternalStore=function(G,ie,fe){return N.H.useSyncExternalStore(G,ie,fe)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.3",Ne}var xT;function Zm(){return xT||(xT=1,qp.exports=jR()),qp.exports}var Ee=Zm();const jm=jS(Ee);var Gp={exports:{}},su={},Hp={exports:{}},Bp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function eb(){return NT||(NT=1,(function(n){function e(Z,ue){var ve=Z.length;Z.push(ue);e:for(;0<ve;){var Ye=ve-1>>>1,$e=Z[Ye];if(0<o($e,ue))Z[Ye]=ue,Z[ve]=$e,ve=Ye;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ue=Z[0],ve=Z.pop();if(ve!==ue){Z[0]=ve;e:for(var Ye=0,$e=Z.length,G=$e>>>1;Ye<G;){var ie=2*(Ye+1)-1,fe=Z[ie],pe=ie+1,we=Z[pe];if(0>o(fe,ve))pe<$e&&0>o(we,fe)?(Z[Ye]=we,Z[pe]=ve,Ye=pe):(Z[Ye]=fe,Z[ie]=ve,Ye=ie);else if(pe<$e&&0>o(we,ve))Z[Ye]=we,Z[pe]=ve,Ye=pe;else break e}}return ue}function o(Z,ue){var ve=Z.sortIndex-ue.sortIndex;return ve!==0?ve:Z.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],_=1,T=null,S=3,I=!1,k=!1,F=!1,P=!1,O=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ee(Z){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=Z)i(h),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(h)}}function le(Z){if(F=!1,ee(Z),!k)if(t(p)!==null)k=!0,ae||(ae=!0,H());else{var ue=t(h);ue!==null&&ft(le,ue.startTime-Z)}}var ae=!1,N=-1,M=5,x=-1;function U(){return P?!0:!(n.unstable_now()-x<M)}function L(){if(P=!1,ae){var Z=n.unstable_now();x=Z;var ue=!0;try{e:{k=!1,F&&(F=!1,Q(N),N=-1),I=!0;var ve=S;try{t:{for(ee(Z),T=t(p);T!==null&&!(T.expirationTime>Z&&U());){var Ye=T.callback;if(typeof Ye=="function"){T.callback=null,S=T.priorityLevel;var $e=Ye(T.expirationTime<=Z);if(Z=n.unstable_now(),typeof $e=="function"){T.callback=$e,ee(Z),ue=!0;break t}T===t(p)&&i(p),ee(Z)}else i(p);T=t(p)}if(T!==null)ue=!0;else{var G=t(h);G!==null&&ft(le,G.startTime-Z),ue=!1}}break e}finally{T=null,S=ve,I=!1}ue=void 0}}finally{ue?H():ae=!1}}}var H;if(typeof z=="function")H=function(){z(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ve=D.port2;D.port1.onmessage=L,H=function(){Ve.postMessage(null)}}else H=function(){O(L,0)};function ft(Z,ue){N=O(function(){Z(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var ve=S;S=ue;try{return Z()}finally{S=ve}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(Z,ue){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ve=S;S=Z;try{return ue()}finally{S=ve}},n.unstable_scheduleCallback=function(Z,ue,ve){var Ye=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ye+ve:Ye):ve=Ye,Z){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ve+$e,Z={id:_++,callback:ue,priorityLevel:Z,startTime:ve,expirationTime:$e,sortIndex:-1},ve>Ye?(Z.sortIndex=ve,e(h,Z),t(p)===null&&Z===t(h)&&(F?(Q(N),N=-1):F=!0,ft(le,ve-Ye))):(Z.sortIndex=$e,e(p,Z),k||I||(k=!0,ae||(ae=!0,H()))),Z},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Z){var ue=S;return function(){var ve=S;S=ue;try{return Z.apply(this,arguments)}finally{S=ve}}}})(Bp)),Bp}var MT;function tb(){return MT||(MT=1,Hp.exports=eb()),Hp.exports}var zp={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT;function nb(){if(DT)return ln;DT=1;var n=Zm();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ln.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},ln.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},ln.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},ln.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},ln.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ln.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},ln.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ln.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},ln.requestFormReset=function(p){i.d.r(p)},ln.unstable_batchedUpdates=function(p,h){return p(h)},ln.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var PT;function ib(){if(PT)return zp.exports;PT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zp.exports=nb(),zp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function sb(){if(kT)return su;kT=1;var n=tb(),e=Zm(),t=ib();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),r;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=v;break}if(R===c){A=!0,c=y,l=v;break}R=R.sibling}if(!A){for(R=v.child;R;){if(R===l){A=!0,l=v,c=y;break}if(R===c){A=!0,c=v,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ve(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case O:return"Profiler";case P:return"StrictMode";case le:return"Suspense";case ae:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case z:return s.displayName||"Context";case Q:return(s._context.displayName||"Context")+".Consumer";case ee:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return r=s.displayName||null,r!==null?r:Ve(s.type)||"Memo";case M:r=s._payload,s=s._init;try{return Ve(s(r))}catch{}}return null}var ft=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ye=[],$e=-1;function G(s){return{current:s}}function ie(s){0>$e||(s.current=Ye[$e],Ye[$e]=null,$e--)}function fe(s,r){$e++,Ye[$e]=s.current,s.current=r}var pe=G(null),we=G(null),xe=G(null),Ue=G(null);function Et(s,r){switch(fe(xe,r),fe(we,s),fe(pe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Qv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Qv(r),s=Xv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ie(pe),fe(pe,s)}function tt(){ie(pe),ie(we),ie(xe)}function oi(s){s.memoizedState!==null&&fe(Ue,s);var r=pe.current,l=Xv(r,s.type);r!==l&&(fe(we,s),fe(pe,l))}function os(s){we.current===s&&(ie(pe),ie(we)),Ue.current===s&&(ie(Ue),jl._currentValue=ve)}var as,Hn;function _n(s){if(as===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);as=r&&r[1]||"",Hn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+s+Hn}var Hs=!1;function ls(s,r){if(!s||Hs)return"";Hs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var $=W}Reflect.construct(s,[],se)}else{try{se.call()}catch(W){$=W}s.call(se.prototype)}}else{try{throw Error()}catch(W){$=W}(se=s())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],R=v[1];if(A&&R){var V=A.split(`
`),J=R.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===J.length)for(c=V.length-1,y=J.length-1;1<=c&&0<=y&&V[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==J[y]){var te=`
`+V[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{Hs=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?_n(l):""}function us(s,r){switch(s.tag){case 26:case 27:case 5:return _n(s.type);case 16:return _n("Lazy");case 13:return s.child!==r&&r!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return ls(s.type,!1);case 11:return ls(s.type.render,!1);case 1:return ls(s.type,!0);case 31:return _n("Activity");default:return""}}function Zt(s){try{var r="",l=null;do r+=us(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var dt=Object.prototype.hasOwnProperty,pt=n.unstable_scheduleCallback,wi=n.unstable_cancelCallback,il=n.unstable_shouldYield,Oo=n.unstable_requestPaint,Bt=n.unstable_now,cs=n.unstable_getCurrentPriorityLevel,Gr=n.unstable_ImmediatePriority,Ri=n.unstable_UserBlockingPriority,bi=n.unstable_NormalPriority,Fo=n.unstable_LowPriority,qo=n.unstable_IdlePriority,Hr=n.log,Br=n.unstable_setDisableYieldValue,Mn=null,Mt=null;function vn(s){if(typeof Hr=="function"&&Br(s),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Mn,s)}catch{}}var j=Math.clz32?Math.clz32:Tn,_e=Math.log,Ze=Math.LN2;function Tn(s){return s>>>=0,s===0?32:31-(_e(s)/Ze|0)|0}var Kt=256,ai=262144,At=4194304;function Bn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function xi(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=Bn(c):(A&=R,A!==0?y=Bn(A):l||(l=R&~s,l!==0&&(y=Bn(l))))):(R=c&~v,R!==0?y=Bn(R):A!==0?y=Bn(A):l||(l=c&~s,l!==0&&(y=Bn(l)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:y}function li(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Bd(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yu(){var s=At;return At<<=1,(At&62914560)===0&&(At=4194304),s}function Ni(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function zr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function zd(s,r,l,c,y,v){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,V=s.expirationTimes,J=s.hiddenUpdates;for(l=A&~l;0<l;){var te=31-j(l),se=1<<te;R[te]=0,V[te]=-1;var $=J[te];if($!==null)for(J[te]=null,te=0;te<$.length;te++){var W=$[te];W!==null&&(W.lane&=-536870913)}l&=~se}c!==0&&Yr(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~r))}function Yr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-j(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function sl(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-j(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function rl(s,r){var l=r&-r;return l=(l&42)!==0?1:Kr(l),(l&(s.suspendedLanes|r))!==0?0:l}function Kr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function fs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ku(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:vT(s.type))}function ui(s,r){var l=ue.p;try{return ue.p=s,r()}finally{ue.p=l}}var ci=Math.random().toString(36).slice(2),Dt="__reactFiber$"+ci,Jt="__reactProps$"+ci,Mi="__reactContainer$"+ci,Go="__reactEvents$"+ci,Yd="__reactListeners$"+ci,Ju="__reactHandles$"+ci,$u="__reactResources$"+ci,Di="__reactMarker$"+ci;function Ho(s){delete s[Dt],delete s[Jt],delete s[Go],delete s[Yd],delete s[Ju]}function Pi(s){var r=s[Dt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Mi]||l[Dt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=iT(s);s!==null;){if(l=s[Dt])return l;s=iT(s)}return r}s=l,l=s.parentNode}return null}function zn(s){if(s=s[Dt]||s[Mi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Dn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ki(s){var r=s[$u];return r||(r=s[$u]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(s){s[Di]=!0}var ol=new Set,al={};function Vi(s,r){Ui(s,r),Ui(s+"Capture",r)}function Ui(s,r){for(al[s]=r,s=0;s<r.length;s++)ol.add(r[s])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ul={},cl={};function Qu(s){return dt.call(cl,s)?!0:dt.call(ul,s)?!1:ll.test(s)?cl[s]=!0:(ul[s]=!0,!1)}function Bo(s,r,l){if(Qu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Pn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function kt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function $t(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Bs(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function fl(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function it(s){if(!s._valueTracker){var r=Bs(s)?"checked":"value";s._valueTracker=fl(s,r,""+s[r])}}function Jr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Bs(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Li(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var $r=/[\n"\\]/g;function En(s){return s.replace($r,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function zo(s,r,l,c,y,v,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+$t(r)):s.value!==""+$t(r)&&(s.value=""+$t(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?dl(s,A,$t(r)):l!=null?dl(s,A,$t(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+$t(R):s.removeAttribute("name")}function Xu(s,r,l,c,y,v,A,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){it(s);return}l=l!=null?""+$t(l):"",r=r!=null?""+$t(r):l,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),it(s)}function dl(s,r,l){r==="number"&&Li(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function zs(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+$t(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Wu(s,r,l){if(r!=null&&(r=""+$t(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+$t(l):""}function Ys(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ft(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=$t(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),it(s)}function Sn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Zu.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function pl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&hl(s,y,c)}else for(var v in r)r.hasOwnProperty(v)&&hl(s,v,r[v])}function Yo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(s){return Ks.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function fi(){}var ml=null;function Yn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Js=null,Oi=null;function Qr(s){var r=zn(s);if(r&&(s=r.stateNode)){var l=s[Jt]||null;e:switch(s=r.stateNode,r.type){case"input":if(zo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+En(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Jt]||null;if(!y)throw Error(i(90));zo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Jr(c)}break e;case"textarea":Wu(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&zs(s,!!l.multiple,r,!1)}}}var Jo=!1;function $s(s,r,l){if(Jo)return s(r,l);Jo=!0;try{var c=s(r);return c}finally{if(Jo=!1,(Js!==null||Oi!==null)&&(Kc(),Js&&(r=Js,s=Oi,Oi=Js=null,Qr(r),s)))for(r=0;r<s.length;r++)Qr(s[r])}}function di(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Jt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(Kn)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{Xr=!1}var Fi=null,gl=null,Wr=null;function yl(){if(Wr)return Wr;var s,r=gl,l=r.length,c,y="value"in Fi?Fi.value:Fi.textContent,v=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[v-c];c++);return Wr=y.slice(s,1<c?1-c:void 0)}function Zr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function ds(){return!0}function hi(){return!1}function jt(s){function r(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ds:hi,this.isPropagationStopped=hi,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),r}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=jt(hs),Qs=T({},hs,{view:0,detail:0}),_l=jt(Qs),Xs,$o,Gi,Qo=T({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gi&&(Gi&&s.type==="mousemove"?(Xs=s.screenX-Gi.screenX,$o=s.screenY-Gi.screenY):$o=Xs=0,Gi=s),Xs)},movementY:function(s){return"movementY"in s?s.movementY:$o}}),vl=jt(Qo),jr=T({},Qo,{dataTransfer:0}),ec=jt(jr),tc=T({},Qs,{relatedTarget:0}),eo=jt(tc),Tl=T({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),nc=jt(Tl),Xo=T({},hs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ic=jt(Xo),sc=T({},hs,{data:0}),Hi=jt(sc),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=ac[s])?!!r[s]:!1}function Ws(){return lc}var pn=T({},Qs,{key:function(s){if(s.key){var r=rc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Zr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?oc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(s){return s.type==="keypress"?Zr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Zr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),uc=jt(pn),cc=T({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=jt(cc),g=T({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),E=jt(g),C=T({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=jt(C),Y=T({},Qo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=jt(Y),ce=T({},hs,{newState:0,oldState:0}),De=jt(ce),wt=[9,13,27,32],je=Kn&&"CompositionEvent"in window,_t=null;Kn&&"documentMode"in document&&(_t=document.documentMode);var Jn=Kn&&"TextEvent"in window&&!_t,Bi=Kn&&(!je||_t&&8<_t&&11>=_t),pi=" ",mi=!1;function to(s,r){switch(s){case"keyup":return wt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zo=!1;function Ew(s,r){switch(s){case"compositionend":return Wo(r);case"keypress":return r.which!==32?null:(mi=!0,pi);case"textInput":return s=r.data,s===pi&&mi?null:s;default:return null}}function Sw(s,r){if(Zo)return s==="compositionend"||!je&&to(s,r)?(s=yl(),Wr=gl=Fi=null,Zo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bi&&r.locale!=="ko"?null:r.data;default:return null}}var Aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Aw[s.type]:r==="textarea"}function ay(s,r,l,c){Js?Oi?Oi.push(c):Oi=[c]:Js=c,r=jc(r,"onChange"),0<r.length&&(l=new qi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var El=null,Sl=null;function Cw(s){Bv(s,0)}function fc(s){var r=Dn(s);if(Jr(r))return s}function ly(s,r){if(s==="change")return r}var uy=!1;if(Kn){var Kd;if(Kn){var Jd="oninput"in document;if(!Jd){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),Jd=typeof cy.oninput=="function"}Kd=Jd}else Kd=!1;uy=Kd&&(!document.documentMode||9<document.documentMode)}function fy(){El&&(El.detachEvent("onpropertychange",dy),Sl=El=null)}function dy(s){if(s.propertyName==="value"&&fc(Sl)){var r=[];ay(r,Sl,s,Yn(s)),$s(Cw,r)}}function Iw(s,r,l){s==="focusin"?(fy(),El=r,Sl=l,El.attachEvent("onpropertychange",dy)):s==="focusout"&&fy()}function ww(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fc(Sl)}function Rw(s,r){if(s==="click")return fc(r)}function bw(s,r){if(s==="input"||s==="change")return fc(r)}function xw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var kn=typeof Object.is=="function"?Object.is:xw;function Al(s,r){if(kn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!dt.call(r,y)||!kn(s[y],r[y]))return!1}return!0}function hy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function py(s,r){var l=hy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=hy(l)}}function my(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?my(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function gy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Li(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Li(s.document)}return r}function $d(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Nw=Kn&&"documentMode"in document&&11>=document.documentMode,jo=null,Qd=null,Cl=null,Xd=!1;function yy(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Xd||jo==null||jo!==Li(c)||(c=jo,"selectionStart"in c&&$d(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Cl&&Al(Cl,c)||(Cl=c,c=jc(Qd,"onSelect"),0<c.length&&(r=new qi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=jo)))}function no(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var ea={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Wd={},_y={};Kn&&(_y=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function io(s){if(Wd[s])return Wd[s];if(!ea[s])return s;var r=ea[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in _y)return Wd[s]=r[l];return s}var vy=io("animationend"),Ty=io("animationiteration"),Ey=io("animationstart"),Mw=io("transitionrun"),Dw=io("transitionstart"),Pw=io("transitioncancel"),Sy=io("transitionend"),Ay=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function gi(s,r){Ay.set(s,r),Vi(r,[s])}var dc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},$n=[],ta=0,jd=0;function hc(){for(var s=ta,r=jd=ta=0;r<s;){var l=$n[r];$n[r++]=null;var c=$n[r];$n[r++]=null;var y=$n[r];$n[r++]=null;var v=$n[r];if($n[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Cy(l,y,v)}}function pc(s,r,l,c){$n[ta++]=s,$n[ta++]=r,$n[ta++]=l,$n[ta++]=c,jd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function eh(s,r,l,c){return pc(s,r,l,c),mc(s)}function so(s,r){return pc(s,null,null,r),mc(s)}function Cy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&r!==null&&(y=31-j(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),v):null}function mc(s){if(50<Kl)throw Kl=0,up=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var na={};function kw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(s,r,l,c){return new kw(s,r,l,c)}function th(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,r){var l=s.alternate;return l===null?(l=Vn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Iy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function gc(s,r,l,c,y,v){var A=0;if(c=s,typeof s=="function")th(s)&&(A=1);else if(typeof s=="string")A=FR(s,l,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Vn(31,l,r,y),s.elementType=x,s.lanes=v,s;case F:return ro(l.children,y,v,r);case P:A=8,y|=24;break;case O:return s=Vn(12,l,r,y|2),s.elementType=O,s.lanes=v,s;case le:return s=Vn(13,l,r,y),s.elementType=le,s.lanes=v,s;case ae:return s=Vn(19,l,r,y),s.elementType=ae,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:A=10;break e;case Q:A=9;break e;case ee:A=11;break e;case N:A=14;break e;case M:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Vn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=v,r}function ro(s,r,l,c){return s=Vn(7,s,c,r),s.lanes=l,s}function nh(s,r,l){return s=Vn(6,s,null,r),s.lanes=l,s}function wy(s){var r=Vn(18,null,null,0);return r.stateNode=s,r}function ih(s,r,l){return r=Vn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ry=new WeakMap;function Qn(s,r){if(typeof s=="object"&&s!==null){var l=Ry.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Zt(r)},Ry.set(s,r),r)}return{value:s,source:r,stack:Zt(r)}}var ia=[],sa=0,yc=null,Il=0,Xn=[],Wn=0,Zs=null,zi=1,Yi="";function gs(s,r){ia[sa++]=Il,ia[sa++]=yc,yc=s,Il=r}function by(s,r,l){Xn[Wn++]=zi,Xn[Wn++]=Yi,Xn[Wn++]=Zs,Zs=s;var c=zi;s=Yi;var y=32-j(c)-1;c&=~(1<<y),l+=1;var v=32-j(r)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,zi=1<<32-j(r)+y|l<<y|c,Yi=v+s}else zi=1<<v|l<<y|c,Yi=s}function sh(s){s.return!==null&&(gs(s,1),by(s,1,0))}function rh(s){for(;s===yc;)yc=ia[--sa],ia[sa]=null,Il=ia[--sa],ia[sa]=null;for(;s===Zs;)Zs=Xn[--Wn],Xn[Wn]=null,Yi=Xn[--Wn],Xn[Wn]=null,zi=Xn[--Wn],Xn[Wn]=null}function xy(s,r){Xn[Wn++]=zi,Xn[Wn++]=Yi,Xn[Wn++]=Zs,zi=r.id,Yi=r.overflow,Zs=s}var en=null,mt=null,Ke=!1,js=null,Zn=!1,oh=Error(i(519));function er(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wl(Qn(r,s)),oh}function Ny(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[Dt]=s,r[Jt]=c,l){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(l=0;l<$l.length;l++)Fe($l[l],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),Xu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),Ys(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Jv(r.textContent,l)?(c.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),c.onScroll!=null&&Fe("scroll",r),c.onScrollEnd!=null&&Fe("scrollend",r),c.onClick!=null&&(r.onclick=fi),r=!0):r=!1,r||er(s,!0)}function My(s){for(en=s.return;en;)switch(en.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:en=en.return}}function ra(s){if(s!==en)return!1;if(!Ke)return My(s),Ke=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Cp(s.type,s.memoizedProps)),l=!l),l&&mt&&er(s),My(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));mt=nT(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));mt=nT(s)}else r===27?(r=mt,pr(s.type)?(s=xp,xp=null,mt=s):mt=r):mt=en?ei(s.stateNode.nextSibling):null;return!0}function oo(){mt=en=null,Ke=!1}function ah(){var s=js;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),js=null),s}function wl(s){js===null?js=[s]:js.push(s)}var lh=G(null),ao=null,ys=null;function tr(s,r,l){fe(lh,r._currentValue),r._currentValue=l}function _s(s){s._currentValue=lh.current,ie(lh)}function uh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function ch(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var V=0;V<r.length;V++)if(R.context===r[V]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),uh(v.return,l,s),c||(A=null);break e}v=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),uh(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function oa(s,r,l,c){s=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;kn(y.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(y===Ue.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(jl):s=[jl])}y=y.return}s!==null&&ch(r,s,l,c),r.flags|=262144}function _c(s){for(s=s.firstContext;s!==null;){if(!kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function lo(s){ao=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return Dy(ao,s)}function vc(s,r){return ao===null&&lo(s),Dy(s,r)}function Dy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ys===null){if(s===null)throw Error(i(308));ys=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ys=ys.next=r;return l}var Vw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},Uw=n.unstable_scheduleCallback,Lw=n.unstable_NormalPriority,Vt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fh(){return{controller:new Vw,data:new Map,refCount:0}}function Rl(s){s.refCount--,s.refCount===0&&Uw(Lw,function(){s.controller.abort()})}var bl=null,dh=0,aa=0,la=null;function Ow(s,r){if(bl===null){var l=bl=[];dh=0,aa=mp(),la={status:"pending",value:void 0,then:function(c){l.push(c)}}}return dh++,r.then(Py,Py),r}function Py(){if(--dh===0&&bl!==null){la!==null&&(la.status="fulfilled");var s=bl;bl=null,aa=0,la=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Fw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var ky=Z.S;Z.S=function(s,r){yv=Bt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ow(s,r),ky!==null&&ky(s,r)};var uo=G(null);function hh(){var s=uo.current;return s!==null?s:ct.pooledCache}function Tc(s,r){r===null?fe(uo,uo.current):fe(uo,r.pool)}function Vy(){var s=hh();return s===null?null:{parent:Vt._currentValue,pool:s}}var ua=Error(i(460)),ph=Error(i(474)),Ec=Error(i(542)),Sc={then:function(){}};function Uy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ly(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(fi,fi),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Fy(s),s;default:if(typeof r.status=="string")r.then(fi,fi);else{if(s=ct,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Fy(s),s}throw fo=r,ua}}function co(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(fo=l,ua):l}}var fo=null;function Oy(){if(fo===null)throw Error(i(459));var s=fo;return fo=null,s}function Fy(s){if(s===ua||s===Ec)throw Error(i(483))}var ca=null,xl=0;function Ac(s){var r=xl;return xl+=1,ca===null&&(ca=[]),Ly(ca,s,r)}function Nl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Cc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function qy(s){function r(B,q){if(s){var K=B.deletions;K===null?(B.deletions=[q],B.flags|=16):K.push(q)}}function l(B,q){if(!s)return null;for(;q!==null;)r(B,q),q=q.sibling;return null}function c(B){for(var q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function y(B,q){return B=ms(B,q),B.index=0,B.sibling=null,B}function v(B,q,K){return B.index=K,s?(K=B.alternate,K!==null?(K=K.index,K<q?(B.flags|=67108866,q):K):(B.flags|=67108866,q)):(B.flags|=1048576,q)}function A(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function R(B,q,K,ne){return q===null||q.tag!==6?(q=nh(K,B.mode,ne),q.return=B,q):(q=y(q,K),q.return=B,q)}function V(B,q,K,ne){var Te=K.type;return Te===F?te(B,q,K.props.children,ne,K.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===M&&co(Te)===q.type)?(q=y(q,K.props),Nl(q,K),q.return=B,q):(q=gc(K.type,K.key,K.props,null,B.mode,ne),Nl(q,K),q.return=B,q)}function J(B,q,K,ne){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=ih(K,B.mode,ne),q.return=B,q):(q=y(q,K.children||[]),q.return=B,q)}function te(B,q,K,ne,Te){return q===null||q.tag!==7?(q=ro(K,B.mode,ne,Te),q.return=B,q):(q=y(q,K),q.return=B,q)}function se(B,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=nh(""+q,B.mode,K),q.return=B,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return K=gc(q.type,q.key,q.props,null,B.mode,K),Nl(K,q),K.return=B,K;case k:return q=ih(q,B.mode,K),q.return=B,q;case M:return q=co(q),se(B,q,K)}if(ft(q)||H(q))return q=ro(q,B.mode,K,null),q.return=B,q;if(typeof q.then=="function")return se(B,Ac(q),K);if(q.$$typeof===z)return se(B,vc(B,q),K);Cc(B,q)}return null}function $(B,q,K,ne){var Te=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Te!==null?null:R(B,q,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case I:return K.key===Te?V(B,q,K,ne):null;case k:return K.key===Te?J(B,q,K,ne):null;case M:return K=co(K),$(B,q,K,ne)}if(ft(K)||H(K))return Te!==null?null:te(B,q,K,ne,null);if(typeof K.then=="function")return $(B,q,Ac(K),ne);if(K.$$typeof===z)return $(B,q,vc(B,K),ne);Cc(B,K)}return null}function W(B,q,K,ne,Te){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(K)||null,R(q,B,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return B=B.get(ne.key===null?K:ne.key)||null,V(q,B,ne,Te);case k:return B=B.get(ne.key===null?K:ne.key)||null,J(q,B,ne,Te);case M:return ne=co(ne),W(B,q,K,ne,Te)}if(ft(ne)||H(ne))return B=B.get(K)||null,te(q,B,ne,Te,null);if(typeof ne.then=="function")return W(B,q,K,Ac(ne),Te);if(ne.$$typeof===z)return W(B,q,K,vc(q,ne),Te);Cc(q,ne)}return null}function ge(B,q,K,ne){for(var Te=null,Qe=null,ye=q,ke=q=0,Ge=null;ye!==null&&ke<K.length;ke++){ye.index>ke?(Ge=ye,ye=null):Ge=ye.sibling;var Xe=$(B,ye,K[ke],ne);if(Xe===null){ye===null&&(ye=Ge);break}s&&ye&&Xe.alternate===null&&r(B,ye),q=v(Xe,q,ke),Qe===null?Te=Xe:Qe.sibling=Xe,Qe=Xe,ye=Ge}if(ke===K.length)return l(B,ye),Ke&&gs(B,ke),Te;if(ye===null){for(;ke<K.length;ke++)ye=se(B,K[ke],ne),ye!==null&&(q=v(ye,q,ke),Qe===null?Te=ye:Qe.sibling=ye,Qe=ye);return Ke&&gs(B,ke),Te}for(ye=c(ye);ke<K.length;ke++)Ge=W(ye,B,ke,K[ke],ne),Ge!==null&&(s&&Ge.alternate!==null&&ye.delete(Ge.key===null?ke:Ge.key),q=v(Ge,q,ke),Qe===null?Te=Ge:Qe.sibling=Ge,Qe=Ge);return s&&ye.forEach(function(vr){return r(B,vr)}),Ke&&gs(B,ke),Te}function Ae(B,q,K,ne){if(K==null)throw Error(i(151));for(var Te=null,Qe=null,ye=q,ke=q=0,Ge=null,Xe=K.next();ye!==null&&!Xe.done;ke++,Xe=K.next()){ye.index>ke?(Ge=ye,ye=null):Ge=ye.sibling;var vr=$(B,ye,Xe.value,ne);if(vr===null){ye===null&&(ye=Ge);break}s&&ye&&vr.alternate===null&&r(B,ye),q=v(vr,q,ke),Qe===null?Te=vr:Qe.sibling=vr,Qe=vr,ye=Ge}if(Xe.done)return l(B,ye),Ke&&gs(B,ke),Te;if(ye===null){for(;!Xe.done;ke++,Xe=K.next())Xe=se(B,Xe.value,ne),Xe!==null&&(q=v(Xe,q,ke),Qe===null?Te=Xe:Qe.sibling=Xe,Qe=Xe);return Ke&&gs(B,ke),Te}for(ye=c(ye);!Xe.done;ke++,Xe=K.next())Xe=W(ye,B,ke,Xe.value,ne),Xe!==null&&(s&&Xe.alternate!==null&&ye.delete(Xe.key===null?ke:Xe.key),q=v(Xe,q,ke),Qe===null?Te=Xe:Qe.sibling=Xe,Qe=Xe);return s&&ye.forEach(function(XR){return r(B,XR)}),Ke&&gs(B,ke),Te}function ut(B,q,K,ne){if(typeof K=="object"&&K!==null&&K.type===F&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case I:e:{for(var Te=K.key;q!==null;){if(q.key===Te){if(Te=K.type,Te===F){if(q.tag===7){l(B,q.sibling),ne=y(q,K.props.children),ne.return=B,B=ne;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===M&&co(Te)===q.type){l(B,q.sibling),ne=y(q,K.props),Nl(ne,K),ne.return=B,B=ne;break e}l(B,q);break}else r(B,q);q=q.sibling}K.type===F?(ne=ro(K.props.children,B.mode,ne,K.key),ne.return=B,B=ne):(ne=gc(K.type,K.key,K.props,null,B.mode,ne),Nl(ne,K),ne.return=B,B=ne)}return A(B);case k:e:{for(Te=K.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){l(B,q.sibling),ne=y(q,K.children||[]),ne.return=B,B=ne;break e}else{l(B,q);break}else r(B,q);q=q.sibling}ne=ih(K,B.mode,ne),ne.return=B,B=ne}return A(B);case M:return K=co(K),ut(B,q,K,ne)}if(ft(K))return ge(B,q,K,ne);if(H(K)){if(Te=H(K),typeof Te!="function")throw Error(i(150));return K=Te.call(K),Ae(B,q,K,ne)}if(typeof K.then=="function")return ut(B,q,Ac(K),ne);if(K.$$typeof===z)return ut(B,q,vc(B,K),ne);Cc(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(l(B,q.sibling),ne=y(q,K),ne.return=B,B=ne):(l(B,q),ne=nh(K,B.mode,ne),ne.return=B,B=ne),A(B)):l(B,q)}return function(B,q,K,ne){try{xl=0;var Te=ut(B,q,K,ne);return ca=null,Te}catch(ye){if(ye===ua||ye===Ec)throw ye;var Qe=Vn(29,ye,null,B.mode);return Qe.lanes=ne,Qe.return=B,Qe}finally{}}}var ho=qy(!0),Gy=qy(!1),nr=!1;function mh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ir(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function sr(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=mc(s),Cy(s,null,l),r}return pc(s,c,r,l),mc(s)}function Ml(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,sl(s,l)}}function yh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=r:v=v.next=r}else y=v=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var _h=!1;function Dl(){if(_h){var s=la;if(s!==null)throw s}}function Pl(s,r,l,c){_h=!1;var y=s.updateQueue;nr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var V=R,J=V.next;V.next=null,A===null?v=J:A.next=J,A=V;var te=s.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==A&&(R===null?te.firstBaseUpdate=J:R.next=J,te.lastBaseUpdate=V))}if(v!==null){var se=y.baseState;A=0,te=J=V=null,R=v;do{var $=R.lane&-536870913,W=$!==R.lane;if(W?(qe&$)===$:(c&$)===$){$!==0&&$===aa&&(_h=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=s,Ae=R;$=r;var ut=l;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){se=ge.call(ut,se,$);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,$=typeof ge=="function"?ge.call(ut,se,$):ge,$==null)break e;se=T({},se,$);break e;case 2:nr=!0}}$=R.callback,$!==null&&(s.flags|=64,W&&(s.flags|=8192),W=y.callbacks,W===null?y.callbacks=[$]:W.push($))}else W={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(J=te=W,V=se):te=te.next=W,A|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;W=R,R=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);te===null&&(V=se),y.baseState=V,y.firstBaseUpdate=J,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),ur|=A,s.lanes=A,s.memoizedState=se}}function Hy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function By(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Hy(l[s],r)}var fa=G(null),Ic=G(0);function zy(s,r){s=Rs,fe(Ic,s),fe(fa,r),Rs=s|r.baseLanes}function vh(){fe(Ic,Rs),fe(fa,fa.current)}function Th(){Rs=Ic.current,ie(fa),ie(Ic)}var Un=G(null),jn=null;function rr(s){var r=s.alternate;fe(Rt,Rt.current&1),fe(Un,s),jn===null&&(r===null||fa.current!==null||r.memoizedState!==null)&&(jn=s)}function Eh(s){fe(Rt,Rt.current),fe(Un,s),jn===null&&(jn=s)}function Yy(s){s.tag===22?(fe(Rt,Rt.current),fe(Un,s),jn===null&&(jn=s)):or()}function or(){fe(Rt,Rt.current),fe(Un,Un.current)}function Ln(s){ie(Un),jn===s&&(jn=null),ie(Rt)}var Rt=G(0);function wc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Rp(l)||bp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vs=0,Pe=null,at=null,Ut=null,Rc=!1,da=!1,po=!1,bc=0,kl=0,ha=null,qw=0;function Ct(){throw Error(i(321))}function Sh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!kn(s[l],r[l]))return!1;return!0}function Ah(s,r,l,c,y,v){return vs=v,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=s===null||s.memoizedState===null?b_:Oh,po=!1,v=l(c,y),po=!1,da&&(v=Jy(r,l,c,y)),Ky(s),v}function Ky(s){Z.H=Ll;var r=at!==null&&at.next!==null;if(vs=0,Ut=at=Pe=null,Rc=!1,kl=0,ha=null,r)throw Error(i(300));s===null||Lt||(s=s.dependencies,s!==null&&_c(s)&&(Lt=!0))}function Jy(s,r,l,c){Pe=s;var y=0;do{if(da&&(ha=null),kl=0,da=!1,25<=y)throw Error(i(301));if(y+=1,Ut=at=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=x_,v=r(l,c)}while(da);return v}function Gw(){var s=Z.H,r=s.useState()[0];return r=typeof r.then=="function"?Vl(r):r,s=s.useState()[0],(at!==null?at.memoizedState:null)!==s&&(Pe.flags|=1024),r}function Ch(){var s=bc!==0;return bc=0,s}function Ih(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function wh(s){if(Rc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Rc=!1}vs=0,Ut=at=Pe=null,da=!1,kl=bc=0,ha=null}function mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Pe.memoizedState=Ut=s:Ut=Ut.next=s,Ut}function bt(){if(at===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=at.next;var r=Ut===null?Pe.memoizedState:Ut.next;if(r!==null)Ut=r,at=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));at=s,s={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ut===null?Pe.memoizedState=Ut=s:Ut=Ut.next=s}return Ut}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(s){var r=kl;return kl+=1,ha===null&&(ha=[]),s=Ly(ha,s,r),r=Pe,(Ut===null?r.memoizedState:Ut.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?b_:Oh),s}function Nc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Vl(s);if(s.$$typeof===z)return tn(s)}throw Error(i(438,String(s)))}function Rh(s){var r=null,l=Pe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=xc(),Pe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=U;return r.index++,l}function Ts(s,r){return typeof r=="function"?r(s):r}function Mc(s){var r=bt();return bh(r,at,s)}function bh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}r.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{r=y.next;var R=A=null,V=null,J=r,te=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(qe&se)===se:(vs&se)===se){var $=J.revertLane;if($===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===aa&&(te=!0);else if((vs&$)===$){J=J.next,$===aa&&(te=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(R=V=se,A=v):V=V.next=se,Pe.lanes|=$,ur|=$;se=J.action,po&&l(v,se),v=J.hasEagerState?J.eagerState:l(v,se)}else $={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(R=V=$,A=v):V=V.next=$,Pe.lanes|=se,ur|=se;J=J.next}while(J!==null&&J!==r);if(V===null?A=v:V.next=R,!kn(v,s.memoizedState)&&(Lt=!0,te&&(l=la,l!==null)))throw l;s.memoizedState=v,s.baseState=A,s.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function xh(s){var r=bt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);kn(v,r.memoizedState)||(Lt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,c]}function $y(s,r,l){var c=Pe,y=bt(),v=Ke;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!kn((at||y).memoizedState,l);if(A&&(y.memoizedState=l,Lt=!0),y=y.queue,Dh(Wy.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Ut!==null&&Ut.memoizedState.tag&1){if(c.flags|=2048,pa(9,{destroy:void 0},Xy.bind(null,c,y,l,r),null),ct===null)throw Error(i(349));v||(vs&127)!==0||Qy(c,r,l)}return l}function Qy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Pe.updateQueue,r===null?(r=xc(),Pe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Xy(s,r,l,c){r.value=l,r.getSnapshot=c,Zy(r)&&jy(s)}function Wy(s,r,l){return l(function(){Zy(r)&&jy(s)})}function Zy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!kn(s,l)}catch{return!0}}function jy(s){var r=so(s,2);r!==null&&Rn(r,s,2)}function Nh(s){var r=mn();if(typeof s=="function"){var l=s;if(s=l(),po){vn(!0);try{l()}finally{vn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:s},r}function e_(s,r,l,c){return s.baseState=l,bh(s,at,typeof c=="function"?c:Ts)}function Hw(s,r,l,c,y){if(kc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Z.T!==null?l(!0):v.isTransition=!1,c(v),l=r.pending,l===null?(v.next=r.pending=v,t_(r,v)):(v.next=l.next,r.pending=l.next=v)}}function t_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var v=Z.T,A={};Z.T=A;try{var R=l(y,c),V=Z.S;V!==null&&V(A,R),n_(s,r,R)}catch(J){Mh(s,r,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),Z.T=v}}else try{v=l(y,c),n_(s,r,v)}catch(J){Mh(s,r,J)}}function n_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){i_(s,r,c)},function(c){return Mh(s,r,c)}):i_(s,r,l)}function i_(s,r,l){r.status="fulfilled",r.value=l,s_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,t_(s,l)))}function Mh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,s_(r),r=r.next;while(r!==c)}s.action=null}function s_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function r_(s,r){return r}function o_(s,r){if(Ke){var l=ct.formState;if(l!==null){e:{var c=Pe;if(Ke){if(mt){t:{for(var y=mt,v=Zn;y.nodeType!==8;){if(!v){y=null;break t}if(y=ei(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){mt=ei(y.nextSibling),c=y.data==="F!";break e}}er(c)}c=!1}c&&(r=l[0])}}return l=mn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:r},l.queue=c,l=I_.bind(null,Pe,c),c.dispatch=l,c=Nh(!1),v=Lh.bind(null,Pe,!1,c.queue),c=mn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=Hw.bind(null,Pe,y,v,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function a_(s){var r=bt();return l_(r,at,s)}function l_(s,r,l){if(r=bh(s,r,r_)[0],s=Mc(Ts)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Vl(r)}catch(A){throw A===ua?Ec:A}else c=r;r=bt();var y=r.queue,v=y.dispatch;return l!==r.memoizedState&&(Pe.flags|=2048,pa(9,{destroy:void 0},Bw.bind(null,y,l),null)),[c,v,s]}function Bw(s,r){s.action=r}function u_(s){var r=bt(),l=at;if(l!==null)return l_(r,l,s);bt(),r=r.memoizedState,l=bt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function pa(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=xc(),Pe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function c_(){return bt().memoizedState}function Dc(s,r,l,c){var y=mn();Pe.flags|=s,y.memoizedState=pa(1|r,{destroy:void 0},l,c===void 0?null:c)}function Pc(s,r,l,c){var y=bt();c=c===void 0?null:c;var v=y.memoizedState.inst;at!==null&&c!==null&&Sh(c,at.memoizedState.deps)?y.memoizedState=pa(r,v,l,c):(Pe.flags|=s,y.memoizedState=pa(1|r,v,l,c))}function f_(s,r){Dc(8390656,8,s,r)}function Dh(s,r){Pc(2048,8,s,r)}function zw(s){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=xc(),Pe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function d_(s){var r=bt().memoizedState;return zw({ref:r,nextImpl:s}),function(){if((et&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function h_(s,r){return Pc(4,2,s,r)}function p_(s,r){return Pc(4,4,s,r)}function m_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function g_(s,r,l){l=l!=null?l.concat([s]):null,Pc(4,4,m_.bind(null,r,s),l)}function Ph(){}function y_(s,r){var l=bt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Sh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function __(s,r){var l=bt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Sh(r,c[1]))return c[0];if(c=s(),po){vn(!0);try{s()}finally{vn(!1)}}return l.memoizedState=[c,r],c}function kh(s,r,l){return l===void 0||(vs&1073741824)!==0&&(qe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=vv(),Pe.lanes|=s,ur|=s,l)}function v_(s,r,l,c){return kn(l,r)?l:fa.current!==null?(s=kh(s,l,c),kn(s,r)||(Lt=!0),s):(vs&42)===0||(vs&1073741824)!==0&&(qe&261930)===0?(Lt=!0,s.memoizedState=l):(s=vv(),Pe.lanes|=s,ur|=s,r)}function T_(s,r,l,c,y){var v=ue.p;ue.p=v!==0&&8>v?v:8;var A=Z.T,R={};Z.T=R,Lh(s,!1,r,l);try{var V=y(),J=Z.S;if(J!==null&&J(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var te=Fw(V,c);Ul(s,r,te,qn(s))}else Ul(s,r,c,qn(s))}catch(se){Ul(s,r,{then:function(){},status:"rejected",reason:se},qn())}finally{ue.p=v,A!==null&&R.types!==null&&(A.types=R.types),Z.T=A}}function Yw(){}function Vh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=E_(s).queue;T_(s,y,r,ve,l===null?Yw:function(){return S_(s),l(c)})}function E_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:ve},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function S_(s){var r=E_(s);r.next===null&&(r=s.alternate.memoizedState),Ul(s,r.next.queue,{},qn())}function Uh(){return tn(jl)}function A_(){return bt().memoizedState}function C_(){return bt().memoizedState}function Kw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=qn();s=ir(l);var c=sr(r,s,l);c!==null&&(Rn(c,r,l),Ml(c,r,l)),r={cache:fh()},s.payload=r;return}r=r.return}}function Jw(s,r,l){var c=qn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},kc(s)?w_(r,l):(l=eh(s,r,l,c),l!==null&&(Rn(l,s,c),R_(l,r,c)))}function I_(s,r,l){var c=qn();Ul(s,r,l,c)}function Ul(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(kc(s))w_(r,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,R=v(A,l);if(y.hasEagerState=!0,y.eagerState=R,kn(R,A))return pc(s,r,y,0),ct===null&&hc(),!1}catch{}finally{}if(l=eh(s,r,y,c),l!==null)return Rn(l,s,c),R_(l,r,c),!0}return!1}function Lh(s,r,l,c){if(c={lane:2,revertLane:mp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},kc(s)){if(r)throw Error(i(479))}else r=eh(s,l,c,2),r!==null&&Rn(r,s,2)}function kc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function w_(s,r){da=Rc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function R_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,sl(s,l)}}var Ll={readContext:tn,use:Nc,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Ll.useEffectEvent=Ct;var b_={readContext:tn,use:Nc,useCallback:function(s,r){return mn().memoizedState=[s,r===void 0?null:r],s},useContext:tn,useEffect:f_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Dc(4194308,4,m_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Dc(4194308,4,s,r)},useInsertionEffect:function(s,r){Dc(4,2,s,r)},useMemo:function(s,r){var l=mn();r=r===void 0?null:r;var c=s();if(po){vn(!0);try{s()}finally{vn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=mn();if(l!==void 0){var y=l(r);if(po){vn(!0);try{l(r)}finally{vn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Jw.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var r=mn();return s={current:s},r.memoizedState=s},useState:function(s){s=Nh(s);var r=s.queue,l=I_.bind(null,Pe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Ph,useDeferredValue:function(s,r){var l=mn();return kh(l,s,r)},useTransition:function(){var s=Nh(!1);return s=T_.bind(null,Pe,s.queue,!0,!1),mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Pe,y=mn();if(Ke){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ct===null)throw Error(i(349));(qe&127)!==0||Qy(c,r,l)}y.memoizedState=l;var v={value:l,getSnapshot:r};return y.queue=v,f_(Wy.bind(null,c,v,s),[s]),c.flags|=2048,pa(9,{destroy:void 0},Xy.bind(null,c,v,l,r),null),l},useId:function(){var s=mn(),r=ct.identifierPrefix;if(Ke){var l=Yi,c=zi;l=(c&~(1<<32-j(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=bc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=qw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Uh,useFormState:o_,useActionState:o_,useOptimistic:function(s){var r=mn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Lh.bind(null,Pe,!0,l),l.dispatch=r,[s,r]},useMemoCache:Rh,useCacheRefresh:function(){return mn().memoizedState=Kw.bind(null,Pe)},useEffectEvent:function(s){var r=mn(),l={impl:s};return r.memoizedState=l,function(){if((et&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Oh={readContext:tn,use:Nc,useCallback:y_,useContext:tn,useEffect:Dh,useImperativeHandle:g_,useInsertionEffect:h_,useLayoutEffect:p_,useMemo:__,useReducer:Mc,useRef:c_,useState:function(){return Mc(Ts)},useDebugValue:Ph,useDeferredValue:function(s,r){var l=bt();return v_(l,at.memoizedState,s,r)},useTransition:function(){var s=Mc(Ts)[0],r=bt().memoizedState;return[typeof s=="boolean"?s:Vl(s),r]},useSyncExternalStore:$y,useId:A_,useHostTransitionStatus:Uh,useFormState:a_,useActionState:a_,useOptimistic:function(s,r){var l=bt();return e_(l,at,s,r)},useMemoCache:Rh,useCacheRefresh:C_};Oh.useEffectEvent=d_;var x_={readContext:tn,use:Nc,useCallback:y_,useContext:tn,useEffect:Dh,useImperativeHandle:g_,useInsertionEffect:h_,useLayoutEffect:p_,useMemo:__,useReducer:xh,useRef:c_,useState:function(){return xh(Ts)},useDebugValue:Ph,useDeferredValue:function(s,r){var l=bt();return at===null?kh(l,s,r):v_(l,at.memoizedState,s,r)},useTransition:function(){var s=xh(Ts)[0],r=bt().memoizedState;return[typeof s=="boolean"?s:Vl(s),r]},useSyncExternalStore:$y,useId:A_,useHostTransitionStatus:Uh,useFormState:u_,useActionState:u_,useOptimistic:function(s,r){var l=bt();return at!==null?e_(l,at,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Rh,useCacheRefresh:C_};x_.useEffectEvent=d_;function Fh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var qh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=qn(),y=ir(c);y.payload=r,l!=null&&(y.callback=l),r=sr(s,y,c),r!==null&&(Rn(r,s,c),Ml(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=qn(),y=ir(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=sr(s,y,c),r!==null&&(Rn(r,s,c),Ml(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=qn(),c=ir(l);c.tag=2,r!=null&&(c.callback=r),r=sr(s,c,l),r!==null&&(Rn(r,s,l),Ml(r,s,l))}};function N_(s,r,l,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):r.prototype&&r.prototype.isPureReactComponent?!Al(l,c)||!Al(y,v):!0}function M_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&qh.enqueueReplaceState(r,r.state,null)}function mo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function D_(s){dc(s)}function P_(s){console.error(s)}function k_(s){dc(s)}function Vc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function V_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Gh(s,r,l){return l=ir(l),l.tag=3,l.payload={element:null},l.callback=function(){Vc(s,r)},l}function U_(s){return s=ir(s),s.tag=3,s}function L_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){V_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){V_(r,l,c),typeof y!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function $w(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&oa(r,l,y,!0),l=Un.current,l!==null){switch(l.tag){case 31:case 13:return jn===null?Jc():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Sc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),dp(s,c,y)),!1;case 22:return l.flags|=65536,c===Sc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),dp(s,c,y)),!1}throw Error(i(435,l.tag))}return dp(s,c,y),Jc(),!1}if(Ke)return r=Un.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==oh&&(s=Error(i(422),{cause:c}),wl(Qn(s,l)))):(c!==oh&&(r=Error(i(423),{cause:c}),wl(Qn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Qn(c,l),y=Gh(s.stateNode,c,y),yh(s,y),It!==4&&(It=2)),!1;var v=Error(i(520),{cause:c});if(v=Qn(v,l),Yl===null?Yl=[v]:Yl.push(v),It!==4&&(It=2),r===null)return!0;c=Qn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Gh(l.stateNode,c,s),yh(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(cr===null||!cr.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=U_(y),L_(y,s,l,c),yh(l,y),!1}l=l.return}while(l!==null);return!1}var Hh=Error(i(461)),Lt=!1;function nn(s,r,l,c){r.child=s===null?Gy(r,null,l,c):ho(r,s.child,l,c)}function O_(s,r,l,c,y){l=l.render;var v=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return lo(r),c=Ah(s,r,l,A,v,y),R=Ch(),s!==null&&!Lt?(Ih(s,r,y),Es(s,r,y)):(Ke&&R&&sh(r),r.flags|=1,nn(s,r,c,y),r.child)}function F_(s,r,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!th(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,q_(s,r,v,c,y)):(s=gc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!Xh(s,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:Al,l(A,c)&&s.ref===r.ref)return Es(s,r,y)}return r.flags|=1,s=ms(v,c),s.ref=r.ref,s.return=r,r.child=s}function q_(s,r,l,c,y){if(s!==null){var v=s.memoizedProps;if(Al(v,c)&&s.ref===r.ref)if(Lt=!1,r.pendingProps=c=v,Xh(s,y))(s.flags&131072)!==0&&(Lt=!0);else return r.lanes=s.lanes,Es(s,r,y)}return Bh(s,r,l,c,y)}function G_(s,r,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return H_(s,r,v,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Tc(r,v!==null?v.cachePool:null),v!==null?zy(r,v):vh(),Yy(r);else return c=r.lanes=536870912,H_(s,r,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Tc(r,v.cachePool),zy(r,v),or(),r.memoizedState=null):(s!==null&&Tc(r,null),vh(),or());return nn(s,r,y,l),r.child}function Ol(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function H_(s,r,l,c,y){var v=hh();return v=v===null?null:{parent:Vt._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&Tc(r,null),vh(),Yy(r),s!==null&&oa(s,r,c,!0),r.childLanes=y,null}function Uc(s,r){return r=Oc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function B_(s,r,l){return ho(r,s.child,null,l),s=Uc(r,r.pendingProps),s.flags|=2,Ln(r),r.memoizedState=null,s}function Qw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ke){if(c.mode==="hidden")return s=Uc(r,c),r.lanes=536870912,Ol(null,s);if(Eh(r),(s=mt)?(s=tT(s,Zn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Zs!==null?{id:zi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},l=wy(s),l.return=r,r.child=l,en=r,mt=null)):s=null,s===null)throw er(r);return r.lanes=536870912,null}return Uc(r,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(Eh(r),y)if(r.flags&256)r.flags&=-257,r=B_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Lt||oa(s,r,l,!1),y=(l&s.childLanes)!==0,Lt||y){if(c=ct,c!==null&&(A=rl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,so(s,A),Rn(c,s,A),Hh;Jc(),r=B_(s,r,l)}else s=v.treeContext,mt=ei(A.nextSibling),en=r,Ke=!0,js=null,Zn=!1,s!==null&&xy(r,s),r=Uc(r,c),r.flags|=4096;return r}return s=ms(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Lc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Bh(s,r,l,c,y){return lo(r),l=Ah(s,r,l,c,void 0,y),c=Ch(),s!==null&&!Lt?(Ih(s,r,y),Es(s,r,y)):(Ke&&c&&sh(r),r.flags|=1,nn(s,r,l,y),r.child)}function z_(s,r,l,c,y,v){return lo(r),r.updateQueue=null,l=Jy(r,c,l,y),Ky(s),c=Ch(),s!==null&&!Lt?(Ih(s,r,v),Es(s,r,v)):(Ke&&c&&sh(r),r.flags|=1,nn(s,r,l,v),r.child)}function Y_(s,r,l,c,y){if(lo(r),r.stateNode===null){var v=na,A=l.contextType;typeof A=="object"&&A!==null&&(v=tn(A)),v=new l(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=qh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},mh(r),A=l.contextType,v.context=typeof A=="object"&&A!==null?tn(A):na,v.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Fh(r,l,A,c),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&qh.enqueueReplaceState(v,v.state,null),Pl(r,c,v,y),Dl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){v=r.stateNode;var R=r.memoizedProps,V=mo(l,R);v.props=V;var J=v.context,te=l.contextType;A=na,typeof te=="object"&&te!==null&&(A=tn(te));var se=l.getDerivedStateFromProps;te=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||J!==A)&&M_(r,v,c,A),nr=!1;var $=r.memoizedState;v.state=$,Pl(r,c,v,y),Dl(),J=r.memoizedState,R||$!==J||nr?(typeof se=="function"&&(Fh(r,l,se,c),J=r.memoizedState),(V=nr||N_(r,l,V,c,$,J,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),v.props=c,v.state=J,v.context=A,c=V):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,gh(s,r),A=r.memoizedProps,te=mo(l,A),v.props=te,se=r.pendingProps,$=v.context,J=l.contextType,V=na,typeof J=="object"&&J!==null&&(V=tn(J)),R=l.getDerivedStateFromProps,(J=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||$!==V)&&M_(r,v,c,V),nr=!1,$=r.memoizedState,v.state=$,Pl(r,c,v,y),Dl();var W=r.memoizedState;A!==se||$!==W||nr||s!==null&&s.dependencies!==null&&_c(s.dependencies)?(typeof R=="function"&&(Fh(r,l,R,c),W=r.memoizedState),(te=nr||N_(r,l,te,c,$,W,V)||s!==null&&s.dependencies!==null&&_c(s.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,V)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),v.props=c,v.state=W,v.context=V,c=te):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return v=c,Lc(s,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&c?(r.child=ho(r,s.child,null,y),r.child=ho(r,null,l,y)):nn(s,r,l,y),r.memoizedState=v.state,s=r.child):s=Es(s,r,y),s}function K_(s,r,l,c){return oo(),r.flags|=256,nn(s,r,l,c),r.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(s){return{baseLanes:s,cachePool:Vy()}}function Kh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Fn),s}function J_(s,r,l){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Rt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ke){if(y?rr(r):or(),(s=mt)?(s=tT(s,Zn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Zs!==null?{id:zi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},l=wy(s),l.return=r,r.child=l,en=r,mt=null)):s=null,s===null)throw er(r);return bp(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(or(),y=r.mode,R=Oc({mode:"hidden",children:R},y),c=ro(c,y,l,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Yh(l),c.childLanes=Kh(s,A,l),r.memoizedState=zh,Ol(null,c)):(rr(r),Jh(r,R))}var V=s.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(v)r.flags&256?(rr(r),r.flags&=-257,r=$h(s,r,l)):r.memoizedState!==null?(or(),r.child=s.child,r.flags|=128,r=null):(or(),R=c.fallback,y=r.mode,c=Oc({mode:"visible",children:c.children},y),R=ro(R,y,l,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,ho(r,s.child,null,l),c=r.child,c.memoizedState=Yh(l),c.childLanes=Kh(s,A,l),r.memoizedState=zh,r=Ol(null,c));else if(rr(r),bp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,wl({value:c,source:null,stack:null}),r=$h(s,r,l)}else if(Lt||oa(s,r,l,!1),A=(l&s.childLanes)!==0,Lt||A){if(A=ct,A!==null&&(c=rl(A,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,so(s,c),Rn(A,s,c),Hh;Rp(R)||Jc(),r=$h(s,r,l)}else Rp(R)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,mt=ei(R.nextSibling),en=r,Ke=!0,js=null,Zn=!1,s!==null&&xy(r,s),r=Jh(r,c.children),r.flags|=4096);return r}return y?(or(),R=c.fallback,y=r.mode,V=s.child,J=V.sibling,c=ms(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,J!==null?R=ms(J,R):(R=ro(R,y,l,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,Ol(null,c),c=r.child,R=s.child.memoizedState,R===null?R=Yh(l):(y=R.cachePool,y!==null?(V=Vt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=Vy(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=Kh(s,A,l),r.memoizedState=zh,Ol(s.child,c)):(rr(r),l=s.child,s=l.sibling,l=ms(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function Jh(s,r){return r=Oc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Oc(s,r){return s=Vn(22,s,null,r),s.lanes=0,s}function $h(s,r,l){return ho(r,s.child,null,l),s=Jh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function $_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),uh(s.return,r,l)}function Qh(s,r,l,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function Q_(s,r,l){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Rt.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,fe(Rt,A),nn(s,r,c,l),c=Ke?Il:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$_(s,l,r);else if(s.tag===19)$_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&wc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Qh(r,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&wc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Qh(r,!0,l,null,v,c);break;case"together":Qh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Es(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),ur|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(oa(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=ms(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=ms(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Xh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&_c(s)))}function Xw(s,r,l){switch(r.tag){case 3:Et(r,r.stateNode.containerInfo),tr(r,Vt,s.memoizedState.cache),oo();break;case 27:case 5:oi(r);break;case 4:Et(r,r.stateNode.containerInfo);break;case 10:tr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Eh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(rr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?J_(s,r,l):(rr(r),s=Es(s,r,l),s!==null?s.sibling:null);rr(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(oa(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return Q_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(Rt,Rt.current),c)break;return null;case 22:return r.lanes=0,G_(s,r,l,r.pendingProps);case 24:tr(r,Vt,s.memoizedState.cache)}return Es(s,r,l)}function X_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Lt=!0;else{if(!Xh(s,l)&&(r.flags&128)===0)return Lt=!1,Xw(s,r,l);Lt=(s.flags&131072)!==0}else Lt=!1,Ke&&(r.flags&1048576)!==0&&by(r,Il,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=co(r.elementType),r.type=s,typeof s=="function")th(s)?(c=mo(s,c),r.tag=1,r=Y_(null,r,s,c,l)):(r.tag=0,r=Bh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ee){r.tag=11,r=O_(null,r,s,c,l);break e}else if(y===N){r.tag=14,r=F_(null,r,s,c,l);break e}}throw r=Ve(s)||s,Error(i(306,r,""))}}return r;case 0:return Bh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=mo(c,r.pendingProps),Y_(s,r,c,y,l);case 3:e:{if(Et(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,gh(s,r),Pl(r,c,null,l);var A=r.memoizedState;if(c=A.cache,tr(r,Vt,c),c!==v.cache&&ch(r,[Vt],l,!0),Dl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=K_(s,r,c,l);break e}else if(c!==y){y=Qn(Error(i(424)),r),wl(y),r=K_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(mt=ei(s.firstChild),en=r,Ke=!0,js=null,Zn=!0,l=Gy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(oo(),c===y){r=Es(s,r,l);break e}nn(s,r,c,l)}r=r.child}return r;case 26:return Lc(s,r),s===null?(l=aT(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ke||(l=r.type,s=r.pendingProps,c=ef(xe.current).createElement(l),c[Dt]=r,c[Jt]=s,sn(c,l,s),Pt(c),r.stateNode=c):r.memoizedState=aT(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return oi(r),s===null&&Ke&&(c=r.stateNode=sT(r.type,r.pendingProps,xe.current),en=r,Zn=!0,y=mt,pr(r.type)?(xp=y,mt=ei(c.firstChild)):mt=y),nn(s,r,r.pendingProps.children,l),Lc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ke&&((y=c=mt)&&(c=wR(c,r.type,r.pendingProps,Zn),c!==null?(r.stateNode=c,en=r,mt=ei(c.firstChild),Zn=!1,y=!0):y=!1),y||er(r)),oi(r),y=r.type,v=r.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,Cp(y,v)?c=null:A!==null&&Cp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Ah(s,r,Gw,null,null,l),jl._currentValue=y),Lc(s,r),nn(s,r,c,l),r.child;case 6:return s===null&&Ke&&((s=l=mt)&&(l=RR(l,r.pendingProps,Zn),l!==null?(r.stateNode=l,en=r,mt=null,s=!0):s=!1),s||er(r)),null;case 13:return J_(s,r,l);case 4:return Et(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=ho(r,null,c,l):nn(s,r,c,l),r.child;case 11:return O_(s,r,r.type,r.pendingProps,l);case 7:return nn(s,r,r.pendingProps,l),r.child;case 8:return nn(s,r,r.pendingProps.children,l),r.child;case 12:return nn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,tr(r,r.type,c.value),nn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,lo(r),y=tn(y),c=c(y),r.flags|=1,nn(s,r,c,l),r.child;case 14:return F_(s,r,r.type,r.pendingProps,l);case 15:return q_(s,r,r.type,r.pendingProps,l);case 19:return Q_(s,r,l);case 31:return Qw(s,r,l);case 22:return G_(s,r,l,r.pendingProps);case 24:return lo(r),c=tn(Vt),s===null?(y=hh(),y===null&&(y=ct,v=fh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),r.memoizedState={parent:c,cache:y},mh(r),tr(r,Vt,y)):((s.lanes&l)!==0&&(gh(s,r),Pl(r,null,null,l),Dl()),y=s.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),tr(r,Vt,c)):(c=v.cache,tr(r,Vt,c),c!==y.cache&&ch(r,[Vt],l,!0))),nn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ss(s){s.flags|=4}function Wh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Av())s.flags|=8192;else throw fo=Sc,ph}else s.flags&=-16777217}function W_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!dT(r))if(Av())s.flags|=8192;else throw fo=Sc,ph}function Fc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Yu():536870912,s.lanes|=r,_a|=r)}function Fl(s,r){if(!Ke)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function gt(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Ww(s,r,l){var c=r.pendingProps;switch(rh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return gt(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),_s(Vt),tt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ra(r)?Ss(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ah())),gt(r),null;case 26:var y=r.type,v=r.memoizedState;return s===null?(Ss(r),v!==null?(gt(r),W_(r,v)):(gt(r),Wh(r,y,null,c,l))):v?v!==s.memoizedState?(Ss(r),gt(r),W_(r,v)):(gt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ss(r),gt(r),Wh(r,y,s,c,l)),null;case 27:if(os(r),l=xe.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ss(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return gt(r),null}s=pe.current,ra(r)?Ny(r):(s=sT(y,c,l),r.stateNode=s,Ss(r))}return gt(r),null;case 5:if(os(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ss(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return gt(r),null}if(v=pe.current,ra(r))Ny(r);else{var A=ef(xe.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[Dt]=r,v[Jt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;e:switch(sn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ss(r)}}return gt(r),Wh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Ss(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=xe.current,ra(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=en,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Dt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Jv(s.nodeValue,l)),s||er(r,!0)}else s=ef(s).createTextNode(c),s[Dt]=r,r.stateNode=s}return gt(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=ra(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Dt]=r}else oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),s=!1}else l=ah(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Ln(r),r):(Ln(r),null);if((r.flags&128)!==0)throw Error(i(558))}return gt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ra(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Dt]=r}else oo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),y=!1}else y=ah(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Ln(r),r):(Ln(r),null)}return Ln(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Fc(r,r.updateQueue),gt(r),null);case 4:return tt(),s===null&&vp(r.stateNode.containerInfo),gt(r),null;case 10:return _s(r.type),gt(r),null;case 19:if(ie(Rt),c=r.memoizedState,c===null)return gt(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)Fl(c,!1);else{if(It!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=wc(s),v!==null){for(r.flags|=128,Fl(c,!1),s=v.updateQueue,r.updateQueue=s,Fc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Iy(l,s),l=l.sibling;return fe(Rt,Rt.current&1|2),Ke&&gs(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Bt()>zc&&(r.flags|=128,y=!0,Fl(c,!1),r.lanes=4194304)}else{if(!y)if(s=wc(v),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Fc(r,s),Fl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ke)return gt(r),null}else 2*Bt()-c.renderingStartTime>zc&&l!==536870912&&(r.flags|=128,y=!0,Fl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(s=c.last,s!==null?s.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Bt(),s.sibling=null,l=Rt.current,fe(Rt,y?l&1|2:l&1),Ke&&gs(r,c.treeForkCount),s):(gt(r),null);case 22:case 23:return Ln(r),Th(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),l=r.updateQueue,l!==null&&Fc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ie(uo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),_s(Vt),gt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Zw(s,r){switch(rh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return _s(Vt),tt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return os(r),null;case 31:if(r.memoizedState!==null){if(Ln(r),r.alternate===null)throw Error(i(340));oo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Ln(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));oo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ie(Rt),null;case 4:return tt(),null;case 10:return _s(r.type),null;case 22:case 23:return Ln(r),Th(),s!==null&&ie(uo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return _s(Vt),null;case 25:return null;default:return null}}function Z_(s,r){switch(rh(r),r.tag){case 3:_s(Vt),tt();break;case 26:case 27:case 5:os(r);break;case 4:tt();break;case 31:r.memoizedState!==null&&Ln(r);break;case 13:Ln(r);break;case 19:ie(Rt);break;case 10:_s(r.type);break;case 22:case 23:Ln(r),Th(),s!==null&&ie(uo);break;case 24:_s(Vt)}}function ql(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){rt(r,r.return,R)}}function ar(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var V=l,J=R;try{J()}catch(te){rt(y,V,te)}}}c=c.next}while(c!==v)}}catch(te){rt(r,r.return,te)}}function j_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{By(r,l)}catch(c){rt(s,s.return,c)}}}function ev(s,r,l){l.props=mo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){rt(s,r,c)}}function Gl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){rt(s,r,y)}}function Ki(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){rt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){rt(s,r,y)}else l.current=null}function tv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){rt(s,s.return,y)}}function Zh(s,r,l){try{var c=s.stateNode;TR(c,s.type,l,r),c[Jt]=r}catch(y){rt(s,s.return,y)}}function nv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&pr(s.type)||s.tag===4}function jh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||nv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&pr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ep(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=fi));else if(c!==4&&(c===27&&pr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(ep(s,r,l),s=s.sibling;s!==null;)ep(s,r,l),s=s.sibling}function qc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&pr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(qc(s,r,l),s=s.sibling;s!==null;)qc(s,r,l),s=s.sibling}function iv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);sn(r,c,l),r[Dt]=s,r[Jt]=l}catch(v){rt(s,s.return,v)}}var As=!1,Ot=!1,tp=!1,sv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function jw(s,r){if(s=s.containerInfo,Sp=lf,s=gy(s),$d(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,R=-1,V=-1,J=0,te=0,se=s,$=null;t:for(;;){for(var W;se!==l||y!==0&&se.nodeType!==3||(R=A+y),se!==v||c!==0&&se.nodeType!==3||(V=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(W=se.firstChild)!==null;)$=se,se=W;for(;;){if(se===s)break t;if($===l&&++J===y&&(R=A),$===v&&++te===c&&(V=A),(W=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=W}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ap={focusedElem:s,selectionRange:l},lf=!1,Qt=r;Qt!==null;)if(r=Qt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Qt=s;else for(;Qt!==null;){switch(r=Qt,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ge=mo(l.type,y);s=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){rt(l,l.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)wp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":wp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Qt=s;break}Qt=r.return}}function rv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Is(s,l),c&4&&ql(5,l);break;case 1:if(Is(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){rt(l,l.return,A)}else{var y=mo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){rt(l,l.return,A)}}c&64&&j_(l),c&512&&Gl(l,l.return);break;case 3:if(Is(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{By(s,r)}catch(A){rt(l,l.return,A)}}break;case 27:r===null&&c&4&&iv(l);case 26:case 5:Is(s,l),r===null&&c&4&&tv(l),c&512&&Gl(l,l.return);break;case 12:Is(s,l);break;case 31:Is(s,l),c&4&&lv(s,l);break;case 13:Is(s,l),c&4&&uv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=lR.bind(null,l),bR(s,l))));break;case 22:if(c=l.memoizedState!==null||As,!c){r=r!==null&&r.memoizedState!==null||Ot,y=As;var v=Ot;As=c,(Ot=r)&&!v?ws(s,l,(l.subtreeFlags&8772)!==0):Is(s,l),As=y,Ot=v}break;case 30:break;default:Is(s,l)}}function ov(s){var r=s.alternate;r!==null&&(s.alternate=null,ov(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ho(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var vt=null,An=!1;function Cs(s,r,l){for(l=l.child;l!==null;)av(s,r,l),l=l.sibling}function av(s,r,l){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Mn,l)}catch{}switch(l.tag){case 26:Ot||Ki(l,r),Cs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ot||Ki(l,r);var c=vt,y=An;pr(l.type)&&(vt=l.stateNode,An=!1),Cs(s,r,l),Xl(l.stateNode),vt=c,An=y;break;case 5:Ot||Ki(l,r);case 6:if(c=vt,y=An,vt=null,Cs(s,r,l),vt=c,An=y,vt!==null)if(An)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(l.stateNode)}catch(v){rt(l,r,v)}else try{vt.removeChild(l.stateNode)}catch(v){rt(l,r,v)}break;case 18:vt!==null&&(An?(s=vt,jv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),wa(s)):jv(vt,l.stateNode));break;case 4:c=vt,y=An,vt=l.stateNode.containerInfo,An=!0,Cs(s,r,l),vt=c,An=y;break;case 0:case 11:case 14:case 15:ar(2,l,r),Ot||ar(4,l,r),Cs(s,r,l);break;case 1:Ot||(Ki(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&ev(l,r,c)),Cs(s,r,l);break;case 21:Cs(s,r,l);break;case 22:Ot=(c=Ot)||l.memoizedState!==null,Cs(s,r,l),Ot=c;break;default:Cs(s,r,l)}}function lv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{wa(s)}catch(l){rt(r,r.return,l)}}}function uv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{wa(s)}catch(l){rt(r,r.return,l)}}function eR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new sv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new sv),r;default:throw Error(i(435,s.tag))}}function Gc(s,r){var l=eR(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=uR.bind(null,s,c);c.then(y,y)}})}function Cn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(pr(R.type)){vt=R.stateNode,An=!1;break e}break;case 5:vt=R.stateNode,An=!1;break e;case 3:case 4:vt=R.stateNode.containerInfo,An=!0;break e}R=R.return}if(vt===null)throw Error(i(160));av(v,A,y),vt=null,An=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)cv(r,s),r=r.sibling}var yi=null;function cv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Cn(r,s),In(s),c&4&&(ar(3,s,s.return),ql(3,s),ar(5,s,s.return));break;case 1:Cn(r,s),In(s),c&512&&(Ot||l===null||Ki(l,l.return)),c&64&&As&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=yi;if(Cn(r,s),In(s),c&512&&(Ot||l===null||Ki(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Di]||v[Dt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),sn(v,c,l),v[Dt]=s,Pt(v),c=v;break e;case"link":var A=cT("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(v=A[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}v=y.createElement(c),sn(v,c,l),y.head.appendChild(v);break;case"meta":if(A=cT("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(v=A[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}v=y.createElement(c),sn(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Dt]=s,Pt(v),c=v}s.stateNode=c}else fT(y,s.type,s.stateNode);else s.stateNode=uT(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?fT(y,s.type,s.stateNode):uT(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Zh(s,s.memoizedProps,l.memoizedProps)}break;case 27:Cn(r,s),In(s),c&512&&(Ot||l===null||Ki(l,l.return)),l!==null&&c&4&&Zh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Cn(r,s),In(s),c&512&&(Ot||l===null||Ki(l,l.return)),s.flags&32){y=s.stateNode;try{Sn(y,"")}catch(ge){rt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Zh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(tp=!0);break;case 6:if(Cn(r,s),In(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){rt(s,s.return,ge)}}break;case 3:if(sf=null,y=yi,yi=tf(r.containerInfo),Cn(r,s),yi=y,In(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{wa(r.containerInfo)}catch(ge){rt(s,s.return,ge)}tp&&(tp=!1,fv(s));break;case 4:c=yi,yi=tf(s.stateNode.containerInfo),Cn(r,s),In(s),yi=c;break;case 12:Cn(r,s),In(s);break;case 31:Cn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Gc(s,c)));break;case 13:Cn(r,s),In(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bc=Bt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Gc(s,c)));break;case 22:y=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,J=As,te=Ot;if(As=J||y,Ot=te||V,Cn(r,s),Ot=te,As=J,In(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||V||As||Ot||go(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){V=l=r;try{if(v=V.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=V.stateNode;var se=V.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ge){rt(V,V.return,ge)}}}else if(r.tag===6){if(l===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ge){rt(V,V.return,ge)}}}else if(r.tag===18){if(l===null){V=r;try{var W=V.stateNode;y?eT(W,!0):eT(V.stateNode,!1)}catch(ge){rt(V,V.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Gc(s,l))));break;case 19:Cn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Gc(s,c)));break;case 30:break;case 21:break;default:Cn(r,s),In(s)}}function In(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(nv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=jh(s);qc(s,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(Sn(A,""),l.flags&=-33);var R=jh(s);qc(s,R,A);break;case 3:case 4:var V=l.stateNode.containerInfo,J=jh(s);ep(s,J,V);break;default:throw Error(i(161))}}catch(te){rt(s,s.return,te)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function fv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;fv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Is(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)rv(s,r.alternate,r),r=r.sibling}function go(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ar(4,r,r.return),go(r);break;case 1:Ki(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&ev(r,r.return,l),go(r);break;case 27:Xl(r.stateNode);case 26:case 5:Ki(r,r.return),go(r);break;case 22:r.memoizedState===null&&go(r);break;case 30:go(r);break;default:go(r)}s=s.sibling}}function ws(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:ws(y,v,l),ql(4,v);break;case 1:if(ws(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){rt(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Hy(V[y],R)}catch(J){rt(c,c.return,J)}}l&&A&64&&j_(v),Gl(v,v.return);break;case 27:iv(v);case 26:case 5:ws(y,v,l),l&&c===null&&A&4&&tv(v),Gl(v,v.return);break;case 12:ws(y,v,l);break;case 31:ws(y,v,l),l&&A&4&&lv(y,v);break;case 13:ws(y,v,l),l&&A&4&&uv(y,v);break;case 22:v.memoizedState===null&&ws(y,v,l),Gl(v,v.return);break;case 30:break;default:ws(y,v,l)}r=r.sibling}}function np(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Rl(l))}function ip(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Rl(s))}function _i(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)dv(s,r,l,c),r=r.sibling}function dv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:_i(s,r,l,c),y&2048&&ql(9,r);break;case 1:_i(s,r,l,c);break;case 3:_i(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Rl(s)));break;case 12:if(y&2048){_i(s,r,l,c),s=r.stateNode;try{var v=r.memoizedProps,A=v.id,R=v.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){rt(r,r.return,V)}}else _i(s,r,l,c);break;case 31:_i(s,r,l,c);break;case 13:_i(s,r,l,c);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?_i(s,r,l,c):Hl(s,r):v._visibility&2?_i(s,r,l,c):(v._visibility|=2,ma(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&np(A,r);break;case 24:_i(s,r,l,c),y&2048&&ip(r.alternate,r);break;default:_i(s,r,l,c)}}function ma(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,A=r,R=l,V=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:ma(v,A,R,V,y),ql(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?ma(v,A,R,V,y):Hl(v,A):(te._visibility|=2,ma(v,A,R,V,y)),y&&J&2048&&np(A.alternate,A);break;case 24:ma(v,A,R,V,y),y&&J&2048&&ip(A.alternate,A);break;default:ma(v,A,R,V,y)}r=r.sibling}}function Hl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Hl(l,c),y&2048&&np(c.alternate,c);break;case 24:Hl(l,c),y&2048&&ip(c.alternate,c);break;default:Hl(l,c)}r=r.sibling}}var Bl=8192;function ga(s,r,l){if(s.subtreeFlags&Bl)for(s=s.child;s!==null;)hv(s,r,l),s=s.sibling}function hv(s,r,l){switch(s.tag){case 26:ga(s,r,l),s.flags&Bl&&s.memoizedState!==null&&qR(l,yi,s.memoizedState,s.memoizedProps);break;case 5:ga(s,r,l);break;case 3:case 4:var c=yi;yi=tf(s.stateNode.containerInfo),ga(s,r,l),yi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Bl,Bl=16777216,ga(s,r,l),Bl=c):ga(s,r,l));break;default:ga(s,r,l)}}function pv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function zl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Qt=c,gv(c,s)}pv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mv(s),s=s.sibling}function mv(s){switch(s.tag){case 0:case 11:case 15:zl(s),s.flags&2048&&ar(9,s,s.return);break;case 3:zl(s);break;case 12:zl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Hc(s)):zl(s);break;default:zl(s)}}function Hc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Qt=c,gv(c,s)}pv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ar(8,r,r.return),Hc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Hc(r));break;default:Hc(r)}s=s.sibling}}function gv(s,r){for(;Qt!==null;){var l=Qt;switch(l.tag){case 0:case 11:case 15:ar(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Rl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Qt=c;else e:for(l=s;Qt!==null;){c=Qt;var y=c.sibling,v=c.return;if(ov(c),c===l){Qt=null;break e}if(y!==null){y.return=v,Qt=y;break e}Qt=v}}}var tR={getCacheForType:function(s){var r=tn(Vt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return tn(Vt).controller.signal}},nR=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,Oe=null,qe=0,st=0,On=null,lr=!1,ya=!1,sp=!1,Rs=0,It=0,ur=0,yo=0,rp=0,Fn=0,_a=0,Yl=null,wn=null,op=!1,Bc=0,yv=0,zc=1/0,Yc=null,cr=null,zt=0,fr=null,va=null,bs=0,ap=0,lp=null,_v=null,Kl=0,up=null;function qn(){return(et&2)!==0&&qe!==0?qe&-qe:Z.T!==null?mp():Ku()}function vv(){if(Fn===0)if((qe&536870912)===0||Ke){var s=ai;ai<<=1,(ai&3932160)===0&&(ai=262144),Fn=s}else Fn=536870912;return s=Un.current,s!==null&&(s.flags|=32),Fn}function Rn(s,r,l){(s===ct&&(st===2||st===9)||s.cancelPendingCommit!==null)&&(Ta(s,0),dr(s,qe,Fn,!1)),zr(s,l),((et&2)===0||s!==ct)&&(s===ct&&((et&2)===0&&(yo|=l),It===4&&dr(s,qe,Fn,!1)),Ji(s))}function Tv(s,r,l){if((et&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||li(s,r),y=c?rR(s,r):fp(s,r,!0),v=c;do{if(y===0){ya&&!c&&dr(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!iR(l)){y=fp(s,r,!1),v=!1;continue}if(y===2){if(v=r,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=s;y=Yl;var V=R.current.memoizedState.isDehydrated;if(V&&(Ta(R,A).flags|=256),A=fp(R,A,!1),A!==2){if(sp&&!V){R.errorRecoveryDisabledLanes|=v,yo|=v,y=4;break e}v=wn,wn=y,v!==null&&(wn===null?wn=v:wn.push.apply(wn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Ta(s,0),dr(s,r,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:dr(c,r,Fn,!lr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Bc+300-Bt(),10<y)){if(dr(c,r,Fn,!lr),xi(c,0,!0)!==0)break e;bs=r,c.timeoutHandle=Wv(Ev.bind(null,c,l,wn,Yc,op,r,Fn,yo,_a,lr,v,"Throttled",-0,0),y);break e}Ev(c,l,wn,Yc,op,r,Fn,yo,_a,lr,v,null,-0,0)}}break}while(!0);Ji(s)}function Ev(s,r,l,c,y,v,A,R,V,J,te,se,$,W){if(s.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},hv(r,v,se);var ge=(v&62914560)===v?Bc-Bt():(v&4194048)===v?yv-Bt():0;if(ge=GR(se,ge),ge!==null){bs=v,s.cancelPendingCommit=ge(xv.bind(null,s,r,v,l,c,y,A,R,V,te,se,null,$,W)),dr(s,v,A,!J);return}}xv(s,r,v,l,c,y,A,R,V)}function iR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!kn(v(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function dr(s,r,l,c){r&=~rp,r&=~yo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var v=31-j(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&Yr(s,l,r)}function Kc(){return(et&6)===0?(Jl(0),!1):!0}function cp(){if(Oe!==null){if(st===0)var s=Oe.return;else s=Oe,ys=ao=null,wh(s),ca=null,xl=0,s=Oe;for(;s!==null;)Z_(s.alternate,s),s=s.return;Oe=null}}function Ta(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,AR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),bs=0,cp(),ct=s,Oe=l=ms(s.current,null),qe=r,st=0,On=null,lr=!1,ya=li(s,r),sp=!1,_a=Fn=rp=yo=ur=It=0,wn=Yl=null,op=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-j(c),v=1<<y;r|=s[y],c&=~v}return Rs=r,hc(),l}function Sv(s,r){Pe=null,Z.H=Ll,r===ua||r===Ec?(r=Oy(),st=3):r===ph?(r=Oy(),st=4):st=r===Hh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,On=r,Oe===null&&(It=1,Vc(s,Qn(r,s.current)))}function Av(){var s=Un.current;return s===null?!0:(qe&4194048)===qe?jn===null:(qe&62914560)===qe||(qe&536870912)!==0?s===jn:!1}function Cv(){var s=Z.H;return Z.H=Ll,s===null?Ll:s}function Iv(){var s=Z.A;return Z.A=tR,s}function Jc(){It=4,lr||(qe&4194048)!==qe&&Un.current!==null||(ya=!0),(ur&134217727)===0&&(yo&134217727)===0||ct===null||dr(ct,qe,Fn,!1)}function fp(s,r,l){var c=et;et|=2;var y=Cv(),v=Iv();(ct!==s||qe!==r)&&(Yc=null,Ta(s,r)),r=!1;var A=It;e:do try{if(st!==0&&Oe!==null){var R=Oe,V=On;switch(st){case 8:cp(),A=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(r=!0);var J=st;if(st=0,On=null,Ea(s,R,V,J),l&&ya){A=0;break e}break;default:J=st,st=0,On=null,Ea(s,R,V,J)}}sR(),A=It;break}catch(te){Sv(s,te)}while(!0);return r&&s.shellSuspendCounter++,ys=ao=null,et=c,Z.H=y,Z.A=v,Oe===null&&(ct=null,qe=0,hc()),A}function sR(){for(;Oe!==null;)wv(Oe)}function rR(s,r){var l=et;et|=2;var c=Cv(),y=Iv();ct!==s||qe!==r?(Yc=null,zc=Bt()+500,Ta(s,r)):ya=li(s,r);e:do try{if(st!==0&&Oe!==null){r=Oe;var v=On;t:switch(st){case 1:st=0,On=null,Ea(s,r,v,1);break;case 2:case 9:if(Uy(v)){st=0,On=null,Rv(r);break}r=function(){st!==2&&st!==9||ct!==s||(st=7),Ji(s)},v.then(r,r);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Uy(v)?(st=0,On=null,Rv(r)):(st=0,On=null,Ea(s,r,v,7));break;case 5:var A=null;switch(Oe.tag){case 26:A=Oe.memoizedState;case 5:case 27:var R=Oe;if(A?dT(A):R.stateNode.complete){st=0,On=null;var V=R.sibling;if(V!==null)Oe=V;else{var J=R.return;J!==null?(Oe=J,$c(J)):Oe=null}break t}}st=0,On=null,Ea(s,r,v,5);break;case 6:st=0,On=null,Ea(s,r,v,6);break;case 8:cp(),It=6;break e;default:throw Error(i(462))}}oR();break}catch(te){Sv(s,te)}while(!0);return ys=ao=null,Z.H=c,Z.A=y,et=l,Oe!==null?0:(ct=null,qe=0,hc(),It)}function oR(){for(;Oe!==null&&!il();)wv(Oe)}function wv(s){var r=X_(s.alternate,s,Rs);s.memoizedProps=s.pendingProps,r===null?$c(s):Oe=r}function Rv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=z_(l,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=z_(l,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:wh(r);default:Z_(l,r),r=Oe=Iy(r,Rs),r=X_(l,r,Rs)}s.memoizedProps=s.pendingProps,r===null?$c(s):Oe=r}function Ea(s,r,l,c){ys=ao=null,wh(r),ca=null,xl=0;var y=r.return;try{if($w(s,y,r,l,qe)){It=1,Vc(s,Qn(l,s.current)),Oe=null;return}}catch(v){if(y!==null)throw Oe=y,v;It=1,Vc(s,Qn(l,s.current)),Oe=null;return}r.flags&32768?(Ke||c===1?s=!0:ya||(qe&536870912)!==0?s=!1:(lr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Un.current,c!==null&&c.tag===13&&(c.flags|=16384))),bv(r,s)):$c(r)}function $c(s){var r=s;do{if((r.flags&32768)!==0){bv(r,lr);return}s=r.return;var l=Ww(r.alternate,r,Rs);if(l!==null){Oe=l;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=s}while(r!==null);It===0&&(It=5)}function bv(s,r){do{var l=Zw(s.alternate,s);if(l!==null){l.flags&=32767,Oe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Oe=s;return}Oe=s=l}while(s!==null);It=6,Oe=null}function xv(s,r,l,c,y,v,A,R,V){s.cancelPendingCommit=null;do Qc();while(zt!==0);if((et&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=jd,zd(s,l,v,A,R,V),s===ct&&(Oe=ct=null,qe=0),va=r,fr=s,bs=l,ap=v,lp=y,_v=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,cR(bi,function(){return kv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,y=ue.p,ue.p=2,A=et,et|=4;try{jw(s,r,l)}finally{et=A,ue.p=y,Z.T=c}}zt=1,Nv(),Mv(),Dv()}}function Nv(){if(zt===1){zt=0;var s=fr,r=va,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=ue.p;ue.p=2;var y=et;et|=4;try{cv(r,s);var v=Ap,A=gy(s.containerInfo),R=v.focusedElem,V=v.selectionRange;if(A!==R&&R&&R.ownerDocument&&my(R.ownerDocument.documentElement,R)){if(V!==null&&$d(R)){var J=V.start,te=V.end;if(te===void 0&&(te=J),"selectionStart"in R)R.selectionStart=J,R.selectionEnd=Math.min(te,R.value.length);else{var se=R.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var W=$.getSelection(),ge=R.textContent.length,Ae=Math.min(V.start,ge),ut=V.end===void 0?Ae:Math.min(V.end,ge);!W.extend&&Ae>ut&&(A=ut,ut=Ae,Ae=A);var B=py(R,Ae),q=py(R,ut);if(B&&q&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==q.node||W.focusOffset!==q.offset)){var K=se.createRange();K.setStart(B.node,B.offset),W.removeAllRanges(),Ae>ut?(W.addRange(K),W.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),W.addRange(K))}}}}for(se=[],W=R;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<se.length;R++){var ne=se[R];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}lf=!!Sp,Ap=Sp=null}finally{et=y,ue.p=c,Z.T=l}}s.current=r,zt=2}}function Mv(){if(zt===2){zt=0;var s=fr,r=va,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=ue.p;ue.p=2;var y=et;et|=4;try{rv(s,r.alternate,r)}finally{et=y,ue.p=c,Z.T=l}}zt=3}}function Dv(){if(zt===4||zt===3){zt=0,Oo();var s=fr,r=va,l=bs,c=_v;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?zt=5:(zt=0,va=fr=null,Pv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(cr=null),fs(l),r=r.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Mn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Z.T,y=ue.p,ue.p=2,Z.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var R=c[A];v(R.value,{componentStack:R.stack})}}finally{Z.T=r,ue.p=y}}(bs&3)!==0&&Qc(),Ji(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===up?Kl++:(Kl=0,up=s):Kl=0,Jl(0)}}function Pv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Rl(r)))}function Qc(){return Nv(),Mv(),Dv(),kv()}function kv(){if(zt!==5)return!1;var s=fr,r=ap;ap=0;var l=fs(bs),c=Z.T,y=ue.p;try{ue.p=32>l?32:l,Z.T=null,l=lp,lp=null;var v=fr,A=bs;if(zt=0,va=fr=null,bs=0,(et&6)!==0)throw Error(i(331));var R=et;if(et|=4,mv(v.current),dv(v,v.current,A,l),et=R,Jl(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Mn,v)}catch{}return!0}finally{ue.p=y,Z.T=c,Pv(s,r)}}function Vv(s,r,l){r=Qn(l,r),r=Gh(s.stateNode,r,2),s=sr(s,r,2),s!==null&&(zr(s,2),Ji(s))}function rt(s,r,l){if(s.tag===3)Vv(s,s,l);else for(;r!==null;){if(r.tag===3){Vv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cr===null||!cr.has(c))){s=Qn(l,s),l=U_(2),c=sr(r,l,2),c!==null&&(L_(l,c,r,s),zr(c,2),Ji(c));break}}r=r.return}}function dp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new nR;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(sp=!0,y.add(l),s=aR.bind(null,s,r,l),r.then(s,s))}function aR(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ct===s&&(qe&l)===l&&(It===4||It===3&&(qe&62914560)===qe&&300>Bt()-Bc?(et&2)===0&&Ta(s,0):rp|=l,_a===qe&&(_a=0)),Ji(s)}function Uv(s,r){r===0&&(r=Yu()),s=so(s,r),s!==null&&(zr(s,r),Ji(s))}function lR(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Uv(s,l)}function uR(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Uv(s,l)}function cR(s,r){return pt(s,r)}var Xc=null,Sa=null,hp=!1,Wc=!1,pp=!1,hr=0;function Ji(s){s!==Sa&&s.next===null&&(Sa===null?Xc=Sa=s:Sa=Sa.next=s),Wc=!0,hp||(hp=!0,dR())}function Jl(s,r){if(!pp&&Wc){pp=!0;do for(var l=!1,c=Xc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-j(42|s)+1)-1,v&=y&~(A&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,qv(c,v))}else v=qe,v=xi(c,c===ct?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||li(c,v)||(l=!0,qv(c,v));c=c.next}while(l);pp=!1}}function fR(){Lv()}function Lv(){Wc=hp=!1;var s=0;hr!==0&&SR()&&(s=hr);for(var r=Bt(),l=null,c=Xc;c!==null;){var y=c.next,v=Ov(c,r);v===0?(c.next=null,l===null?Xc=y:l.next=y,y===null&&(Sa=l)):(l=c,(s!==0||(v&3)!==0)&&(Wc=!0)),c=y}zt!==0&&zt!==5||Jl(s),hr!==0&&(hr=0)}function Ov(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-j(v),R=1<<A,V=y[A];V===-1?((R&l)===0||(R&c)!==0)&&(y[A]=Bd(R,r)):V<=r&&(s.expiredLanes|=R),v&=~R}if(r=ct,l=qe,l=xi(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(st===2||st===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&wi(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||li(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&wi(c),fs(l)){case 2:case 8:l=Ri;break;case 32:l=bi;break;case 268435456:l=qo;break;default:l=bi}return c=Fv.bind(null,s),l=pt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&wi(c),s.callbackPriority=2,s.callbackNode=null,2}function Fv(s,r){if(zt!==0&&zt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Qc()&&s.callbackNode!==l)return null;var c=qe;return c=xi(s,s===ct?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Tv(s,c,r),Ov(s,Bt()),s.callbackNode!=null&&s.callbackNode===l?Fv.bind(null,s):null)}function qv(s,r){if(Qc())return null;Tv(s,r,!0)}function dR(){CR(function(){(et&6)!==0?pt(Gr,fR):Lv()})}function mp(){if(hr===0){var s=aa;s===0&&(s=Kt,Kt<<=1,(Kt&261888)===0&&(Kt=256)),hr=s}return hr}function Gv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ko(""+s)}function Hv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function hR(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var v=Gv((y[Jt]||null).action),A=c.submitter;A&&(r=(r=A[Jt]||null)?Gv(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var R=new qi("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hr!==0){var V=A?Hv(y,A):new FormData(y);Vh(l,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(R.preventDefault(),V=A?Hv(y,A):new FormData(y),Vh(l,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var gp=0;gp<Zd.length;gp++){var yp=Zd[gp],pR=yp.toLowerCase(),mR=yp[0].toUpperCase()+yp.slice(1);gi(pR,"on"+mR)}gi(vy,"onAnimationEnd"),gi(Ty,"onAnimationIteration"),gi(Ey,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(Mw,"onTransitionRun"),gi(Dw,"onTransitionStart"),gi(Pw,"onTransitionCancel"),gi(Sy,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function Bv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],V=R.instance,J=R.currentTarget;if(R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=J;try{v(y)}catch(te){dc(te)}y.currentTarget=null,v=V}else for(A=0;A<c.length;A++){if(R=c[A],V=R.instance,J=R.currentTarget,R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=J;try{v(y)}catch(te){dc(te)}y.currentTarget=null,v=V}}}}function Fe(s,r){var l=r[Go];l===void 0&&(l=r[Go]=new Set);var c=s+"__bubble";l.has(c)||(zv(r,s,2,!1),l.add(c))}function _p(s,r,l){var c=0;r&&(c|=4),zv(l,s,c,r)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function vp(s){if(!s[Zc]){s[Zc]=!0,ol.forEach(function(l){l!=="selectionchange"&&(gR.has(l)||_p(l,!1,s),_p(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Zc]||(r[Zc]=!0,_p("selectionchange",!1,r))}}function zv(s,r,l,c){switch(vT(r)){case 2:var y=zR;break;case 8:y=YR;break;default:y=kp}l=y.bind(null,r,l,s),y=void 0,!Xr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Tp(s,r,l,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Pi(R),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){c=v=A;continue e}R=R.parentNode}}c=c.return}$s(function(){var J=v,te=Yn(l),se=[];e:{var $=Ay.get(s);if($!==void 0){var W=qi,ge=s;switch(s){case"keypress":if(Zr(l)===0)break e;case"keydown":case"keyup":W=uc;break;case"focusin":ge="focus",W=eo;break;case"focusout":ge="blur",W=eo;break;case"beforeblur":case"afterblur":W=eo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=ec;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=E;break;case vy:case Ty:case Ey:W=nc;break;case Sy:W=b;break;case"scroll":case"scrollend":W=_l;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ps;break;case"toggle":case"beforetoggle":W=De}var Ae=(r&4)!==0,ut=!Ae&&(s==="scroll"||s==="scrollend"),B=Ae?$!==null?$+"Capture":null:$;Ae=[];for(var q=J,K;q!==null;){var ne=q;if(K=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||K===null||B===null||(ne=di(q,B),ne!=null&&Ae.push(Ql(q,ne,K))),ut)break;q=q.return}0<Ae.length&&($=new W($,ge,null,l,te),se.push({event:$,listeners:Ae}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",$&&l!==ml&&(ge=l.relatedTarget||l.fromElement)&&(Pi(ge)||ge[Mi]))break e;if((W||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,W?(ge=l.relatedTarget||l.toElement,W=J,ge=ge?Pi(ge):null,ge!==null&&(ut=a(ge),Ae=ge.tag,ge!==ut||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(W=null,ge=J),W!==ge)){if(Ae=vl,ne="onMouseLeave",B="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=ps,ne="onPointerLeave",B="onPointerEnter",q="pointer"),ut=W==null?$:Dn(W),K=ge==null?$:Dn(ge),$=new Ae(ne,q+"leave",W,l,te),$.target=ut,$.relatedTarget=K,ne=null,Pi(te)===J&&(Ae=new Ae(B,q+"enter",ge,l,te),Ae.target=K,Ae.relatedTarget=ut,ne=Ae),ut=ne,W&&ge)t:{for(Ae=yR,B=W,q=ge,K=0,ne=B;ne;ne=Ae(ne))K++;ne=0;for(var Te=q;Te;Te=Ae(Te))ne++;for(;0<K-ne;)B=Ae(B),K--;for(;0<ne-K;)q=Ae(q),ne--;for(;K--;){if(B===q||q!==null&&B===q.alternate){Ae=B;break t}B=Ae(B),q=Ae(q)}Ae=null}else Ae=null;W!==null&&Yv(se,$,W,Ae,!1),ge!==null&&ut!==null&&Yv(se,ut,ge,Ae,!0)}}e:{if($=J?Dn(J):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Qe=ly;else if(oy($))if(uy)Qe=bw;else{Qe=ww;var ye=Iw}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?J&&Yo(J.elementType)&&(Qe=ly):Qe=Rw;if(Qe&&(Qe=Qe(s,J))){ay(se,Qe,l,te);break e}ye&&ye(s,$,J),s==="focusout"&&J&&$.type==="number"&&J.memoizedProps.value!=null&&dl($,"number",$.value)}switch(ye=J?Dn(J):window,s){case"focusin":(oy(ye)||ye.contentEditable==="true")&&(jo=ye,Qd=J,Cl=null);break;case"focusout":Cl=Qd=jo=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,yy(se,l,te);break;case"selectionchange":if(Nw)break;case"keydown":case"keyup":yy(se,l,te)}var ke;if(je)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Zo?to(s,l)&&(Ge="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ge="onCompositionStart");Ge&&(Bi&&l.locale!=="ko"&&(Zo||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Zo&&(ke=yl()):(Fi=te,gl="value"in Fi?Fi.value:Fi.textContent,Zo=!0)),ye=jc(J,Ge),0<ye.length&&(Ge=new Hi(Ge,s,null,l,te),se.push({event:Ge,listeners:ye}),ke?Ge.data=ke:(ke=Wo(l),ke!==null&&(Ge.data=ke)))),(ke=Jn?Ew(s,l):Sw(s,l))&&(Ge=jc(J,"onBeforeInput"),0<Ge.length&&(ye=new Hi("onBeforeInput","beforeinput",null,l,te),se.push({event:ye,listeners:Ge}),ye.data=ke)),hR(se,s,J,l,te)}Bv(se,r)})}function Ql(s,r,l){return{instance:s,listener:r,currentTarget:l}}function jc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=di(s,l),y!=null&&c.unshift(Ql(s,y,v)),y=di(s,r),y!=null&&c.push(Ql(s,y,v))),s.tag===3)return c;s=s.return}return[]}function yR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Yv(s,r,l,c,y){for(var v=r._reactName,A=[];l!==null&&l!==c;){var R=l,V=R.alternate,J=R.stateNode;if(R=R.tag,V!==null&&V===c)break;R!==5&&R!==26&&R!==27||J===null||(V=J,y?(J=di(l,v),J!=null&&A.unshift(Ql(l,J,V))):y||(J=di(l,v),J!=null&&A.push(Ql(l,J,V)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var _R=/\r\n?/g,vR=/\u0000|\uFFFD/g;function Kv(s){return(typeof s=="string"?s:""+s).replace(_R,`
`).replace(vR,"")}function Jv(s,r){return r=Kv(r),Kv(s)===r}function lt(s,r,l,c,y,v){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Sn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Sn(s,""+c);break;case"className":Pn(s,"class",c);break;case"tabIndex":Pn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(s,l,c);break;case"style":pl(s,c,v);break;case"data":if(r!=="object"){Pn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ko(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&lt(s,r,"name",y.name,y,null),lt(s,r,"formEncType",y.formEncType,y,null),lt(s,r,"formMethod",y.formMethod,y,null),lt(s,r,"formTarget",y.formTarget,y,null)):(lt(s,r,"encType",y.encType,y,null),lt(s,r,"method",y.method,y,null),lt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ko(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=fi);break;case"onScroll":c!=null&&Fe("scroll",s);break;case"onScrollEnd":c!=null&&Fe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ko(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Fe("beforetoggle",s),Fe("toggle",s),Bo(s,"popover",c);break;case"xlinkActuate":kt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":kt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":kt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":kt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":kt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":kt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":kt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":kt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":kt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Bo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ju.get(l)||l,Bo(s,l,c))}}function Ep(s,r,l,c,y,v){switch(l){case"style":pl(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Sn(s,c):(typeof c=="number"||typeof c=="bigint")&&Sn(s,""+c);break;case"onScroll":c!=null&&Fe("scroll",s);break;case"onScrollEnd":c!=null&&Fe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!al.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),v=s[Jt]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Bo(s,l,c)}}}function sn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",s),Fe("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:lt(s,r,v,A,l,null)}}y&&lt(s,r,"srcSet",l.srcSet,l,null),c&&lt(s,r,"src",l.src,l,null);return;case"input":Fe("invalid",s);var R=v=A=y=null,V=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":V=te;break;case"defaultChecked":J=te;break;case"value":v=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:lt(s,r,c,te,l,null)}}Xu(s,v,R,V,J,A,y,!1);return;case"select":Fe("invalid",s),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:lt(s,r,y,R,l,null)}r=v,l=A,s.multiple=!!c,r!=null?zs(s,!!c,r,!1):l!=null&&zs(s,!!c,l,!0);return;case"textarea":Fe("invalid",s),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:lt(s,r,A,R,l,null)}Ys(s,c,y,v);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(s,r,V,c,l,null)}return;case"dialog":Fe("beforetoggle",s),Fe("toggle",s),Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":Fe("load",s);break;case"video":case"audio":for(c=0;c<$l.length;c++)Fe($l[c],s);break;case"image":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"embed":case"source":case"link":Fe("error",s),Fe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:lt(s,r,J,c,l,null)}return;default:if(Yo(r)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&Ep(s,r,te,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&lt(s,r,R,c,l,null))}function TR(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,R=null,V=null,J=null,te=null;for(W in l){var se=l[W];if(l.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=se;default:c.hasOwnProperty(W)||lt(s,r,W,null,c,se)}}for(var $ in c){var W=c[$];if(se=l[$],c.hasOwnProperty($)&&(W!=null||se!=null))switch($){case"type":v=W;break;case"name":y=W;break;case"checked":J=W;break;case"defaultChecked":te=W;break;case"value":A=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==se&&lt(s,r,$,W,c,se)}}zo(s,A,R,V,J,te,v,y);return;case"select":W=A=R=$=null;for(v in l)if(V=l[v],l.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":W=V;default:c.hasOwnProperty(v)||lt(s,r,v,null,c,V)}for(y in c)if(v=c[y],V=l[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":$=v;break;case"defaultValue":R=v;break;case"multiple":A=v;default:v!==V&&lt(s,r,y,v,c,V)}r=R,l=A,c=W,$!=null?zs(s,!!l,$,!1):!!c!=!!l&&(r!=null?zs(s,!!l,r,!0):zs(s,!!l,l?[]:"",!1));return;case"textarea":W=$=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:lt(s,r,R,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&lt(s,r,A,y,c,v)}Wu(s,$,W);return;case"option":for(var ge in l)if($=l[ge],l.hasOwnProperty(ge)&&$!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:lt(s,r,ge,null,c,$)}for(V in c)if($=c[V],W=l[V],c.hasOwnProperty(V)&&$!==W&&($!=null||W!=null))switch(V){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:lt(s,r,V,$,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)$=l[Ae],l.hasOwnProperty(Ae)&&$!=null&&!c.hasOwnProperty(Ae)&&lt(s,r,Ae,null,c,$);for(J in c)if($=c[J],W=l[J],c.hasOwnProperty(J)&&$!==W&&($!=null||W!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:lt(s,r,J,$,c,W)}return;default:if(Yo(r)){for(var ut in l)$=l[ut],l.hasOwnProperty(ut)&&$!==void 0&&!c.hasOwnProperty(ut)&&Ep(s,r,ut,void 0,c,$);for(te in c)$=c[te],W=l[te],!c.hasOwnProperty(te)||$===W||$===void 0&&W===void 0||Ep(s,r,te,$,c,W);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!c.hasOwnProperty(B)&&lt(s,r,B,null,c,$);for(se in c)$=c[se],W=l[se],!c.hasOwnProperty(se)||$===W||$==null&&W==null||lt(s,r,se,$,c,W)}function $v(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ER(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,R=y.duration;if(v&&R&&$v(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],J=V.startTime;if(J>R)break;var te=V.transferSize,se=V.initiatorType;te&&$v(se)&&(V=V.responseEnd,A+=te*(V<R?1:(R-J)/(V-J)))}if(--c,r+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Sp=null,Ap=null;function ef(s){return s.nodeType===9?s:s.ownerDocument}function Qv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Cp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ip=null;function SR(){var s=window.event;return s&&s.type==="popstate"?s===Ip?!1:(Ip=s,!0):(Ip=null,!1)}var Wv=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,CR=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(s){return Zv.resolve(null).then(s).catch(IR)}:Wv;function IR(s){setTimeout(function(){throw s})}function pr(s){return s==="head"}function jv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),wa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Xl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Xl(l);for(var v=l.firstChild;v;){var A=v.nextSibling,R=v.nodeName;v[Di]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&Xl(s.ownerDocument.body);l=y}while(l);wa(r)}function eT(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function wp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":wp(l),Ho(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function wR(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Di])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ei(s.nextSibling),s===null)break}return null}function RR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ei(s.nextSibling),s===null))return null;return s}function tT(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=ei(s.nextSibling),s===null))return null;return s}function Rp(s){return s.data==="$?"||s.data==="$~"}function bp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function bR(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ei(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var xp=null;function nT(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return ei(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function iT(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function sT(s,r,l){switch(r=ef(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Xl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ho(s)}var ti=new Map,rT=new Set;function tf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xs=ue.d;ue.d={f:xR,r:NR,D:MR,C:DR,L:PR,m:kR,X:UR,S:VR,M:LR};function xR(){var s=xs.f(),r=Kc();return s||r}function NR(s){var r=zn(s);r!==null&&r.tag===5&&r.type==="form"?S_(r):xs.r(s)}var Aa=typeof document>"u"?null:document;function oT(s,r,l){var c=Aa;if(c&&typeof r=="string"&&r){var y=En(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),rT.has(y)||(rT.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),sn(r,"link",s),Pt(r),c.head.appendChild(r)))}}function MR(s){xs.D(s),oT("dns-prefetch",s,null)}function DR(s,r){xs.C(s,r),oT("preconnect",s,r)}function PR(s,r,l){xs.L(s,r,l);var c=Aa;if(c&&s&&r){var y='link[rel="preload"][as="'+En(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+En(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+En(l.imageSizes)+'"]')):y+='[href="'+En(s)+'"]';var v=y;switch(r){case"style":v=Ca(s);break;case"script":v=Ia(s)}ti.has(v)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),ti.set(v,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Wl(v))||r==="script"&&c.querySelector(Zl(v))||(r=c.createElement("link"),sn(r,"link",s),Pt(r),c.head.appendChild(r)))}}function kR(s,r){xs.m(s,r);var l=Aa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+En(c)+'"][href="'+En(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ia(s)}if(!ti.has(v)&&(s=T({rel:"modulepreload",href:s},r),ti.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Zl(v)))return}c=l.createElement("link"),sn(c,"link",s),Pt(c),l.head.appendChild(c)}}}function VR(s,r,l){xs.S(s,r,l);var c=Aa;if(c&&s){var y=ki(c).hoistableStyles,v=Ca(s);r=r||"default";var A=y.get(v);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Wl(v)))R.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=ti.get(v))&&Np(s,l);var V=A=c.createElement("link");Pt(V),sn(V,"link",s),V._p=new Promise(function(J,te){V.onload=J,V.onerror=te}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,nf(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(v,A)}}}function UR(s,r){xs.X(s,r);var l=Aa;if(l&&s){var c=ki(l).hoistableScripts,y=Ia(s),v=c.get(y);v||(v=l.querySelector(Zl(y)),v||(s=T({src:s,async:!0},r),(r=ti.get(y))&&Mp(s,r),v=l.createElement("script"),Pt(v),sn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function LR(s,r){xs.M(s,r);var l=Aa;if(l&&s){var c=ki(l).hoistableScripts,y=Ia(s),v=c.get(y);v||(v=l.querySelector(Zl(y)),v||(s=T({src:s,async:!0,type:"module"},r),(r=ti.get(y))&&Mp(s,r),v=l.createElement("script"),Pt(v),sn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function aT(s,r,l,c){var y=(y=xe.current)?tf(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ca(l.href),l=ki(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ca(l.href);var v=ki(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(Wl(s)))&&!v._p&&(A.instance=v,A.state.loading=5),ti.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ti.set(s,l),v||OR(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ia(l),l=ki(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ca(s){return'href="'+En(s)+'"'}function Wl(s){return'link[rel="stylesheet"]['+s+"]"}function lT(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function OR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),sn(r,"link",l),Pt(r),s.head.appendChild(r))}function Ia(s){return'[src="'+En(s)+'"]'}function Zl(s){return"script[async]"+s}function uT(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+En(l.href)+'"]');if(c)return r.instance=c,Pt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Pt(c),sn(c,"style",y),nf(c,l.precedence,s),r.instance=c;case"stylesheet":y=Ca(l.href);var v=s.querySelector(Wl(y));if(v)return r.state.loading|=4,r.instance=v,Pt(v),v;c=lT(l),(y=ti.get(y))&&Np(c,y),v=(s.ownerDocument||s).createElement("link"),Pt(v);var A=v;return A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),sn(v,"link",c),r.state.loading|=4,nf(v,l.precedence,s),r.instance=v;case"script":return v=Ia(l.src),(y=s.querySelector(Zl(v)))?(r.instance=y,Pt(y),y):(c=l,(y=ti.get(v))&&(c=T({},l),Mp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Pt(y),sn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,nf(c,l.precedence,s));return r.instance}function nf(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Np(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Mp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var sf=null;function cT(s,r,l){if(sf===null){var c=new Map,y=sf=new Map;y.set(l,c)}else y=sf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[Di]||v[Dt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=s+A;var R=c.get(A);R?R.push(v):c.set(A,[v])}}return c}function fT(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function FR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function dT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function qR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ca(c.href),v=r.querySelector(Wl(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=rf.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,Pt(v);return}v=r.ownerDocument||r,c=lT(c),(y=ti.get(y))&&Np(c,y),v=v.createElement("link"),Pt(v);var A=v;A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),sn(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=rf.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Dp=0;function GR(s,r){return s.stylesheets&&s.count===0&&af(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&af(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&Dp===0&&(Dp=62500*ER());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&af(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Dp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var of=null;function af(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,of=new Map,r.forEach(HR,s),of=null,rf.call(s))}function HR(s,r){if(!(r.state.loading&4)){var l=of.get(s);if(l)var c=l.get(null);else{l=new Map,of.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=rf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var jl={$$typeof:z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function BR(s,r,l,c,y,v,A,R,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function hT(s,r,l,c,y,v,A,R,V,J,te,se){return s=new BR(s,r,l,A,V,J,te,se,R),r=1,v===!0&&(r|=24),v=Vn(3,null,null,r),s.current=v,v.stateNode=s,r=fh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:r},mh(v),s}function pT(s){return s?(s=na,s):na}function mT(s,r,l,c,y,v){y=pT(y),c.context===null?c.context=y:c.pendingContext=y,c=ir(r),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=sr(s,c,r),l!==null&&(Rn(l,s,r),Ml(l,s,r))}function gT(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Pp(s,r){gT(s,r),(s=s.alternate)&&gT(s,r)}function yT(s){if(s.tag===13||s.tag===31){var r=so(s,67108864);r!==null&&Rn(r,s,67108864),Pp(s,67108864)}}function _T(s){if(s.tag===13||s.tag===31){var r=qn();r=Kr(r);var l=so(s,r);l!==null&&Rn(l,s,r),Pp(s,r)}}var lf=!0;function zR(s,r,l,c){var y=Z.T;Z.T=null;var v=ue.p;try{ue.p=2,kp(s,r,l,c)}finally{ue.p=v,Z.T=y}}function YR(s,r,l,c){var y=Z.T;Z.T=null;var v=ue.p;try{ue.p=8,kp(s,r,l,c)}finally{ue.p=v,Z.T=y}}function kp(s,r,l,c){if(lf){var y=Vp(c);if(y===null)Tp(s,r,c,uf,l),TT(s,c);else if(JR(y,s,r,l,c))c.stopPropagation();else if(TT(s,c),r&4&&-1<KR.indexOf(s)){for(;y!==null;){var v=zn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Bn(v.pendingLanes);if(A!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var V=1<<31-j(A);R.entanglements[1]|=V,A&=~V}Ji(v),(et&6)===0&&(zc=Bt()+500,Jl(0))}}break;case 31:case 13:R=so(v,2),R!==null&&Rn(R,v,2),Kc(),Pp(v,2)}if(v=Vp(c),v===null&&Tp(s,r,c,uf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Tp(s,r,c,null,l)}}function Vp(s){return s=Yn(s),Up(s)}var uf=null;function Up(s){if(uf=null,s=Pi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return uf=s,null}function vT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cs()){case Gr:return 2;case Ri:return 8;case bi:case Fo:return 32;case qo:return 268435456;default:return 32}default:return 32}}var Lp=!1,mr=null,gr=null,yr=null,eu=new Map,tu=new Map,_r=[],KR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TT(s,r){switch(s){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":eu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":tu.delete(r.pointerId)}}function nu(s,r,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=zn(r),r!==null&&yT(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function JR(s,r,l,c,y){switch(r){case"focusin":return mr=nu(mr,s,r,l,c,y),!0;case"dragenter":return gr=nu(gr,s,r,l,c,y),!0;case"mouseover":return yr=nu(yr,s,r,l,c,y),!0;case"pointerover":var v=y.pointerId;return eu.set(v,nu(eu.get(v)||null,s,r,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,tu.set(v,nu(tu.get(v)||null,s,r,l,c,y)),!0}return!1}function ET(s){var r=Pi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ui(s.priority,function(){_T(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,ui(s.priority,function(){_T(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function cf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Vp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);ml=c,l.target.dispatchEvent(c),ml=null}else return r=zn(l),r!==null&&yT(r),s.blockedOn=l,!1;r.shift()}return!0}function ST(s,r,l){cf(s)&&l.delete(r)}function $R(){Lp=!1,mr!==null&&cf(mr)&&(mr=null),gr!==null&&cf(gr)&&(gr=null),yr!==null&&cf(yr)&&(yr=null),eu.forEach(ST),tu.forEach(ST)}function ff(s,r){s.blockedOn===r&&(s.blockedOn=null,Lp||(Lp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$R)))}var df=null;function AT(s){df!==s&&(df=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){df===s&&(df=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Up(c||l)===null)continue;break}var v=zn(l);v!==null&&(s.splice(r,3),r-=3,Vh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function wa(s){function r(V){return ff(V,s)}mr!==null&&ff(mr,s),gr!==null&&ff(gr,s),yr!==null&&ff(yr,s),eu.forEach(r),tu.forEach(r);for(var l=0;l<_r.length;l++){var c=_r[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<_r.length&&(l=_r[0],l.blockedOn===null);)ET(l),l.blockedOn===null&&_r.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Jt]||null;if(typeof v=="function")A||AT(l);else if(A){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Jt]||null)R=A.formAction;else if(Up(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),AT(l)}}}function CT(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Op(s){this._internalRoot=s}hf.prototype.render=Op.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=qn();mT(l,c,s,r,null,null)},hf.prototype.unmount=Op.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;mT(s.current,2,null,s,null,null),Kc(),r[Mi]=null}};function hf(s){this._internalRoot=s}hf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ku();s={blockedOn:null,target:s,priority:r};for(var l=0;l<_r.length&&r!==0&&r<_r[l].priority;l++);_r.splice(l,0,s),l===0&&ET(s)}};var IT=e.version;if(IT!=="19.2.3")throw Error(i(527,IT,"19.2.3"));ue.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var QR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pf.isDisabled&&pf.supportsFiber)try{Mn=pf.inject(QR),Mt=pf}catch{}}return su.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=D_,v=P_,A=k_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=hT(s,1,!1,null,null,l,c,null,y,v,A,CT),s[Mi]=r.current,vp(s),new Op(r)},su.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",v=D_,A=P_,R=k_,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),r=hT(s,1,!0,r,l??null,c,y,V,v,A,R,CT),r.context=pT(null),l=r.current,c=qn(),c=Kr(c),y=ir(c),y.callback=null,sr(l,y,c),l=c,r.current.lanes=l,zr(r,l),Ji(r),s[Mi]=r.current,vp(s),new hf(r)},su.version="19.2.3",su}var VT;function rb(){if(VT)return Gp.exports;VT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gp.exports=sb(),Gp.exports}var ob=rb();const ab=jS(ob),lb=({children:n})=>w.jsx("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden max-w-[480px] mx-auto bg-white dark:bg-slate-900 shadow-sm sm:my-4 sm:rounded-xl sm:border sm:border-slate-100 dark:sm:border-slate-800",children:n});var Le=(n=>(n.LOGIN="LOGIN",n.REGISTER="REGISTER",n.DASHBOARD="DASHBOARD",n.SOCIAL="SOCIAL",n.CHAT="CHAT",n.PROFILE="PROFILE",n.CONTACT_DETAIL="CONTACT_DETAIL",n.HISTORY="HISTORY",n))(Le||{});const pu=({label:n,icon:e,showToggle:t,onToggle:i,isToggled:o,...a})=>w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("label",{className:"text-[#111418] dark:text-slate-200 text-sm font-medium leading-normal ml-1",children:n}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#111418] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/20 border border-[#dbe0e6] dark:border-slate-700 bg-white dark:bg-slate-800 focus:border-primary h-12 placeholder:text-[#939ba6] dark:placeholder:text-slate-500 px-[15px] text-base font-normal leading-normal transition-all",...a}),(e||t)&&w.jsx("div",{className:"absolute right-3 top-0 h-full flex items-center text-slate-400",children:t?w.jsx("button",{type:"button",onClick:i,className:"hover:text-slate-600 dark:hover:text-slate-300",children:w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px"},children:o?"visibility":"visibility_off"})}):w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px"},children:e})})]})]}),Yp=({onLogin:n,onGoogleLogin:e,onNavigateRegister:t})=>{const[i,o]=Ee.useState(""),[a,u]=Ee.useState(""),[d,p]=Ee.useState(!1),h=_=>{_.preventDefault(),i&&a&&n(i,a)};return w.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center p-4 pb-2 justify-between bg-white dark:bg-slate-900 sticky top-0 z-10",children:[w.jsx("div",{className:"text-[#111418] dark:text-white flex size-12 shrink-0 items-center justify-start cursor-pointer transition-opacity hover:opacity-70",children:w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"24px"},children:"arrow_back"})}),w.jsx("h2",{className:"text-[#111418] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-12",children:" / "})]}),w.jsxs("div",{className:"flex flex-col items-center px-4 pt-4 pb-2",children:[w.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-slate-800 dark:to-slate-700 flex items-center justify-center mb-4 shadow-sm",children:w.jsx("span",{className:"material-symbols-outlined text-primary",style:{fontSize:"40px"},children:"hub"})}),w.jsx("h1",{className:"text-[#111418] dark:text-white tracking-tight text-[28px] font-bold leading-tight text-center",children:""}),w.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-base font-normal leading-normal pt-2 text-center max-w-xs",children:[" AI ",w.jsx("br",{}),""]})]}),w.jsxs("form",{onSubmit:h,className:"flex flex-col gap-4 px-6 py-6 w-full",children:[w.jsx(pu,{label:"",placeholder:"name@example.com",type:"email",value:i,onChange:_=>o(_.target.value),icon:"mail",required:!0}),w.jsx(pu,{label:"",placeholder:"",type:d?"text":"password",value:a,onChange:_=>u(_.target.value),showToggle:!0,isToggled:d,onToggle:()=>p(!d),required:!0}),w.jsx("div",{className:"flex justify-end",children:w.jsx("a",{className:"text-primary text-sm font-medium hover:underline cursor-pointer",children:""})}),w.jsx("button",{type:"submit",className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 px-5 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] w-full shadow-md shadow-primary/20 hover:bg-primary/90 transition-colors mt-2",children:""}),w.jsx("div",{className:"flex justify-center mt-2",children:w.jsxs("button",{type:"button",className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-primary dark:hover:text-primary transition-colors text-sm font-medium",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px"},children:"face"})," Face ID "]})})]}),w.jsxs("div",{className:"flex flex-col px-6 pb-6 w-full",children:[w.jsxs("div",{className:"relative py-4 flex items-center w-full",children:[w.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),w.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs font-medium uppercase tracking-wider",children:""}),w.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]}),w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsxs("button",{className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-black dark:bg-white text-white dark:text-black text-base font-bold leading-normal tracking-[0.015em] w-full hover:opacity-80 transition-opacity",children:[w.jsx("span",{className:"mr-2 flex items-center",children:w.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-.98-.4-2.12-.45-3.03.35-1.12.95-2.28.93-3.23-.3C5.7 18.15 4 14.7 6.45 10.5c1.1-1.8 2.95-2.4 4.4-2.2 1.25.15 2.2.8 2.9.8.7 0 1.95-.9 3.25-.8 1.45.1 2.5.8 3.2 1.85-2.8 1.4-2.35 5.5.55 6.75-.4 1.15-.95 2.25-1.7 3.38zM13 6.3c-.25 2.05-1.95 3.5-3.6 3.4-.4-1.95 1.55-3.8 3.6-3.4z"})})})," Apple "]}),w.jsxs("button",{type:"button",onClick:e,className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-[#111418] dark:text-white text-base font-medium leading-normal tracking-[0.015em] w-full hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[w.jsx("span",{className:"mr-2 flex items-center",children:w.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[w.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),w.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),w.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),w.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})})," Google "]})]})]}),w.jsx("div",{className:"flex items-center justify-center pb-8 pt-2",children:w.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:[" ",w.jsx("a",{onClick:t,className:"text-primary font-bold hover:underline cursor-pointer ml-1",children:""})]})}),w.jsx("div",{className:"px-6 pb-6 text-center",children:w.jsxs("p",{className:"text-slate-400 dark:text-slate-600 text-xs leading-relaxed",children:["",w.jsx("br",{}),w.jsx("a",{className:"underline hover:text-slate-500 cursor-pointer",children:""}),"  ",w.jsx("a",{className:"underline hover:text-slate-500 cursor-pointer",children:""})]})})]})},ub=({onRegister:n,onNavigateLogin:e})=>{const[t,i]=Ee.useState(""),[o,a]=Ee.useState(""),[u,d]=Ee.useState(""),p=h=>{h.preventDefault(),t&&o&&u&&n(t,u,o)};return w.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center p-4 pb-2 justify-between bg-white dark:bg-slate-900 sticky top-0 z-10",children:[w.jsx("div",{onClick:e,className:"text-[#111418] dark:text-white flex size-12 shrink-0 items-center justify-start cursor-pointer transition-opacity hover:opacity-70",children:w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"24px"},children:"arrow_back"})}),w.jsx("h2",{className:"text-[#111418] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-12",children:""})]}),w.jsxs("div",{className:"flex flex-col items-center px-4 pt-6 pb-2",children:[w.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:w.jsx("span",{className:"material-symbols-outlined text-primary",style:{fontSize:"32px"},children:"person_add"})}),w.jsx("h1",{className:"text-[#111418] dark:text-white tracking-tight text-2xl font-bold text-center",children:" NetworkAI"}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-2 text-center max-w-xs",children:" AI "})]}),w.jsxs("form",{onSubmit:p,className:"flex flex-col gap-4 px-6 py-6 w-full",children:[w.jsx(pu,{label:"",placeholder:"",value:o,onChange:h=>a(h.target.value),required:!0}),w.jsx(pu,{label:"",placeholder:"name@example.com",type:"email",value:t,onChange:h=>i(h.target.value),icon:"mail",required:!0}),w.jsx(pu,{label:"",placeholder:" 8 ",type:"password",value:u,onChange:h=>d(h.target.value),required:!0}),w.jsx("button",{type:"submit",className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 px-5 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] w-full shadow-md shadow-primary/20 hover:bg-primary/90 transition-colors mt-4",children:""})]}),w.jsx("div",{className:"flex items-center justify-center pb-8 pt-2 mt-auto",children:w.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:[" ",w.jsx("a",{onClick:e,className:"text-primary font-bold hover:underline cursor-pointer ml-1",children:""})]})})]})},cb=()=>{};var UT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},fb=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},tA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,_=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,I=h&63;p||(I=64,u||(S=64)),i.push(t[_],t[T],t[S],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||T==null)throw new db;const S=a<<2|d>>4;if(i.push(S),h!==64){const I=d<<4&240|h>>2;if(i.push(I),T!==64){const k=h<<6&192|T;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class db extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hb=function(n){const e=eA(n);return tA.encodeByteArray(e,!0)},qf=function(n){return hb(n).replace(/\./g,"")},nA=function(n){try{return tA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=()=>pb().__FIREBASE_DEFAULTS__,gb=()=>{if(typeof process>"u"||typeof UT>"u")return;const n=UT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nA(n[1]);return e&&JSON.parse(e)},fd=()=>{try{return cb()||mb()||gb()||yb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iA=n=>{var e,t;return(t=(e=fd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},sA=n=>{const e=iA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},rA=()=>{var n;return(n=fd())==null?void 0:n.config},oA=n=>{var e;return(e=fd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qf(JSON.stringify(t)),qf(JSON.stringify(u)),""].join(".")}const mu={};function vb(){const n={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?n.emulator.push(e):n.prod.push(e);return n}function Tb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let LT=!1;function tg(n,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||mu[n]===e||mu[n]||LT)return;mu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=vb().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{LT=!0,u()},S}function _(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Tb(i),I=t("text"),k=document.getElementById(I)||document.createElement("span"),F=t("learnmore"),P=document.getElementById(F)||document.createElement("a"),O=t("preprendIcon"),Q=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const z=S.element;d(z),_(P,F);const ee=h();p(Q,O),z.append(Q,k,P,ee),document.body.appendChild(z)}a?(k.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Eb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function Sb(){var e;const n=(e=fd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ab(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Cb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ib(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wb(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Rb(){return!Sb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bb(){try{return typeof indexedDB=="object"}catch{return!1}}function xb(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="FirebaseError";class ss extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Nb,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?Mb(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ss(o,d,i)}}function Mb(n,e){return n.replace(Db,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Db=/\{\$([^}]+)}/g;function Pb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Io(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(OT(a)&&OT(u)){if(!Io(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function OT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function au(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function lu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kb(n,e){const t=new Vb(n,e);return t.subscribe.bind(t)}class Vb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Ub(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Kp),o.error===void 0&&(o.error=Kp),o.complete===void 0&&(o.complete=Kp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ub(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n){return n&&n._delegate?n._delegate:n}class xr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new _b;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fb(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ob(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ob(n){return n===_o?void 0:n}function Fb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Lb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const Gb={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Hb=He.INFO,Bb={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},zb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=Bb[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=Hb,this._logHandler=zb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const Yb=(n,e)=>e.some(t=>n instanceof t);let FT,qT;function Kb(){return FT||(FT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jb(){return qT||(qT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,um=new WeakMap,uA=new WeakMap,Jp=new WeakMap,ig=new WeakMap;function $b(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ir(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&lA.set(t,n)}).catch(()=>{}),ig.set(e,n),e}function Qb(n){if(um.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});um.set(n,e)}let cm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return um.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ir(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xb(n){cm=n(cm)}function Wb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call($p(this),e,...t);return uA.set(i,e.sort?e.sort():[e]),Ir(i)}:Jb().includes(n)?function(...e){return n.apply($p(this),e),Ir(lA.get(this))}:function(...e){return Ir(n.apply($p(this),e))}}function Zb(n){return typeof n=="function"?Wb(n):(n instanceof IDBTransaction&&Qb(n),Yb(n,Kb())?new Proxy(n,cm):n)}function Ir(n){if(n instanceof IDBRequest)return $b(n);if(Jp.has(n))return Jp.get(n);const e=Zb(n);return e!==n&&(Jp.set(n,e),ig.set(e,n)),e}const $p=n=>ig.get(n);function jb(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ir(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Ir(u.result),p.oldVersion,p.newVersion,Ir(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const ex=["get","getKey","getAll","getAllKeys","count"],tx=["put","add","delete","clear"],Qp=new Map;function GT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=tx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ex.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&p.done]))[0]};return Qp.set(e,a),a}Xb(n=>({...n,get:(e,t,i)=>GT(e,t)||n.get(e,t,i),has:(e,t)=>!!GT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ix(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function ix(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fm="@firebase/app",HT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new ng("@firebase/app"),sx="@firebase/app-compat",rx="@firebase/analytics-compat",ox="@firebase/analytics",ax="@firebase/app-check-compat",lx="@firebase/app-check",ux="@firebase/auth",cx="@firebase/auth-compat",fx="@firebase/database",dx="@firebase/data-connect",hx="@firebase/database-compat",px="@firebase/functions",mx="@firebase/functions-compat",gx="@firebase/installations",yx="@firebase/installations-compat",_x="@firebase/messaging",vx="@firebase/messaging-compat",Tx="@firebase/performance",Ex="@firebase/performance-compat",Sx="@firebase/remote-config",Ax="@firebase/remote-config-compat",Cx="@firebase/storage",Ix="@firebase/storage-compat",wx="@firebase/firestore",Rx="@firebase/ai",bx="@firebase/firestore-compat",xx="firebase",Nx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="[DEFAULT]",Mx={[fm]:"fire-core",[sx]:"fire-core-compat",[ox]:"fire-analytics",[rx]:"fire-analytics-compat",[lx]:"fire-app-check",[ax]:"fire-app-check-compat",[ux]:"fire-auth",[cx]:"fire-auth-compat",[fx]:"fire-rtdb",[dx]:"fire-data-connect",[hx]:"fire-rtdb-compat",[px]:"fire-fn",[mx]:"fire-fn-compat",[gx]:"fire-iid",[yx]:"fire-iid-compat",[_x]:"fire-fcm",[vx]:"fire-fcm-compat",[Tx]:"fire-perf",[Ex]:"fire-perf-compat",[Sx]:"fire-rc",[Ax]:"fire-rc-compat",[Cx]:"fire-gcs",[Ix]:"fire-gcs-compat",[wx]:"fire-fst",[bx]:"fire-fst-compat",[Rx]:"fire-vertex","fire-js":"fire-js",[xx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Map,Dx=new Map,hm=new Map;function BT(n,e){try{n.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wo(n){const e=n.name;if(hm.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;hm.set(e,n);for(const t of Eu.values())BT(t,n);for(const t of Dx.values())BT(t,n);return!0}function dd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Pu("app","Firebase",Px);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=Nx;function cA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:dm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw wr.create("bad-app-name",{appName:String(o)});if(t||(t=rA()),!t)throw wr.create("no-options");const a=Eu.get(o);if(a){if(Io(t,a.options)&&Io(i,a.config))return a;throw wr.create("duplicate-app",{appName:o})}const u=new qb(o);for(const p of hm.values())u.addComponent(p);const d=new kx(t,i,u);return Eu.set(o,d),d}function hd(n=dm){const e=Eu.get(n);if(!e&&n===dm&&rA())return cA();if(!e)throw wr.create("no-app",{appName:n});return e}function Vx(){return Array.from(Eu.values())}function Qi(n,e,t){let i=Mx[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(u.join(" "));return}wo(new xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebase-heartbeat-database",Lx=1,Su="firebase-heartbeat-store";let Xp=null;function fA(){return Xp||(Xp=jb(Ux,Lx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Su)}catch(t){console.warn(t)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),Xp}async function Ox(n){try{const t=(await fA()).transaction(Su),i=await t.objectStore(Su).get(dA(n));return await t.done,i}catch(e){if(e instanceof ss)ks.warn(e.message);else{const t=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(t.message)}}}async function zT(n,e){try{const i=(await fA()).transaction(Su,"readwrite");await i.objectStore(Su).put(e,dA(n)),await i.done}catch(t){if(t instanceof ss)ks.warn(t.message);else{const i=wr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ks.warn(i.message)}}}function dA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=1024,qx=30;class Gx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=YT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>qx){const u=zx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ks.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=YT(),{heartbeatsToSend:i,unsentEntries:o}=Hx(this._heartbeatsCache.heartbeats),a=qf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ks.warn(t),""}}}function YT(){return new Date().toISOString().substring(0,10)}function Hx(n,e=Fx){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),KT(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),KT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Bx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bb()?xb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ox(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return zT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return zT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function KT(n){return qf(JSON.stringify({version:2,heartbeats:n})).length}function zx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n){wo(new xr("platform-logger",e=>new nx(e),"PRIVATE")),wo(new xr("heartbeat",e=>new Gx(e),"PRIVATE")),Qi(fm,HT,n),Qi(fm,HT,"esm2020"),Qi("fire-js","")}Yx("");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,hA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function x(){}x.prototype=M.prototype,N.F=M.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(U,L,H){for(var D=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)D[Ve-2]=arguments[Ve];return M.prototype[L].apply(U,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,M,x){x||(x=0);const U=Array(16);if(typeof M=="string")for(var L=0;L<16;++L)U[L]=M.charCodeAt(x++)|M.charCodeAt(x++)<<8|M.charCodeAt(x++)<<16|M.charCodeAt(x++)<<24;else for(L=0;L<16;++L)U[L]=M[x++]|M[x++]<<8|M[x++]<<16|M[x++]<<24;M=N.g[0],x=N.g[1],L=N.g[2];let H=N.g[3],D;D=M+(H^x&(L^H))+U[0]+3614090360&4294967295,M=x+(D<<7&4294967295|D>>>25),D=H+(L^M&(x^L))+U[1]+3905402710&4294967295,H=M+(D<<12&4294967295|D>>>20),D=L+(x^H&(M^x))+U[2]+606105819&4294967295,L=H+(D<<17&4294967295|D>>>15),D=x+(M^L&(H^M))+U[3]+3250441966&4294967295,x=L+(D<<22&4294967295|D>>>10),D=M+(H^x&(L^H))+U[4]+4118548399&4294967295,M=x+(D<<7&4294967295|D>>>25),D=H+(L^M&(x^L))+U[5]+1200080426&4294967295,H=M+(D<<12&4294967295|D>>>20),D=L+(x^H&(M^x))+U[6]+2821735955&4294967295,L=H+(D<<17&4294967295|D>>>15),D=x+(M^L&(H^M))+U[7]+4249261313&4294967295,x=L+(D<<22&4294967295|D>>>10),D=M+(H^x&(L^H))+U[8]+1770035416&4294967295,M=x+(D<<7&4294967295|D>>>25),D=H+(L^M&(x^L))+U[9]+2336552879&4294967295,H=M+(D<<12&4294967295|D>>>20),D=L+(x^H&(M^x))+U[10]+4294925233&4294967295,L=H+(D<<17&4294967295|D>>>15),D=x+(M^L&(H^M))+U[11]+2304563134&4294967295,x=L+(D<<22&4294967295|D>>>10),D=M+(H^x&(L^H))+U[12]+1804603682&4294967295,M=x+(D<<7&4294967295|D>>>25),D=H+(L^M&(x^L))+U[13]+4254626195&4294967295,H=M+(D<<12&4294967295|D>>>20),D=L+(x^H&(M^x))+U[14]+2792965006&4294967295,L=H+(D<<17&4294967295|D>>>15),D=x+(M^L&(H^M))+U[15]+1236535329&4294967295,x=L+(D<<22&4294967295|D>>>10),D=M+(L^H&(x^L))+U[1]+4129170786&4294967295,M=x+(D<<5&4294967295|D>>>27),D=H+(x^L&(M^x))+U[6]+3225465664&4294967295,H=M+(D<<9&4294967295|D>>>23),D=L+(M^x&(H^M))+U[11]+643717713&4294967295,L=H+(D<<14&4294967295|D>>>18),D=x+(H^M&(L^H))+U[0]+3921069994&4294967295,x=L+(D<<20&4294967295|D>>>12),D=M+(L^H&(x^L))+U[5]+3593408605&4294967295,M=x+(D<<5&4294967295|D>>>27),D=H+(x^L&(M^x))+U[10]+38016083&4294967295,H=M+(D<<9&4294967295|D>>>23),D=L+(M^x&(H^M))+U[15]+3634488961&4294967295,L=H+(D<<14&4294967295|D>>>18),D=x+(H^M&(L^H))+U[4]+3889429448&4294967295,x=L+(D<<20&4294967295|D>>>12),D=M+(L^H&(x^L))+U[9]+568446438&4294967295,M=x+(D<<5&4294967295|D>>>27),D=H+(x^L&(M^x))+U[14]+3275163606&4294967295,H=M+(D<<9&4294967295|D>>>23),D=L+(M^x&(H^M))+U[3]+4107603335&4294967295,L=H+(D<<14&4294967295|D>>>18),D=x+(H^M&(L^H))+U[8]+1163531501&4294967295,x=L+(D<<20&4294967295|D>>>12),D=M+(L^H&(x^L))+U[13]+2850285829&4294967295,M=x+(D<<5&4294967295|D>>>27),D=H+(x^L&(M^x))+U[2]+4243563512&4294967295,H=M+(D<<9&4294967295|D>>>23),D=L+(M^x&(H^M))+U[7]+1735328473&4294967295,L=H+(D<<14&4294967295|D>>>18),D=x+(H^M&(L^H))+U[12]+2368359562&4294967295,x=L+(D<<20&4294967295|D>>>12),D=M+(x^L^H)+U[5]+4294588738&4294967295,M=x+(D<<4&4294967295|D>>>28),D=H+(M^x^L)+U[8]+2272392833&4294967295,H=M+(D<<11&4294967295|D>>>21),D=L+(H^M^x)+U[11]+1839030562&4294967295,L=H+(D<<16&4294967295|D>>>16),D=x+(L^H^M)+U[14]+4259657740&4294967295,x=L+(D<<23&4294967295|D>>>9),D=M+(x^L^H)+U[1]+2763975236&4294967295,M=x+(D<<4&4294967295|D>>>28),D=H+(M^x^L)+U[4]+1272893353&4294967295,H=M+(D<<11&4294967295|D>>>21),D=L+(H^M^x)+U[7]+4139469664&4294967295,L=H+(D<<16&4294967295|D>>>16),D=x+(L^H^M)+U[10]+3200236656&4294967295,x=L+(D<<23&4294967295|D>>>9),D=M+(x^L^H)+U[13]+681279174&4294967295,M=x+(D<<4&4294967295|D>>>28),D=H+(M^x^L)+U[0]+3936430074&4294967295,H=M+(D<<11&4294967295|D>>>21),D=L+(H^M^x)+U[3]+3572445317&4294967295,L=H+(D<<16&4294967295|D>>>16),D=x+(L^H^M)+U[6]+76029189&4294967295,x=L+(D<<23&4294967295|D>>>9),D=M+(x^L^H)+U[9]+3654602809&4294967295,M=x+(D<<4&4294967295|D>>>28),D=H+(M^x^L)+U[12]+3873151461&4294967295,H=M+(D<<11&4294967295|D>>>21),D=L+(H^M^x)+U[15]+530742520&4294967295,L=H+(D<<16&4294967295|D>>>16),D=x+(L^H^M)+U[2]+3299628645&4294967295,x=L+(D<<23&4294967295|D>>>9),D=M+(L^(x|~H))+U[0]+4096336452&4294967295,M=x+(D<<6&4294967295|D>>>26),D=H+(x^(M|~L))+U[7]+1126891415&4294967295,H=M+(D<<10&4294967295|D>>>22),D=L+(M^(H|~x))+U[14]+2878612391&4294967295,L=H+(D<<15&4294967295|D>>>17),D=x+(H^(L|~M))+U[5]+4237533241&4294967295,x=L+(D<<21&4294967295|D>>>11),D=M+(L^(x|~H))+U[12]+1700485571&4294967295,M=x+(D<<6&4294967295|D>>>26),D=H+(x^(M|~L))+U[3]+2399980690&4294967295,H=M+(D<<10&4294967295|D>>>22),D=L+(M^(H|~x))+U[10]+4293915773&4294967295,L=H+(D<<15&4294967295|D>>>17),D=x+(H^(L|~M))+U[1]+2240044497&4294967295,x=L+(D<<21&4294967295|D>>>11),D=M+(L^(x|~H))+U[8]+1873313359&4294967295,M=x+(D<<6&4294967295|D>>>26),D=H+(x^(M|~L))+U[15]+4264355552&4294967295,H=M+(D<<10&4294967295|D>>>22),D=L+(M^(H|~x))+U[6]+2734768916&4294967295,L=H+(D<<15&4294967295|D>>>17),D=x+(H^(L|~M))+U[13]+1309151649&4294967295,x=L+(D<<21&4294967295|D>>>11),D=M+(L^(x|~H))+U[4]+4149444226&4294967295,M=x+(D<<6&4294967295|D>>>26),D=H+(x^(M|~L))+U[11]+3174756917&4294967295,H=M+(D<<10&4294967295|D>>>22),D=L+(M^(H|~x))+U[2]+718787259&4294967295,L=H+(D<<15&4294967295|D>>>17),D=x+(H^(L|~M))+U[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+L&4294967295,N.g[3]=N.g[3]+H&4294967295}i.prototype.v=function(N,M){M===void 0&&(M=N.length);const x=M-this.blockSize,U=this.C;let L=this.h,H=0;for(;H<M;){if(L==0)for(;H<=x;)o(this,N,H),H+=this.blockSize;if(typeof N=="string"){for(;H<M;)if(U[L++]=N.charCodeAt(H++),L==this.blockSize){o(this,U),L=0;break}}else for(;H<M;)if(U[L++]=N[H++],L==this.blockSize){o(this,U),L=0;break}}this.h=L,this.o+=M},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,x=0;x<4;++x)for(let U=0;U<32;U+=8)N[M++]=this.g[x]>>>U&255;return N};function a(N,M){var x=d;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=M(N)}function u(N,M){this.h=M;const x=[];let U=!0;for(let L=N.length-1;L>=0;L--){const H=N[L]|0;U&&H==M||(x[L]=H,U=!1)}this.g=x}var d={};function p(N){return-128<=N&&N<128?a(N,function(M){return new u([M|0],M<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return P(h(-N));const M=[];let x=1;for(let U=0;N>=x;U++)M[U]=N/x|0,x*=4294967296;return new u(M,0)}function _(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return P(_(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(M,8));let U=T;for(let H=0;H<N.length;H+=8){var L=Math.min(8,N.length-H);const D=parseInt(N.substring(H,H+L),M);L<8?(L=h(Math.pow(M,L)),U=U.j(L).add(h(D))):(U=U.j(x),U=U.add(h(D)))}return U}var T=p(0),S=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-P(this).m();let N=0,M=1;for(let x=0;x<this.g.length;x++){const U=this.i(x);N+=(U>=0?U:4294967296+U)*M,M*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(F(this))return"-"+P(this).toString(N);const M=h(Math.pow(N,6));var x=this;let U="";for(;;){const L=ee(x,M).g;x=O(x,L.j(M));let H=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=L,k(x))return H+U;for(;H.length<6;)H="0"+H;U=H+U}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function F(N){return N.h==-1}n.l=function(N){return N=O(this,N),F(N)?-1:k(N)?0:1};function P(N){const M=N.g.length,x=[];for(let U=0;U<M;U++)x[U]=~N.g[U];return new u(x,~N.h).add(S)}n.abs=function(){return F(this)?P(this):this},n.add=function(N){const M=Math.max(this.g.length,N.g.length),x=[];let U=0;for(let L=0;L<=M;L++){let H=U+(this.i(L)&65535)+(N.i(L)&65535),D=(H>>>16)+(this.i(L)>>>16)+(N.i(L)>>>16);U=D>>>16,H&=65535,D&=65535,x[L]=D<<16|H}return new u(x,x[x.length-1]&-2147483648?-1:0)};function O(N,M){return N.add(P(M))}n.j=function(N){if(k(this)||k(N))return T;if(F(this))return F(N)?P(this).j(P(N)):P(P(this).j(N));if(F(N))return P(this.j(P(N)));if(this.l(I)<0&&N.l(I)<0)return h(this.m()*N.m());const M=this.g.length+N.g.length,x=[];for(var U=0;U<2*M;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(let L=0;L<N.g.length;L++){const H=this.i(U)>>>16,D=this.i(U)&65535,Ve=N.i(L)>>>16,ft=N.i(L)&65535;x[2*U+2*L]+=D*ft,Q(x,2*U+2*L),x[2*U+2*L+1]+=H*ft,Q(x,2*U+2*L+1),x[2*U+2*L+1]+=D*Ve,Q(x,2*U+2*L+1),x[2*U+2*L+2]+=H*Ve,Q(x,2*U+2*L+2)}for(N=0;N<M;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=M;N<2*M;N++)x[N]=0;return new u(x,0)};function Q(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function z(N,M){this.g=N,this.h=M}function ee(N,M){if(k(M))throw Error("division by zero");if(k(N))return new z(T,T);if(F(N))return M=ee(P(N),M),new z(P(M.g),P(M.h));if(F(M))return M=ee(N,P(M)),new z(P(M.g),M.h);if(N.g.length>30){if(F(N)||F(M))throw Error("slowDivide_ only works with positive integers.");for(var x=S,U=M;U.l(N)<=0;)x=le(x),U=le(U);var L=ae(x,1),H=ae(U,1);for(U=ae(U,2),x=ae(x,2);!k(U);){var D=H.add(U);D.l(N)<=0&&(L=L.add(x),H=D),U=ae(U,1),x=ae(x,1)}return M=O(N,L.j(M)),new z(L,M)}for(L=T;N.l(M)>=0;){for(x=Math.max(1,Math.floor(N.m()/M.m())),U=Math.ceil(Math.log(x)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),H=h(x),D=H.j(M);F(D)||D.l(N)>0;)x-=U,H=h(x),D=H.j(M);k(H)&&(H=S),L=L.add(H),N=O(N,D)}return new z(L,N)}n.B=function(N){return ee(this,N).h},n.and=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let U=0;U<M;U++)x[U]=this.i(U)&N.i(U);return new u(x,this.h&N.h)},n.or=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let U=0;U<M;U++)x[U]=this.i(U)|N.i(U);return new u(x,this.h|N.h)},n.xor=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let U=0;U<M;U++)x[U]=this.i(U)^N.i(U);return new u(x,this.h^N.h)};function le(N){const M=N.g.length+1,x=[];for(let U=0;U<M;U++)x[U]=N.i(U)<<1|N.i(U-1)>>>31;return new u(x,N.h)}function ae(N,M){const x=M>>5;M%=32;const U=N.g.length-x,L=[];for(let H=0;H<U;H++)L[H]=M>0?N.i(H+x)>>>M|N.i(H+x+1)<<32-M:N.i(H+x);return new u(L,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,hA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Rr=u}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pA,uu,mA,bf,pm,gA,yA,_A;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var E=0;E<g.length;++E){var C=g[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,E){if(E)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var Y=g[b];if(!(Y in C))break e;C=C[Y]}g=g[g.length-1],b=C[g],E=E(b),E!=b&&E!=null&&e(C,g,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(E){var C=[],b;for(b in E)Object.prototype.hasOwnProperty.call(E,b)&&C.push([b,E[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function p(g,E,C){return g.call.apply(g.bind,arguments)}function h(g,E,C){return h=p,h.apply(null,arguments)}function _(g,E){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function T(g,E){function C(){}C.prototype=E.prototype,g.Z=E.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,Y,X){for(var ce=Array(arguments.length-2),De=2;De<arguments.length;De++)ce[De-2]=arguments[De];return E.prototype[Y].apply(b,ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const E=g.length;if(E>0){const C=Array(E);for(let b=0;b<E;b++)C[b]=g[b];return C}return[]}function k(g,E){for(let b=1;b<arguments.length;b++){const Y=arguments[b];var C=typeof Y;if(C=C!="object"?C:Y?Array.isArray(Y)?"array":C:"null",C=="array"||C=="object"&&typeof Y.length=="number"){C=g.length||0;const X=Y.length||0;g.length=C+X;for(let ce=0;ce<X;ce++)g[C+ce]=Y[ce]}else g.push(Y)}}class F{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function P(g){u.setTimeout(()=>{throw g},0)}function O(){var g=N;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class Q{constructor(){this.h=this.g=null}add(E,C){const b=z.get();b.set(E,C),this.h?this.h.next=b:this.g=b,this.h=b}}var z=new F(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ae=!1,N=new Q,M=()=>{const g=Promise.resolve(void 0);le=()=>{g.then(x)}};function x(){for(var g;g=O();){try{g.h.call(g.g)}catch(C){P(C)}var E=z;E.j(g),E.h<100&&(E.h++,g.next=E.g,E.g=g)}ae=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return g})();function D(g){return/^[\s\xa0]*$/.test(g)}function Ve(g,E){L.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,E)}T(Ve,L),Ve.prototype.init=function(g,E){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget,E||(C=="mouseover"?E=g.fromElement:C=="mouseout"&&(E=g.toElement)),this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ue(g,E,C,b,Y){this.listener=g,this.proxy=null,this.src=E,this.type=C,this.capture=!!b,this.ha=Y,this.key=++Z,this.da=this.fa=!1}function ve(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ye(g,E,C){for(const b in g)E.call(C,g[b],b,g)}function $e(g,E){for(const C in g)E.call(void 0,g[C],C,g)}function G(g){const E={};for(const C in g)E[C]=g[C];return E}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(g,E){let C,b;for(let Y=1;Y<arguments.length;Y++){b=arguments[Y];for(C in b)g[C]=b[C];for(let X=0;X<ie.length;X++)C=ie[X],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function pe(g){this.src=g,this.g={},this.h=0}pe.prototype.add=function(g,E,C,b,Y){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const ce=xe(g,E,b,Y);return ce>-1?(E=g[ce],C||(E.fa=!1)):(E=new ue(E,this.src,X,!!b,Y),E.fa=C,g.push(E)),E};function we(g,E){const C=E.type;if(C in g.g){var b=g.g[C],Y=Array.prototype.indexOf.call(b,E,void 0),X;(X=Y>=0)&&Array.prototype.splice.call(b,Y,1),X&&(ve(E),g.g[C].length==0&&(delete g.g[C],g.h--))}}function xe(g,E,C,b){for(let Y=0;Y<g.length;++Y){const X=g[Y];if(!X.da&&X.listener==E&&X.capture==!!C&&X.ha==b)return Y}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Et={};function tt(g,E,C,b,Y){if(Array.isArray(E)){for(let X=0;X<E.length;X++)tt(g,E[X],C,b,Y);return null}return C=Zt(C),g&&g[ft]?g.J(E,C,d(b)?!!b.capture:!1,Y):oi(g,E,C,!1,b,Y)}function oi(g,E,C,b,Y,X){if(!E)throw Error("Invalid event type");const ce=d(Y)?!!Y.capture:!!Y;let De=ls(g);if(De||(g[Ue]=De=new pe(g)),C=De.add(E,C,b,ce,X),C.proxy)return C;if(b=os(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)H||(Y=ce),Y===void 0&&(Y=!1),g.addEventListener(E.toString(),b,Y);else if(g.attachEvent)g.attachEvent(_n(E.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function os(){function g(C){return E.call(g.src,g.listener,C)}const E=Hs;return g}function as(g,E,C,b,Y){if(Array.isArray(E))for(var X=0;X<E.length;X++)as(g,E[X],C,b,Y);else b=d(b)?!!b.capture:!!b,C=Zt(C),g&&g[ft]?(g=g.i,X=String(E).toString(),X in g.g&&(E=g.g[X],C=xe(E,C,b,Y),C>-1&&(ve(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete g.g[X],g.h--)))):g&&(g=ls(g))&&(E=g.g[E.toString()],g=-1,E&&(g=xe(E,C,b,Y)),(C=g>-1?E[g]:null)&&Hn(C))}function Hn(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[ft])we(E.i,g);else{var C=g.type,b=g.proxy;E.removeEventListener?E.removeEventListener(C,b,g.capture):E.detachEvent?E.detachEvent(_n(C),b):E.addListener&&E.removeListener&&E.removeListener(b),(C=ls(E))?(we(C,g),C.h==0&&(C.src=null,E[Ue]=null)):ve(g)}}}function _n(g){return g in Et?Et[g]:Et[g]="on"+g}function Hs(g,E){if(g.da)g=!0;else{E=new Ve(E,this);const C=g.listener,b=g.ha||g.src;g.fa&&Hn(g),g=C.call(b,E)}return g}function ls(g){return g=g[Ue],g instanceof pe?g:null}var us="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zt(g){return typeof g=="function"?g:(g[us]||(g[us]=function(E){return g.handleEvent(E)}),g[us])}function dt(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}T(dt,U),dt.prototype[ft]=!0,dt.prototype.removeEventListener=function(g,E,C,b){as(this,g,E,C,b)};function pt(g,E){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=E.type||E,typeof E=="string")E=new L(E,g);else if(E instanceof L)E.target=E.target||g;else{var Y=E;E=new L(b,g),fe(E,Y)}Y=!0;let X,ce;if(C)for(ce=C.length-1;ce>=0;ce--)X=E.g=C[ce],Y=wi(X,b,!0,E)&&Y;if(X=E.g=g,Y=wi(X,b,!0,E)&&Y,Y=wi(X,b,!1,E)&&Y,C)for(ce=0;ce<C.length;ce++)X=E.g=C[ce],Y=wi(X,b,!1,E)&&Y}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var g=this.i;for(const E in g.g){const C=g.g[E];for(let b=0;b<C.length;b++)ve(C[b]);delete g.g[E],g.h--}}this.G=null},dt.prototype.J=function(g,E,C,b){return this.i.add(String(g),E,!1,C,b)},dt.prototype.K=function(g,E,C,b){return this.i.add(String(g),E,!0,C,b)};function wi(g,E,C,b){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let X=0;X<E.length;++X){const ce=E[X];if(ce&&!ce.da&&ce.capture==C){const De=ce.listener,wt=ce.ha||ce.src;ce.fa&&we(g.i,ce),Y=De.call(wt,b)!==!1&&Y}}return Y&&!b.defaultPrevented}function il(g,E){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(g,E||0)}function Oo(g){g.g=il(()=>{g.g=null,g.i&&(g.i=!1,Oo(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class Bt extends U{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Oo(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(g){U.call(this),this.h=g,this.g={}}T(cs,U);var Gr=[];function Ri(g){Ye(g.g,function(E,C){this.g.hasOwnProperty(C)&&Hn(E)},g),g.g={}}cs.prototype.N=function(){cs.Z.N.call(this),Ri(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=u.JSON.stringify,Fo=u.JSON.parse,qo=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Hr(){}function Br(){}var Mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){L.call(this,"d")}T(Mt,L);function vn(){L.call(this,"c")}T(vn,L);var j={},_e=null;function Ze(){return _e=_e||new dt}j.Ia="serverreachability";function Tn(g){L.call(this,j.Ia,g)}T(Tn,L);function Kt(g){const E=Ze();pt(E,new Tn(E))}j.STAT_EVENT="statevent";function ai(g,E){L.call(this,j.STAT_EVENT,g),this.stat=E}T(ai,L);function At(g){const E=Ze();pt(E,new ai(E,g))}j.Ja="timingevent";function Bn(g,E){L.call(this,j.Ja,g),this.size=E}T(Bn,L);function xi(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},E)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function Bd(g,E,C,b,Y,X){g.info(function(){if(g.g)if(X){var ce="",De=X.split("&");for(let je=0;je<De.length;je++){var wt=De[je].split("=");if(wt.length>1){const _t=wt[0];wt=wt[1];const Jn=_t.split("_");ce=Jn.length>=2&&Jn[1]=="type"?ce+(_t+"="+wt+"&"):ce+(_t+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+b+") [attempt "+Y+"]: "+E+`
`+C+`
`+ce})}function Yu(g,E,C,b,Y,X,ce){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+Y+"]: "+E+`
`+C+`
`+X+" "+ce})}function Ni(g,E,C,b){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+zd(g,C)+(b?" "+b:"")})}function zr(g,E){g.info(function(){return"TIMEOUT: "+E})}li.prototype.info=function(){};function zd(g,E){if(!g.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var C=X[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var Y=b[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ce=1;ce<b.length;ce++)b[ce]=""}}}}return bi(X)}catch{return E}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rl;function Kr(){}T(Kr,Hr),Kr.prototype.g=function(){return new XMLHttpRequest},rl=new Kr;function fs(g){return encodeURIComponent(String(g))}function Ku(g){var E=1;g=g.split(":");const C=[];for(;E>0&&g.length;)C.push(g.shift()),E--;return g.length&&C.push(g.join(":")),C}function ui(g,E,C,b){this.j=g,this.i=E,this.l=C,this.S=b||1,this.V=new cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Dt={},Jt={};function Mi(g,E,C){g.M=1,g.A=Jr(kt(E)),g.u=C,g.R=!0,Go(g,null)}function Go(g,E){g.F=Date.now(),Di(g),g.B=kt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Yo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ci,g.g=ac(g.j,C?E:null,!g.u),g.P>0&&(g.O=new Bt(h(g.Y,g,g.g),g.P)),E=g.V,C=g.g,b=g.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Gr[0]=Y.toString()),Y=Gr);for(let X=0;X<Y.length;X++){const ce=tt(C,Y[X],b||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=g.J?G(g.J):{},g.u?(g.v||(g.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,E)):(g.v="GET",g.g.ea(g.B,g.v,null,E)),Kt(),Bd(g.i,g.v,g.B,g.l,g.S,g.u)}ui.prototype.ba=function(g){g=g.target;const E=this.O;E&&hi(g)==3?E.j():this.Y(g)},ui.prototype.Y=function(g){try{if(g==this.g)e:{const De=hi(this.g),wt=this.g.ya(),je=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||jt(this.g)))){this.K||De!=4||wt==7||(wt==8||je<=0?Kt(3):Kt(2)),Pi(this);var E=this.g.ca();this.X=E;var C=Yd(this);if(this.o=E==200,Yu(this.i,this.v,this.B,this.l,this.S,De,E),this.o){if(this.U&&!this.L){t:{if(this.g){var b,Y=this.g;if((b=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(b)){var X=b;break t}}X=null}if(g=X)Ni(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ki(this,g);else{this.o=!1,this.m=3,At(12),Dn(this),zn(this);break e}}if(this.R){g=!0;let _t;for(;!this.K&&this.C<C.length;)if(_t=$u(this,C),_t==Jt){De==4&&(this.m=4,At(14),g=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Dt){this.m=4,At(15),Ni(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ni(this.i,this.l,_t,null),ki(this,_t);if(Ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,At(16),g=!1),this.o=this.o&&g,!g)Ni(this.i,this.l,C,"[Invalid Chunked Response]"),Dn(this),zn(this);else if(C.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Tl(ce),ce.P=!0,At(11))}}else Ni(this.i,this.l,C,null),ki(this,C);De==4&&Dn(this),this.o&&!this.K&&(De==4?ic(this.j,this):(this.o=!1,Di(this)))}else hs(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Dn(this),zn(this)}}}catch{}finally{}};function Yd(g){if(!Ju(g))return g.g.la();const E=jt(g.g);if(E==="")return"";let C="";const b=E.length,Y=hi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Dn(g),zn(g),"";g.h.i=new u.TextDecoder}for(let X=0;X<b;X++)g.h.h=!0,C+=g.h.i.decode(E[X],{stream:!(Y&&X==b-1)});return E.length=0,g.h.g+=C,g.C=0,g.h.g}function Ju(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function $u(g,E){var C=g.C,b=E.indexOf(`
`,C);return b==-1?Jt:(C=Number(E.substring(C,b)),isNaN(C)?Dt:(b+=1,b+C>E.length?Jt:(E=E.slice(b,b+C),g.C=b+C,E)))}ui.prototype.cancel=function(){this.K=!0,Dn(this)};function Di(g){g.T=Date.now()+g.H,Ho(g,g.H)}function Ho(g,E){if(g.D!=null)throw Error("WatchDog timer not null");g.D=xi(h(g.aa,g),E)}function Pi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ui.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(zr(this.i,this.B),this.M!=2&&(Kt(),At(17)),Dn(this),this.m=2,zn(this)):Ho(this,this.T-g)};function zn(g){g.j.I==0||g.K||ic(g.j,g)}function Dn(g){Pi(g);var E=g.O;E&&typeof E.dispose=="function"&&E.dispose(),g.O=null,Ri(g.V),g.g&&(E=g.g,g.g=null,E.abort(),E.dispose())}function ki(g,E){try{var C=g.j;if(C.I!=0&&(C.g==g||Ui(C.h,g))){if(!g.L&&Ui(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var Y=b;if(Y[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Xo(C),Xs(C);else break e;eo(C),At(18)}}else C.xa=Y[1],0<C.xa-C.K&&Y[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=xi(h(C.Va,C),6e3));Vi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Hi(C,11)}else if((g.L||C.g==g)&&Xo(C),!D(E))for(Y=C.Ba.g.parse(E),E=0;E<Y.length;E++){let je=Y[E];const _t=je[0];if(!(_t<=C.K))if(C.K=_t,je=je[1],C.I==2)if(je[0]=="c"){C.M=je[1],C.ba=je[2];const Jn=je[3];Jn!=null&&(C.ka=Jn,C.j.info("VER="+C.ka));const Bi=je[4];Bi!=null&&(C.za=Bi,C.j.info("SVER="+C.za));const pi=je[5];pi!=null&&typeof pi=="number"&&pi>0&&(b=1.5*pi,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const mi=g.g;if(mi){const to=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var X=b.h;X.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ll(X,X.h),X.h=null))}if(b.G){const Wo=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(b.wa=Wo,it(b.J,b.G,Wo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ce=g;if(b.na=oc(b,b.L?b.ba:null,b.W),ce.L){ul(b.h,ce);var De=ce,wt=b.O;wt&&(De.H=wt),De.D&&(Pi(De),Di(De)),b.g=ce}else tc(b);C.i.length>0&&Gi(C)}else je[0]!="stop"&&je[0]!="close"||Hi(C,7);else C.I==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Hi(C,7):_l(C):je[0]!="noop"&&C.l&&C.l.qa(je),C.A=0)}}Kt(4)}catch{}}var Pt=class{constructor(g,E){this.g=g,this.map=E}};function ol(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function al(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Vi(g){return g.h?1:g.g?g.g.size:0}function Ui(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function ll(g,E){g.g?g.g.add(E):g.h=E}function ul(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}ol.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function cl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const C of g.g.values())E=E.concat(C.G);return E}return I(g.i)}var Qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bo(g,E){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let Y,X=null;b>=0?(Y=g[C].substring(0,b),X=g[C].substring(b+1)):Y=g[C],E(Y,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Pn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;g instanceof Pn?(this.l=g.l,$t(this,g.j),this.o=g.o,this.g=g.g,Bs(this,g.u),this.h=g.h,fl(this,ju(g.i)),this.m=g.m):g&&(E=String(g).match(Qu))?(this.l=!1,$t(this,E[1]||"",!0),this.o=Li(E[2]||""),this.g=Li(E[3]||"",!0),Bs(this,E[4]),this.h=Li(E[5]||"",!0),fl(this,E[6]||"",!0),this.m=Li(E[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}Pn.prototype.toString=function(){const g=[];var E=this.j;E&&g.push($r(E,zo,!0),":");var C=this.g;return(C||E=="file")&&(g.push("//"),(E=this.o)&&g.push($r(E,zo,!0),"@"),g.push(fs(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push($r(C,C.charAt(0)=="/"?dl:Xu,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",$r(C,Wu)),g.join("")},Pn.prototype.resolve=function(g){const E=kt(this);let C=!!g.j;C?$t(E,g.j):C=!!g.o,C?E.o=g.o:C=!!g.g,C?E.g=g.g:C=g.u!=null;var b=g.h;if(C)Bs(E,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(b=E.h.slice(0,Y+1)+b)}if(Y=b,Y==".."||Y==".")b="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){b=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const X=[];for(let ce=0;ce<Y.length;){const De=Y[ce++];De=="."?b&&ce==Y.length&&X.push(""):De==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&ce==Y.length&&X.push("")):(X.push(De),b=!0)}b=X.join("/")}else b=Y}return C?E.h=b:C=g.i.toString()!=="",C?fl(E,ju(g.i)):C=!!g.m,C&&(E.m=g.m),E};function kt(g){return new Pn(g)}function $t(g,E,C){g.j=C?Li(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function Bs(g,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);g.u=E}else g.u=null}function fl(g,E,C){E instanceof Ys?(g.i=E,Ko(g.i,g.l)):(C||(E=$r(E,zs)),g.i=new Ys(E,g.l))}function it(g,E,C){g.i.set(E,C)}function Jr(g){return it(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Li(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function $r(g,E,C){return typeof g=="string"?(g=encodeURI(g).replace(E,En),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function En(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var zo=/[#\/\?@]/g,Xu=/[#\?:]/g,dl=/[#\?]/g,zs=/[#\?@]/g,Wu=/#/g;function Ys(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function Sn(g){g.g||(g.g=new Map,g.h=0,g.i&&Bo(g.i,function(E,C){g.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Ys.prototype,n.add=function(g,E){Sn(this),this.i=null,g=Ks(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(E),this.h+=1,this};function Zu(g,E){Sn(g),E=Ks(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function hl(g,E){return Sn(g),E=Ks(g,E),g.g.has(E)}n.forEach=function(g,E){Sn(this),this.g.forEach(function(C,b){C.forEach(function(Y){g.call(E,Y,b,this)},this)},this)};function pl(g,E){Sn(g);let C=[];if(typeof E=="string")hl(g,E)&&(C=C.concat(g.g.get(Ks(g,E))));else for(g=Array.from(g.g.values()),E=0;E<g.length;E++)C=C.concat(g[E]);return C}n.set=function(g,E){return Sn(this),this.i=null,g=Ks(this,g),hl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g?(g=pl(this,g),g.length>0?String(g[0]):E):E};function Yo(g,E,C){Zu(g,E),C.length>0&&(g.i=null,g.g.set(Ks(g,E),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(let b=0;b<E.length;b++){var C=E[b];const Y=fs(C);C=pl(this,C);for(let X=0;X<C.length;X++){let ce=Y;C[X]!==""&&(ce+="="+fs(C[X])),g.push(ce)}}return this.i=g.join("&")};function ju(g){const E=new Ys;return E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),E}function Ks(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Ko(g,E){E&&!g.j&&(Sn(g),g.i=null,g.g.forEach(function(C,b){const Y=b.toLowerCase();b!=Y&&(Zu(this,b),Yo(this,Y,C))},g)),g.j=E}function fi(g,E){const C=new li;if(u.Image){const b=new Image;b.onload=_(Yn,C,"TestLoadImage: loaded",!0,E,b),b.onerror=_(Yn,C,"TestLoadImage: error",!1,E,b),b.onabort=_(Yn,C,"TestLoadImage: abort",!1,E,b),b.ontimeout=_(Yn,C,"TestLoadImage: timeout",!1,E,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else E(!1)}function ml(g,E){const C=new li,b=new AbortController,Y=setTimeout(()=>{b.abort(),Yn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:b.signal}).then(X=>{clearTimeout(Y),X.ok?Yn(C,"TestPingServer: ok",!0,E):Yn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Yn(C,"TestPingServer: error",!1,E)})}function Yn(g,E,C,b,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),b(C)}catch{}}function Js(){this.g=new qo}function Oi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Oi,Hr),Oi.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(g,E){dt.call(this),this.H=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Qr,dt),n=Qr.prototype,n.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=E,this.readyState=1,di(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(E.body=g),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?$s(this):di(this),this.readyState==3&&Jo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,$s(this))},n.Na=function(g){this.g&&(this.response=g,$s(this))},n.ga=function(){this.g&&$s(this)};function $s(g){g.readyState=4,g.l=null,g.j=null,g.B=null,di(g)}n.setRequestHeader=function(g,E){this.A.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=E.next();return g.join(`\r
`)};function di(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Kn(g){let E="";return Ye(g,function(C,b){E+=b,E+=":",E+=C,E+=`\r
`}),E}function Xr(g,E,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Kn(C),typeof g=="string"?C!=null&&fs(C):it(g,E,C))}function ot(g){dt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ot,dt);var Fi=/^https?$/i,gl=["POST","PUT"];n=ot.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,E,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rl.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(X){Wr(this,X);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var Y in b)C.set(Y,b[Y]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())C.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),Y=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(gl,E,void 0)>=0)||b||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of C)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){Wr(this,X)}};function Wr(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.o=5,yl(g),ds(g)}function yl(g){g.A||(g.A=!0,pt(g,"complete"),pt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,pt(this,"complete"),pt(this,"abort"),ds(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zr(this):this.Xa())},n.Xa=function(){Zr(this)};function Zr(g){if(g.h&&typeof a<"u"){if(g.v&&hi(g)==4)setTimeout(g.Ca.bind(g),0);else if(pt(g,"readystatechange"),hi(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var b;if(b=X===0){let ce=String(g.D).match(Qu)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),b=!Fi.test(ce?ce.toLowerCase():"")}C=b}if(C)pt(g,"complete"),pt(g,"success");else{g.o=6;try{var Y=hi(g)>2?g.g.statusText:""}catch{Y=""}g.l=Y+" ["+g.ca()+"]",yl(g)}}finally{ds(g)}}}}function ds(g,E){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,E||pt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function hi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),Fo(E)}};function jt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function hs(g){const E={};g=(g.g&&hi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(D(g[b]))continue;var C=Ku(g[b]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=E[Y]||[];E[Y]=X,X.push(C)}$e(E,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(g,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||E}function Qs(g){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qi("baseRetryDelayMs",5e3,g),this.Za=qi("retryDelaySeedMs",1e4,g),this.Ta=qi("forwardChannelMaxRetries",2,g),this.va=qi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(g&&g.concurrentRequestLimit),this.Ba=new Js,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qs.prototype,n.ka=8,n.I=1,n.connect=function(g,E,C,b){At(0),this.W=g,this.H=E||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=oc(this,null,this.W),Gi(this)};function _l(g){if($o(g),g.I==3){var E=g.V++,C=kt(g.J);if(it(C,"SID",g.M),it(C,"RID",E),it(C,"TYPE","terminate"),jr(g,C),E=new ui(g,g.j,E),E.M=2,E.A=Jr(kt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=ac(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Di(E)}rc(g)}function Xs(g){g.g&&(Tl(g),g.g.cancel(),g.g=null)}function $o(g){Xs(g),g.v&&(u.clearTimeout(g.v),g.v=null),Xo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Gi(g){if(!al(g.h)&&!g.m){g.m=!0;var E=g.Ea;le||M(),ae||(le(),ae=!0),N.add(E,g),g.D=0}}function Qo(g,E){return Vi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=E.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=xi(h(g.Ea,g,E),sc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Y=new ui(this,this.j,g);let X=this.o;if(this.U&&(X?(X=G(X),fe(X,this.U)):X=this.U),this.u!==null||this.R||(Y.J=X,X=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=ec(this,Y,E),C=kt(this.J),it(C,"RID",g),it(C,"CVER",22),this.G&&it(C,"X-HTTP-Session-Id",this.G),jr(this,C),X&&(this.R?E="headers="+fs(Kn(X))+"&"+E:this.u&&Xr(C,this.u,X)),ll(this.h,Y),this.Ra&&it(C,"TYPE","init"),this.S?(it(C,"$req",E),it(C,"SID","null"),Y.U=!0,Mi(Y,C,null)):Mi(Y,C,E),this.I=2}}else this.I==3&&(g?vl(this,g):this.i.length==0||al(this.h)||vl(this))};function vl(g,E){var C;E?C=E.l:C=g.V++;const b=kt(g.J);it(b,"SID",g.M),it(b,"RID",C),it(b,"AID",g.K),jr(g,b),g.u&&g.o&&Xr(b,g.u,g.o),C=new ui(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),E&&(g.i=E.G.concat(g.i)),E=ec(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),ll(g.h,C),Mi(C,b,E)}function jr(g,E){g.H&&Ye(g.H,function(C,b){it(E,b,C)}),g.l&&Ye({},function(C,b){it(E,b,C)})}function ec(g,E,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var Y=g.i;let De=-1;for(;;){const wt=["count="+C];De==-1?C>0?(De=Y[0].g,wt.push("ofs="+De)):De=0:wt.push("ofs="+De);let je=!0;for(let _t=0;_t<C;_t++){var X=Y[_t].g;const Jn=Y[_t].map;if(X-=De,X<0)De=Math.max(0,Y[_t].g-100),je=!1;else try{X="req"+X+"_"||"";try{var ce=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Bi,pi]of ce){let mi=pi;d(pi)&&(mi=bi(pi)),wt.push(X+Bi+"="+encodeURIComponent(mi))}}catch(Bi){throw wt.push(X+"type="+encodeURIComponent("_badmap")),Bi}}catch{b&&b(Jn)}}if(je){ce=wt.join("&");break e}}ce=void 0}return g=g.i.splice(0,C),E.G=g,ce}function tc(g){if(!g.g&&!g.v){g.Y=1;var E=g.Da;le||M(),ae||(le(),ae=!0),N.add(E,g),g.A=0}}function eo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=xi(h(g.Da,g),sc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,nc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=xi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Xs(this),nc(this))};function Tl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function nc(g){g.g=new ui(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var E=kt(g.na);it(E,"RID","rpc"),it(E,"SID",g.M),it(E,"AID",g.K),it(E,"CI",g.F?"0":"1"),!g.F&&g.ia&&it(E,"TO",g.ia),it(E,"TYPE","xmlhttp"),jr(g,E),g.u&&g.o&&Xr(E,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Jr(kt(E)),C.u=null,C.R=!0,Go(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Xs(this),eo(this),At(19))};function Xo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function ic(g,E){var C=null;if(g.g==E){Xo(g),Tl(g),g.g=null;var b=2}else if(Ui(g.h,E))C=E.G,ul(g.h,E),b=1;else return;if(g.I!=0){if(E.o)if(b==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var Y=g.D;b=Ze(),pt(b,new Bn(b,C)),Gi(g)}else tc(g);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(b==1&&Qo(g,E)||b==2&&eo(g)))switch(C&&C.length>0&&(E=g.h,E.i=E.i.concat(C)),Y){case 1:Hi(g,5);break;case 4:Hi(g,10);break;case 3:Hi(g,6);break;default:Hi(g,2)}}}function sc(g,E){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*E}function Hi(g,E){if(g.j.info("Error code "+E),E==2){var C=h(g.bb,g),b=g.Ua;const Y=!b;b=new Pn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||$t(b,"https"),Jr(b),Y?fi(b.toString(),C):ml(b.toString(),C)}else At(2);g.I=0,g.l&&g.l.pa(E),rc(g),$o(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function rc(g){if(g.I=0,g.ja=[],g.l){const E=cl(g.h);(E.length!=0||g.i.length!=0)&&(k(g.ja,E),k(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function oc(g,E,C){var b=C instanceof Pn?kt(C):new Pn(C);if(b.g!="")E&&(b.g=E+"."+b.g),Bs(b,b.u);else{var Y=u.location;b=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const X=new Pn(null);b&&$t(X,b),E&&(X.g=E),Y&&Bs(X,Y),C&&(X.h=C),b=X}return C=g.G,E=g.wa,C&&E&&it(b,C,E),it(b,"VER",g.ka),jr(g,b),b}function ac(g,E,C){if(E&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Aa&&!g.ma?new ot(new Oi({ab:C})):new ot(g.ma),E.Fa(g.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lc(){}n=lc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ws(){}Ws.prototype.g=function(g,E){return new pn(g,E)};function pn(g,E){dt.call(this),this.g=new Qs(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(g?g["X-WebChannel-Client-Profile"]=E.sa:g={"X-WebChannel-Client-Profile":E.sa}),this.g.U=g,(g=E&&E.Qb)&&!D(g)&&(this.g.u=g),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new ps(this)}T(pn,dt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){_l(this.g)},pn.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=bi(g),g=C);E.i.push(new Pt(E.Ya++,g)),E.I==3&&Gi(E)},pn.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,pn.Z.N.call(this)};function uc(g){Mt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const C in E){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}T(uc,Mt);function cc(){vn.call(this),this.status=1}T(cc,vn);function ps(g){this.g=g}T(ps,lc),ps.prototype.ra=function(){pt(this.g,"a")},ps.prototype.qa=function(g){pt(this.g,new uc(g))},ps.prototype.pa=function(g){pt(this.g,new cc)},ps.prototype.oa=function(){pt(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,_A=function(){return new Ws},yA=function(){return Ze()},gA=j,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,bf=Yr,sl.COMPLETE="complete",mA=sl,Br.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",dt.prototype.listen=dt.prototype.J,uu=Br,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,pA=ot}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});const $T="@firebase/firestore",QT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new ng("@firebase/firestore");function Ra(){return Ro.logLevel}function me(n,...e){if(Ro.logLevel<=He.DEBUG){const t=e.map(sg);Ro.debug(`Firestore (${$a}): ${n}`,...t)}}function Vs(n,...e){if(Ro.logLevel<=He.ERROR){const t=e.map(sg);Ro.error(`Firestore (${$a}): ${n}`,...t)}}function Ga(n,...e){if(Ro.logLevel<=He.WARN){const t=e.map(sg);Ro.warn(`Firestore (${$a}): ${n}`,...t)}}function sg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,vA(n,i,t)}function vA(n,e,t){let i=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vs(i),new Error(i)}function nt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||vA(e,o,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class Jx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $x{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new So;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new So,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new So)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new TA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class Qx{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xx{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Qx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class XT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new XT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new XT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=Zx(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function mm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return Wp(o)===Wp(a)?Be(o,a):Wp(o)?1:-1}return Be(n.length,e.length)}const jx=55296,eN=57343;function Wp(n){const e=n.charCodeAt(0);return e>=jx&&e<=eN}function Ha(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="__name__";class $i{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return $i.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $i?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=$i.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Be(e.length,t.length)}static compareSegments(e,t){const i=$i.isNumericId(e),o=$i.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?$i.extractNumericId(e).compare($i.extractNumericId(t)):mm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class ht extends $i{construct(e,t,i){return new ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const tN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends $i{construct(e,t,i){return new on(e,t,i)}static isValidIdentifier(e){return tN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WT}static keyField(){return new on([WT])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new he(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new he(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ht.fromString(e))}static fromName(e){return new Se(ht.fromString(e).popFirst(5))}static empty(){return new Se(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n,e,t){if(!t)throw new he(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nN(n,e,t,i){if(e===!0&&i===!0)throw new he(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZT(n){if(!Se.isDocumentKey(n))throw new he(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jT(n){if(Se.isDocumentKey(n))throw new he(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Ao(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pd(n);throw new he(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vu(n,e){if(!SA(n))throw new he(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new he(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=-62135596800,t0=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*t0);return new yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<e0)throw new he(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-e0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Gt("string",yt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new yt(0,0))}static max(){return new be(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;function iN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new yt(t+1,0):new yt(t,i));return new Nr(o,Se.empty(),e)}function sN(n){return new Nr(n.readTime,n.key,Au)}class Nr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Nr(be.min(),Se.empty(),Au)}static max(){return new Nr(be.max(),Se.empty(),Au)}}function rN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==oN)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((o=>o?oe.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new oe(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function lN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}md.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function gd(n){return n==null}function Gf(n){return n===0&&1/n==-1/0}function uN(n){return typeof n=="number"&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="";function cN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=n0(e)),e=fN(n.get(t),e);return n0(e)}function fN(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case AA:t+="";break;default:t+=a}}return t}function n0(n){return n+AA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ur(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??rn.RED,this.left=o??rn.EMPTY,this.right=a??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new rn(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s0(this.data.getIterator())}getIteratorFrom(e){return new s0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class s0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Yt(on.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IA("Invalid base64 string: "+a):a}})(e);return new an(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const dN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(n){if(nt(!!n,39018),typeof n=="string"){let e=0;const t=dN.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Dr(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="server_timestamp",RA="__type__",bA="__previous_value__",xA="__local_write_time__";function ag(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[RA])==null?void 0:i.stringValue)===wA}function yd(n){const e=n.mapValue.fields[bA];return ag(e)?yd(e):e}function Cu(n){const e=Mr(n.mapValue.fields[xA].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t,i,o,a,u,d,p,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_}}const Hf="(default)";class Iu{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="__type__",pN="__max__",yf={mapValue:{}},MA="__vector__",Bf="value";function Pr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ag(n)?4:gN(n)?9007199254740991:mN(n)?10:11:Ie(28295,{value:n})}function ns(n,e){if(n===e)return!0;const t=Pr(n);if(t!==Pr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cu(n).isEqual(Cu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Mr(o.timestampValue),d=Mr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Dr(o.bytesValue).isEqual(Dr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return xt(o.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return xt(o.integerValue)===xt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=xt(o.doubleValue),d=xt(a.doubleValue);return u===d?Gf(u)===Gf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ha(n.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(i0(u)!==i0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!ns(u[p],d[p])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function wu(n,e){return(n.values||[]).find((t=>ns(t,e)))!==void 0}function Ba(n,e){if(n===e)return 0;const t=Pr(n),i=Pr(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=xt(a.integerValue||a.doubleValue),p=xt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return r0(n.timestampValue,e.timestampValue);case 4:return r0(Cu(n),Cu(e));case 5:return mm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Dr(a),p=Dr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let h=0;h<d.length&&h<p.length;h++){const _=Be(d[h],p[h]);if(_!==0)return _}return Be(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Be(xt(a.latitude),xt(u.latitude));return d!==0?d:Be(xt(a.longitude),xt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return o0(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,I,k,F;const d=a.fields||{},p=u.fields||{},h=(S=d[Bf])==null?void 0:S.arrayValue,_=(I=p[Bf])==null?void 0:I.arrayValue,T=Be(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return T!==0?T:o0(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===yf.mapValue&&u===yf.mapValue)return 0;if(a===yf.mapValue)return 1;if(u===yf.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const S=mm(p[T],_[T]);if(S!==0)return S;const I=Ba(d[p[T]],h[_[T]]);if(I!==0)return I}return Be(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function r0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Mr(n),i=Mr(e),o=Be(t.seconds,i.seconds);return o!==0?o:Be(t.nanos,i.nanos)}function o0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ba(t[o],i[o]);if(a)return a}return Be(t.length,i.length)}function za(n){return gm(n)}function gm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Mr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Dr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=gm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${gm(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function xf(n){switch(Pr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yd(n);return e?16+xf(e):16;case 5:return 2*n.stringValue.length;case 6:return Dr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+xf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ur(i.fields,((a,u)=>{o+=a.length+xf(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function a0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ym(n){return!!n&&"integerValue"in n}function lg(n){return!!n&&"arrayValue"in n}function l0(n){return!!n&&"nullValue"in n}function u0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nf(n){return!!n&&"mapValue"in n}function mN(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[NA])==null?void 0:i.stringValue)===MA}function gu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ur(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=gu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gu(n.arrayValue.values[t]);return e}return{...n}}function gN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(t)}setAll(e){let t=on.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=gu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Nf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ur(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Nn(gu(this.value))}}function DA(n){const e=[];return Ur(n.fields,((t,i)=>{const o=new on([t]);if(Nf(i)){const a=DA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new fn(e,0,be.min(),be.min(),be.min(),Nn.empty(),0)}static newFoundDocument(e,t,i,o){return new fn(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new fn(e,2,t,be.min(),be.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,be.min(),be.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.position=e,this.inclusive=t}}function c0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=Ba(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function f0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ns(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function yN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{}class qt extends PA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vN(e,t,i):t==="array-contains"?new SN(e,i):t==="in"?new AN(e,i):t==="not-in"?new CN(e,i):t==="array-contains-any"?new IN(e,i):new qt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new TN(e,i):new EN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ba(t,this.value)):t!==null&&Pr(this.value)===Pr(t)&&this.matchesComparison(Ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends PA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ci(e,t)}matches(e){return kA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kA(n){return n.op==="and"}function VA(n){return _N(n)&&kA(n)}function _N(n){for(const e of n.filters)if(e instanceof Ci)return!1;return!0}function _m(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+za(n.value);if(VA(n))return n.filters.map((e=>_m(e))).join(",");{const e=n.filters.map((t=>_m(t))).join(",");return`${n.op}(${e})`}}function UA(n,e){return n instanceof qt?(function(i,o){return o instanceof qt&&i.op===o.op&&i.field.isEqual(o.field)&&ns(i.value,o.value)})(n,e):n instanceof Ci?(function(i,o){return o instanceof Ci&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&UA(u,o.filters[d])),!0):!1})(n,e):void Ie(19439)}function LA(n){return n instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`})(n):n instanceof Ci?(function(t){return t.op.toString()+" {"+t.getFilters().map(LA).join(" ,")+"}"})(n):"Filter"}class vN extends qt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class TN extends qt{constructor(e,t){super(e,"in",t),this.keys=OA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EN extends qt{constructor(e,t){super(e,"not-in",t),this.keys=OA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class SN extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lg(t)&&wu(t.arrayValue,this.value)}}class AN extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wu(this.value.arrayValue,t)}}class CN extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wu(this.value.arrayValue,t)}}class IN extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function d0(n,e=null,t=[],i=[],o=null,a=null,u=null){return new wN(n,e,t,i,o,a,u)}function ug(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>_m(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>za(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>za(i))).join(",")),e.Te=t}return e.Te}function cg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!f0(n.startAt,e.startAt)&&f0(n.endAt,e.endAt)}function vm(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RN(n,e,t,i,o,a,u,d){return new Wa(n,e,t,i,o,a,u,d)}function fg(n){return new Wa(n)}function h0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FA(n){return n.collectionGroup!==null}function yu(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Yt(on.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ru(a,i))})),t.has(on.keyField().canonicalString())||e.Ie.push(new Ru(on.keyField(),i))}return e.Ie}function Xi(n){const e=Me(n);return e.Ee||(e.Ee=bN(e,yu(n))),e.Ee}function bN(n,e){if(n.limitType==="F")return d0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Ru(o.field,a)}));const t=n.endAt?new zf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new zf(n.startAt.position,n.startAt.inclusive):null;return d0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Tm(n,e){const t=n.filters.concat([e]);return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Em(n,e,t){return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _d(n,e){return cg(Xi(n),Xi(e))&&n.limitType===e.limitType}function qA(n){return`${ug(Xi(n))}|lt:${n.limitType}`}function ba(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>LA(o))).join(", ")}]`),gd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>za(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>za(o))).join(",")),`Target(${i})`})(Xi(n))}; limitType=${n.limitType})`}function vd(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of yu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const h=c0(u,d,p);return u.inclusive?h<=0:h<0})(i.startAt,yu(i),o)||i.endAt&&!(function(u,d,p){const h=c0(u,d,p);return u.inclusive?h>=0:h>0})(i.endAt,yu(i),o))})(n,e)}function xN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GA(n){return(e,t)=>{let i=!1;for(const o of yu(n)){const a=NN(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function NN(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),h=d.data.field(a);return p!==null&&h!==null?Ba(p,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new St(Se.comparator);function Us(){return MN}const HA=new St(Se.comparator);function cu(...n){let e=HA;for(const t of n)e=e.insert(t.key,t);return e}function BA(n){let e=HA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function To(){return _u()}function zA(){return _u()}function _u(){return new ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const DN=new St(Se.comparator),PN=new Yt(Se.comparator);function ze(...n){let e=PN;for(const t of n)e=e.add(t);return e}const kN=new Yt(Be);function VN(){return kN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function YA(n){return{integerValue:""+n}}function UN(n,e){return uN(e)?YA(e):dg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this._=void 0}}function LN(n,e,t){return n instanceof bu?(function(o,a){const u={fields:{[RA]:{stringValue:wA},[xA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&ag(a)&&(a=yd(a)),a&&(u.fields[bA]=a),{mapValue:u}})(t,e):n instanceof xu?JA(n,e):n instanceof Nu?$A(n,e):(function(o,a){const u=KA(o,a),d=p0(u)+p0(o.Ae);return ym(u)&&ym(o.Ae)?YA(d):dg(o.serializer,d)})(n,e)}function ON(n,e,t){return n instanceof xu?JA(n,e):n instanceof Nu?$A(n,e):t}function KA(n,e){return n instanceof Yf?(function(i){return ym(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class bu extends Td{}class xu extends Td{constructor(e){super(),this.elements=e}}function JA(n,e){const t=QA(e);for(const i of n.elements)t.some((o=>ns(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Nu extends Td{constructor(e){super(),this.elements=e}}function $A(n,e){let t=QA(e);for(const i of n.elements)t=t.filter((o=>!ns(o,i)));return{arrayValue:{values:t}}}class Yf extends Td{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function p0(n){return xt(n.integerValue||n.doubleValue)}function QA(n){return lg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t){this.field=e,this.transform=t}}function qN(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof xu&&o instanceof xu||i instanceof Nu&&o instanceof Nu?Ha(i.elements,o.elements,ns):i instanceof Yf&&o instanceof Yf?ns(i.Ae,o.Ae):i instanceof bu&&o instanceof bu})(n.transform,e.transform)}class GN{constructor(e,t){this.version=e,this.transformResults=t}}class Wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ed{}function XA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ZA(n.key,Wi.none()):new Uu(n.key,n.data,Wi.none());{const t=n.data,i=Nn.empty();let o=new Yt(on.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Lr(n.key,i,new Gn(o.toArray()),Wi.none())}}function HN(n,e,t){n instanceof Uu?(function(o,a,u){const d=o.value.clone(),p=g0(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Lr?(function(o,a,u){if(!Mf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=g0(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(WA(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function vu(n,e,t,i){return n instanceof Uu?(function(a,u,d,p){if(!Mf(a.precondition,u))return d;const h=a.value.clone(),_=y0(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Lr?(function(a,u,d,p){if(!Mf(a.precondition,u))return d;const h=y0(a.fieldTransforms,p,u),_=u.data;return _.setAll(WA(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Mf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function BN(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=KA(i.transform,o||null);a!=null&&(t===null&&(t=Nn.empty()),t.set(i.field,a))}return t||null}function m0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ha(i,o,((a,u)=>qN(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uu extends Ed{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Lr extends Ed{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function WA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function g0(n,e,t){const i=new Map;nt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,ON(u,d,t[o]))}return i}function y0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,LN(a,u,e))}return i}class ZA extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zN extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&HN(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=zA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=XA(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,((t,i)=>m0(t,i)))&&Ha(this.baseMutations,e.baseMutations,((t,i)=>m0(t,i)))}}class hg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return DN})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new hg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Je;function $N(n){switch(n){case re.OK:return Ie(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function jA(n){if(n===void 0)return Vs("GRPC error has no .code"),re.UNKNOWN;switch(n){case Ft.OK:return re.OK;case Ft.CANCELLED:return re.CANCELLED;case Ft.UNKNOWN:return re.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return re.INTERNAL;case Ft.UNAVAILABLE:return re.UNAVAILABLE;case Ft.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ft.NOT_FOUND:return re.NOT_FOUND;case Ft.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ft.ABORTED:return re.ABORTED;case Ft.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ft.DATA_LOSS:return re.DATA_LOSS;default:return Ie(39323,{code:n})}}(Je=Ft||(Ft={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Rr([4294967295,4294967295],0);function _0(n){const e=QN().encode(n),t=new hA;return t.update(e),new Uint8Array(t.digest())}function v0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Rr([t,i],0),new Rr([o,a],0)]}class pg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(i<0)throw new fu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Rr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Rr.fromNumber(i)));return o.compare(XN)===1&&(o=new Rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=_0(e),[i,o]=v0(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new pg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=_0(e),[i,o]=v0(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Sd(be.min(),o,new St(Be),Us(),ze())}}class Lu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Lu(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class eC{constructor(e,t){this.targetId=e,this.Ce=t}}class tC{constructor(e,t,i=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class T0{constructor(){this.ve=0,this.Fe=E0(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new Lu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=E0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Us(),this.Je=_f(),this.He=_f(),this.Ye=new St(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(vm(a))if(i===0){const u=new Se(a.path);this.et(t,u,fn.newNoDocument(u,be.min()))}else nt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Dr(i).toUint8Array()}catch(p){if(p instanceof IA)return Ga("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new pg(u,o,a)}catch(p){return Ga(p instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&vm(d.target)){const p=new Se(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,fn.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=ze();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Sd(e,t,this.Ye,this.je,i);return this.je=Us(),this.Je=_f(),this.He=_f(),this.Ye=new St(Be),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new T0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _f(){return new St(Se.comparator)}function E0(){return new St(Se.comparator)}const ZN={asc:"ASCENDING",desc:"DESCENDING"},jN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e1={and:"AND",or:"OR"};class t1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sm(n,e){return n.useProto3Json||gd(e)?e:{value:e}}function Kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function n1(n,e){return Kf(n,e.toTimestamp())}function Zi(n){return nt(!!n,49232),be.fromTimestamp((function(t){const i=Mr(t);return new yt(i.seconds,i.nanos)})(n))}function mg(n,e){return Am(n,e).canonicalString()}function Am(n,e){const t=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iC(n){const e=ht.fromString(n);return nt(lC(e),10190,{key:e.toString()}),e}function Cm(n,e){return mg(n.databaseId,e.path)}function Zp(n,e){const t=iC(e);if(t.get(1)!==n.databaseId.projectId)throw new he(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(rC(t))}function sC(n,e){return mg(n.databaseId,e)}function i1(n){const e=iC(n);return e.length===4?ht.emptyPath():rC(e)}function Im(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rC(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function S0(n,e,t){return{name:Cm(n,e),fields:t.value.mapValue.fields}}function s1(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(nt(_===void 0||typeof _=="string",58123),an.fromBase64String(_||"")):(nt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),an.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?re.UNKNOWN:jA(h.code);return new he(_,h.message||"")})(u);t=new tC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Zp(n,i.document.name),a=Zi(i.document.updateTime),u=i.document.createTime?Zi(i.document.createTime):be.min(),d=new Nn({mapValue:{fields:i.document.fields}}),p=fn.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Df(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Zp(n,i.document),a=i.readTime?Zi(i.readTime):be.min(),u=fn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Df([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Zp(n,i.document),a=i.removedTargetIds||[];t=new Df([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new JN(o,a),d=i.targetId;t=new eC(d,u)}}return t}function r1(n,e){let t;if(e instanceof Uu)t={update:S0(n,e.key,e.value)};else if(e instanceof ZA)t={delete:Cm(n,e.key)};else if(e instanceof Lr)t={update:S0(n,e.key,e.data),updateMask:p1(e.fieldMask)};else{if(!(e instanceof zN))return Ie(16599,{Vt:e.type});t={verify:Cm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof bu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Yf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:n1(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function o1(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Zi(o.updateTime):Zi(a);return u.isEqual(be.min())&&(u=Zi(a)),new GN(u,o.transformResults||[])})(t,e)))):[]}function a1(n,e){return{documents:[sC(n,e.path)]}}function l1(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=sC(n,o);const a=(function(h){if(h.length!==0)return aC(Ci.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:xa(S.field),direction:f1(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Sm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function u1(n){let e=i1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){nt(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const S=oC(T);return S instanceof Ci&&VA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(k){return new Ru(Na(k.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,gd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,I=T.values||[];return new zf(I,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,I=T.values||[];return new zf(I,S)})(t.endAt)),RN(e,o,u,a,d,"F",p,h)}function c1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Na(t.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Na(t.unaryFilter.field);return qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Na(t.unaryFilter.field);return qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Na(t.unaryFilter.field);return qt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return qt.create(Na(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ci.create(t.compositeFilter.filters.map((i=>oC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function f1(n){return ZN[n]}function d1(n){return jN[n]}function h1(n){return e1[n]}function xa(n){return{fieldPath:n.canonicalString()}}function Na(n){return on.fromServerFormat(n.fieldPath)}function aC(n){return n instanceof qt?(function(t){if(t.op==="=="){if(u0(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NAN"}};if(l0(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(u0(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NOT_NAN"}};if(l0(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(t.field),op:d1(t.op),value:t.value}}})(n):n instanceof Ci?(function(t){const i=t.getFilters().map((o=>aC(o)));return i.length===1?i[0]:{compositeFilter:{op:h1(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function p1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t,i,o,a=be.min(),u=be.min(),d=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.yt=e}}function g1(n){const e=u1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.Cn=new _1}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Nr.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class _1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Yt(ht.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Yt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uC=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(uC,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LruGarbageCollector",v1=1048576;function I0([n,e],[t,i]){const o=Be(n,t);return o===0?Be(e,i):o}class T1{constructor(e){this.Ir=e,this.buffer=new Yt(I0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();I0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(C0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xa(t)?me(C0,"Ignoring IndexedDB error during garbage collection: ",t):await Qa(t)}await this.Vr(3e5)}))}}class S1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(md.ce);const i=new T1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(A0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Ra()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function A1(n,e){return new S1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.changes=new ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&vu(i.mutation,o,Gn.empty(),yt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const o=To();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=cu();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=To();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Us();const u=_u(),d=(function(){return _u()})();return t.forEach(((p,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Lr)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),vu(_.mutation,h,_.mutation.getFieldMask(),yt.now())):u.set(h.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new I1(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=_u();let o=new St(((u,d)=>u-d)),a=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||Gn.empty();_=d.applyToLocalView(h,_),i.set(p,_);const T=(o.get(d.batchId)||ze()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,_=p.value,T=zA();_.forEach((S=>{if(!a.has(S)){const I=XA(t.get(S),i.get(S));I!==null&&T.set(S,I),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return oe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):oe.resolve(To());let d=Au,p=a;return u.next((h=>oe.forEach(h,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,ze()))).next((_=>({batchId:d,changes:BA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=cu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=cu();return this.indexManager.getCollectionParents(e,a).next((d=>oe.forEach(d,(p=>{const h=(function(T,S){return new Wa(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,fn.newInvalidDocument(_)))}));let d=cu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&vu(_.mutation,h,Gn.empty(),yt.now()),vd(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Zi(o.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:g1(o.bundledQuery),readTime:Zi(o.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.overlays=new St(Se.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=To();return oe.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const o=To(),a=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new St(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=To(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=To(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return oe.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new KN(t,i));let a=this.qr.get(t);a===void 0&&(a=ze(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.Qr=new Yt(Xt.$r),this.Ur=new Yt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Se(new ht([])),i=new Xt(t,e),o=new Xt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new ht([])),i=new Xt(t,e),o=new Xt(t,e+1);let a=ze();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(Xt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new YN(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new Xt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?og:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Yt(Be);return t.forEach((o=>{const a=new Xt(o,0),u=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new Xt(new Se(a),0);let d=new Yt(Be);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(p.Yr)),!0)}),u),oe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(t.mutations,(o=>{const a=new Xt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.ri=e,this.docs=(function(){return new St(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let i=Us();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():fn.newInvalidDocument(o))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Us();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||rN(sN(_),i)<=0||(o.has(_.key)||vd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new D1(this)}getSize(e){return oe.resolve(this.size)}}class D1 extends C1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.persistence=e,this.si=new ko((t=>ug(t)),cg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new gg,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ya(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),oe.waitFor(a).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.ui={},this.overlays={},this.ci=new md(0),this.li=!1,this.li=!0,this.hi=new x1,this.referenceDelegate=e(this),this.Pi=new P1(this),this.indexManager=new y1,this.remoteDocumentCache=(function(o){return new M1(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new m1(t),this.Ii=new R1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new N1(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new k1(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class k1 extends aN{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Ri=new gg,this.Vi=null}static mi(e){return new yg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const o=Se.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jf{constructor(e,t){this.persistence=e,this.pi=new ko((i=>cN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=A1(this,t)}static mi(e,t){return new Jf(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?oe.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,be.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}br(e,t,i){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return oe.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=ze(),o=ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new _g(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Rb()?8:lN(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new V1;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ra()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Ra()<=He.DEBUG&&me("QueryEngine","Query:",ba(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ra()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xi(t))):oe.resolve())}ys(e,t){if(h0(t))return oe.resolve(null);let i=Xi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Em(t,null,"F"),i=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=ze(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.Ds(t,d);return this.Cs(t,h,u,p.readTime)?this.ys(e,Em(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,i,o){return h0(t)||o.isEqual(be.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?oe.resolve(null):(Ra()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ba(t)),this.vs(e,u,t,iN(o,Au)).next((d=>d)))}))}Ds(e,t){let i=new Yt(GA(e));return t.forEach(((o,a)=>{vd(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Ra()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ba(t)),this.ps.getDocumentsMatchingQuery(e,t,Nr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LocalStore",L1=3e8;class O1{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new St(Be),this.xs=new ko((a=>ug(a)),cg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function F1(n,e,t,i){return new O1(n,e,t,i)}async function fC(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=ze();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function q1(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,_){const T=h.batch,S=T.keys();let I=oe.resolve();return S.forEach((k=>{I=I.next((()=>_.getEntry(p,k))).next((F=>{const P=h.docVersions.get(k);nt(P!==null,48541),F.version.compareTo(P)<0&&(T.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),_.addEntry(F)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=ze();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function dC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function G1(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const S=o.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,T))));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(an.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(T,I),(function(F,P,O){return F.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=L1?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(S,I,_)&&d.push(t.Pi.updateTargetData(a,I))}));let p=Us(),h=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(H1(a,u,e.documentUpdates).next((_=>{p=_.ks,h=_.qs}))),!i.isEqual(be.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return oe.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function H1(n,e,t){let i=ze(),o=ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Us();return t.forEach(((d,p)=>{const h=a.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):me(vg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function B1(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=og),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function z1(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,oe.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Cr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function wm(n,e,t){const i=Me(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Xa(u))throw u;me(vg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function w0(n,e,t){const i=Me(n);let o=be.min(),a=ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const T=Me(p),S=T.xs.get(_);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,_)})(i,u,Xi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:ze()))).next((d=>(Y1(i,xN(e),d),{documents:d,Qs:a})))))}function Y1(n,e,t){let i=n.Os.get(e)||be.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class R0{constructor(){this.activeTargetIds=VN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K1{constructor(){this.Mo=new R0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new R0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="ConnectivityMonitor";class x0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(b0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(b0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function Rm(){return vf===null?vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RestConnection",$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Hf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Rm(),d=this.zo(e,t.toUriEncodedString());me(jp,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:h}=new URL(d),_=Do(h);return this.Jo(e,d,p,i,_).then((T=>(me(jp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Ga(jp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=$1[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class W1 extends Q1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Rm();return new Promise(((d,p)=>{const h=new pA;h.setWithCredentials(!0),h.listenOnce(mA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case bf.NO_ERROR:const T=h.getResponseJson();me(un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case bf.TIMEOUT:me(un,`RPC '${e}' ${u} timed out`),p(new he(re.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const S=h.getStatus();if(me(un,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const F=(function(O){const Q=O.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Q)>=0?Q:re.UNKNOWN})(k.status);p(new he(F,k.message))}else p(new he(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new he(re.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{me(un,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);me(un,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Rm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=_A(),d=yA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");me(un,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=u.createWebChannel(_,p);this.I_(T);let S=!1,I=!1;const k=new X1({Yo:P=>{I?me(un,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(S||(me(un,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),me(un,`RPC '${e}' stream ${o} sending:`,P),T.send(P))},Zo:()=>T.close()}),F=(P,O,Q)=>{P.listen(O,(z=>{try{Q(z)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return F(T,uu.EventType.OPEN,(()=>{I||(me(un,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),F(T,uu.EventType.CLOSE,(()=>{I||(I=!0,me(un,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(T))})),F(T,uu.EventType.ERROR,(P=>{I||(I=!0,Ga(un,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new he(re.UNAVAILABLE,"The operation could not be completed")))})),F(T,uu.EventType.MESSAGE,(P=>{var O;if(!I){const Q=P.data[0];nt(!!Q,16349);const z=Q,ee=(z==null?void 0:z.error)||((O=z[0])==null?void 0:O.error);if(ee){me(un,`RPC '${e}' stream ${o} received error:`,ee);const le=ee.status;let ae=(function(x){const U=Ft[x];if(U!==void 0)return jA(U)})(le),N=ee.message;ae===void 0&&(ae=re.INTERNAL,N="Unknown error status: "+le+" with message "+ee.message),I=!0,k.a_(new he(ae,N)),T.close()}else me(un,`RPC '${e}' stream ${o} received:`,Q),k.u_(Q)}})),F(d,gA.STAT_EVENT,(P=>{P.stat===pm.PROXY?me(un,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===pm.NOPROXY&&me(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){return new t1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="PersistentStream";class pC{constructor(e,t,i,o,a,u,d,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Vs(t.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(N0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(N0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Z1 extends pC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=s1(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Zi(u.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Im(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=vm(p)?{documents:a1(a,p)}:{query:l1(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=nC(a,u.resumeToken);const h=Sm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=Kf(a,u.snapshotVersion.toTimestamp());const h=Sm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=c1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Im(this.serializer),t.removeTarget=e,this.q_(t)}}class j1 extends pC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=o1(e.writeResults,e.commitTime),i=Zi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Im(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>r1(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{}class tM extends eM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Am(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(re.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Am(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vs(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class iM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Vo(this)&&(me(bo,"Restarting streams for network reachability change."),await(async function(p){const h=Me(p);h.Ea.add(4),await Ou(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Cd(h)})(this))}))})),this.Ra=new nM(i,o)}}async function Cd(n){if(Vo(n))for(const e of n.da)await e(!0)}async function Ou(n){for(const e of n.da)await e(!1)}function mC(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ag(t)?Sg(t):Za(t).O_()&&Eg(t,e))}function Tg(n,e){const t=Me(n),i=Za(t);t.Ia.delete(e),i.O_()&&gC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Vo(t)&&t.Ra.set("Unknown"))}function Eg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Za(n).Y_(e)}function gC(n,e){n.Va.Ue(e),Za(n).Z_(e)}function Sg(n){n.Va=new WN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Za(n).start(),n.Ra.ua()}function Ag(n){return Vo(n)&&!Za(n).x_()&&n.Ia.size>0}function Vo(n){return Me(n).Ea.size===0}function yC(n){n.Va=void 0}async function sM(n){n.Ra.set("Online")}async function rM(n){n.Ia.forEach(((e,t)=>{Eg(n,e)}))}async function oM(n,e){yC(n),Ag(n)?(n.Ra.ha(e),Sg(n)):n.Ra.set("Unknown")}async function aM(n,e,t){if(n.Ra.set("Online"),e instanceof tC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){me(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $f(n,i)}else if(e instanceof Df?n.Va.Ze(e):e instanceof eC?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const i=await dC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(an.EMPTY_BYTE_STRING,_.snapshotVersion)),gC(a,p);const T=new Cr(_.target,p,h,_.sequenceNumber);Eg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){me(bo,"Failed to raise snapshot:",i),await $f(n,i)}}async function $f(n,e,t){if(!Xa(e))throw e;n.Ea.add(1),await Ou(n),n.Ra.set("Offline"),t||(t=()=>dC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(bo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cd(n)}))}function _C(n,e){return e().catch((t=>$f(n,t,e)))}async function Id(n){const e=Me(n),t=kr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:og;for(;lM(e);)try{const o=await B1(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,uM(e,o)}catch(o){await $f(e,o)}vC(e)&&TC(e)}function lM(n){return Vo(n)&&n.Ta.length<10}function uM(n,e){n.Ta.push(e);const t=kr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vC(n){return Vo(n)&&!kr(n).x_()&&n.Ta.length>0}function TC(n){kr(n).start()}async function cM(n){kr(n).ra()}async function fM(n){const e=kr(n);for(const t of n.Ta)e.ea(t.mutations)}async function dM(n,e,t){const i=n.Ta.shift(),o=hg.from(i,e,t);await _C(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Id(n)}async function hM(n,e){e&&kr(n).X_&&await(async function(i,o){if((function(u){return $N(u)&&u!==re.ABORTED})(o.code)){const a=i.Ta.shift();kr(i).B_(),await _C(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Id(i)}})(n,e),vC(n)&&TC(n)}async function M0(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),me(bo,"RemoteStore received new credentials");const i=Vo(t);t.Ea.add(3),await Ou(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cd(t)}async function pM(n,e){const t=Me(n);e?(t.Ea.delete(2),await Cd(t)):e||(t.Ea.add(2),await Ou(t),t.Ra.set("Unknown"))}function Za(n){return n.ma||(n.ma=(function(t,i,o){const a=Me(t);return a.sa(),new Z1(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:sM.bind(null,n),t_:rM.bind(null,n),r_:oM.bind(null,n),H_:aM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ag(n)?Sg(n):n.Ra.set("Unknown")):(await n.ma.stop(),yC(n))}))),n.ma}function kr(n){return n.fa||(n.fa=(function(t,i,o){const a=Me(t);return a.sa(),new j1(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:cM.bind(null,n),r_:hM.bind(null,n),ta:fM.bind(null,n),na:dM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Id(n)):(await n.fa.stop(),n.Ta.length>0&&(me(bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Cg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(n,e){if(Vs("AsyncQueue",`${e}: ${n}`),Xa(n))return new he(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{static emptySet(e){return new ka(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=cu(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ka;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.ga=new St(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ka{constructor(e,t,i,o,a,u,d,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ka(e,t,ka.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class gM{constructor(){this.queries=P0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Me(t),a=o.queries;o.queries=P0(),a.forEach(((u,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new he(re.ABORTED,"Firestore shutting down"))}}function P0(){return new ko((n=>qA(n)),_d)}async function yM(n,e){const t=Me(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new mM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Ig(u,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&wg(t)}async function _M(n,e){const t=Me(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function vM(n,e){const t=Me(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&wg(t)}function TM(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function wg(n){n.Ca.forEach((e=>{e.next()}))}var bm,k0;(k0=bm||(bm={})).Ma="default",k0.Cache="cache";class EM{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.key=e}}class SC{constructor(e){this.key=e}}class SM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=GA(e),this.tu=new ka(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new D0,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const S=o.get(_),I=vd(this.query,T)?T:null,k=!!S&&this.mutatedKeys.has(S.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;S&&I?S.data.isEqual(I.data)?k!==F&&(i.track({type:3,doc:I}),P=!0):this.su(S,I)||(i.track({type:2,doc:I}),P=!0,(p&&this.eu(I,p)>0||h&&this.eu(I,h)<0)&&(d=!0)):!S&&I?(i.track({type:0,doc:I}),P=!0):S&&!I&&(i.track({type:1,doc:S}),P=!0,(p||h)&&(d=!0)),P&&(I?(u=u.add(I),a=F?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(I,k){const F=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:P})}};return F(I)-F(k)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,u.length!==0||h?{snapshot:new Ka(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new D0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new SC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new EC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Rg="SyncEngine";class AM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class CM{constructor(e){this.key=e,this.hu=!1}}class IM{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ko((d=>qA(d)),_d),this.Iu=new Map,this.Eu=new Set,this.du=new St(Se.comparator),this.Au=new Map,this.Ru=new gg,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wM(n,e,t=!0){const i=bC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await AC(i,e,t,!0),o}async function RM(n,e){const t=bC(n);await AC(t,e,!0,!1)}async function AC(n,e,t,i){const o=await z1(n.localStore,Xi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await bM(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&mC(n.remoteStore,o),d}async function bM(n,e,t,i,o){n.pu=(T,S,I)=>(async function(F,P,O,Q){let z=P.view.ru(O);z.Cs&&(z=await w0(F.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,z))));const ee=Q&&Q.targetChanges.get(P.targetId),le=Q&&Q.targetMismatches.get(P.targetId)!=null,ae=P.view.applyChanges(z,F.isPrimaryClient,ee,le);return U0(F,P.targetId,ae.au),ae.snapshot})(n,T,S,I);const a=await w0(n.localStore,e,!0),u=new SM(e,a.Qs),d=u.ru(a.documents),p=Lu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,p);U0(n,t,h.au);const _=new AM(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function xM(n,e,t){const i=Me(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!_d(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await wm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Tg(i.remoteStore,o.targetId),xm(i,o.targetId)})).catch(Qa)):(xm(i,o.targetId),await wm(i.localStore,o.targetId,!0))}async function NM(n,e){const t=Me(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Tg(t.remoteStore,i.targetId))}async function MM(n,e,t){const i=OM(n);try{const o=await(function(u,d){const p=Me(u),h=yt.now(),_=d.reduce(((I,k)=>I.add(k.key)),ze());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=Us(),F=ze();return p.Ns.getEntries(I,_).next((P=>{k=P,k.forEach(((O,Q)=>{Q.isValidDocument()||(F=F.add(O))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,k))).next((P=>{T=P;const O=[];for(const Q of d){const z=BN(Q,T.get(Q.key).overlayedDocument);z!=null&&O.push(new Lr(Q.key,z,DA(z.value.mapValue),Wi.exists(!0)))}return p.mutationQueue.addMutationBatch(I,h,O,d)})).next((P=>{S=P;const O=P.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(I,P.batchId,O)}))})).then((()=>({batchId:S.batchId,changes:BA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let h=u.Vu[u.currentUser.toKey()];h||(h=new St(Be)),h=h.insert(d,p),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Fu(i,o.changes),await Id(i.remoteStore)}catch(o){const a=Ig(o,"Failed to persist write");t.reject(a)}}async function CC(n,e){const t=Me(n);try{const i=await G1(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?nt(u.hu,14607):o.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))})),await Fu(t,i,e)}catch(i){await Qa(i)}}function V0(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Me(u);p.onlineState=d;let h=!1;p.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(d)&&(h=!0)})),h&&wg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function DM(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new St(Se.comparator);u=u.insert(a,fn.newNoDocument(a,be.min()));const d=ze().add(a),p=new Sd(be.min(),new Map,new St(Be),u,d);await CC(i,p),i.du=i.du.remove(a),i.Au.delete(e),bg(i)}else await wm(i.localStore,e,!1).then((()=>xm(i,e,t))).catch(Qa)}async function PM(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await q1(t.localStore,e);wC(t,i,null),IC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Fu(t,o)}catch(o){await Qa(o)}}async function kM(n,e,t){const i=Me(n);try{const o=await(function(u,d){const p=Me(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,d).next((T=>(nt(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(h,T)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);wC(i,e,t),IC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Fu(i,o)}catch(o){await Qa(o)}}function IC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function wC(n,e,t){const i=Me(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||RC(n,i)}))}function RC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Tg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),bg(n))}function U0(n,e,t){for(const i of t)i instanceof EC?(n.Ru.addReference(i.key,e),VM(n,i)):i instanceof SC?(me(Rg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||RC(n,i.key)):Ie(19791,{wu:i})}function VM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(me(Rg,"New document in limbo: "+t),n.Eu.add(i),bg(n))}function bg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(ht.fromString(e)),i=n.fu.next();n.Au.set(i,new CM(t)),n.du=n.du.insert(t,i),mC(n.remoteStore,new Cr(Xi(fg(t.path)),i,"TargetPurposeLimboResolution",md.ce))}}async function Fu(n,e,t){const i=Me(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(h){o.push(h);const T=_g.As(p.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(p,h){const _=Me(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(h,(S=>oe.forEach(S.Es,(I=>_.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>oe.forEach(S.ds,(I=>_.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!Xa(T))throw T;me(vg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const I=_.Ms.get(S),k=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(S,F)}}})(i.localStore,a))}async function UM(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){me(Rg,"User change. New user:",e.toKey());const i=await fC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new he(re.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fu(t,i.Ls)}}function LM(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let o=ze();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function bC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DM.bind(null,e),e.Pu.H_=vM.bind(null,e.eventManager),e.Pu.yu=TM.bind(null,e.eventManager),e}function OM(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kM.bind(null,e),e}class Qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return F1(this.persistence,new U1,e.initialUser,this.serializer)}Cu(e){return new cC(yg.mi,this.serializer)}Du(e){return new K1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qf.provider={build:()=>new Qf};class FM extends Qf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof Jf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new E1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new cC((i=>Jf.mi(i,t)),this.serializer)}}class Nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UM.bind(null,this.syncEngine),await pM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gM})()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),i=(function(a){return new W1(a)})(e.databaseInfo);return(function(a,u,d,p){return new tM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new iM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>V0(this.syncEngine,t,0)),(function(){return x0.v()?new x0:new J1})())}createSyncEngine(e,t){return(function(o,a,u,d,p,h,_){const T=new IM(o,a,u,d,p,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Me(o);me(bo,"RemoteStore shutting down."),a.Ea.add(5),await Ou(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Nm.provider={build:()=>new Nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class GM{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{me(Vr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me(Vr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ig(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function tm(n,e){n.asyncQueue.verifyOperationInProgress(),me(Vr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await fC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function L0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HM(n);me(Vr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>M0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>M0(e.remoteStore,o))),n._onlineComponents=e}async function HM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Vr,"Using user provided OfflineComponentProvider");try{await tm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ga("Error using user provided cache. Falling back to memory cache: "+t),await tm(n,new Qf)}}else me(Vr,"Using default OfflineComponentProvider"),await tm(n,new FM(void 0));return n._offlineComponents}async function xC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Vr,"Using user provided OnlineComponentProvider"),await L0(n,n._uninitializedComponentsProvider._online)):(me(Vr,"Using default OnlineComponentProvider"),await L0(n,new Nm))),n._onlineComponents}function BM(n){return xC(n).then((e=>e.syncEngine))}async function O0(n){const e=await xC(n),t=e.eventManager;return t.onListen=wM.bind(null,e.syncEngine),t.onUnlisten=xM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NM.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firestore.googleapis.com",q0=!0;class G0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MC,this.ssl=q0}else this.host=e.host,this.ssl=e.ssl??q0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<v1)throw new he(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Kx;switch(i.type){case"firstParty":return new Xx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=F0.get(t);i&&(me("ComponentProvider","Removing Datastore"),F0.delete(t),i.terminate())})(this),Promise.resolve()}}function zM(n,e,t,i={}){var h;n=Ao(n,wd);const o=Do(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(eg(`https://${d}`),tg("Firestore",!0)),a.host!==MC&&a.host!==d&&Ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:o,emulatorOptions:i};if(!Io(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=cn.MOCK_USER;else{_=aA(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new he(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(S)}n._authCredentials=new Jx(new TA(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Uo(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vu(t,Ht._jsonSchema))return new Ht(e,i||null,new Se(ht.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Gt("string",Ht._jsonSchemaVersion),referencePath:Gt("string")};class br extends Uo{constructor(e,t,i){super(e,t,fg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Se(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function DC(n,e,...t){if(n=Nt(n),EA("collection","path",e),n instanceof wd){const i=ht.fromString(e,...t);return jT(i),new br(n,null,i)}{if(!(n instanceof Ht||n instanceof br))throw new he(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ht.fromString(e,...t));return jT(i),new br(n.firestore,null,i)}}function PC(n,e,...t){if(n=Nt(n),arguments.length===1&&(e=rg.newId()),EA("doc","path",e),n instanceof wd){const i=ht.fromString(e,...t);return ZT(i),new Ht(n,null,new Se(i))}{if(!(n instanceof Ht||n instanceof br))throw new he(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ht.fromString(e,...t));return ZT(i),new Ht(n.firestore,n instanceof br?n.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="AsyncQueue";class B0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hC(this,"async_queue_retry"),this._c=()=>{const i=em();i&&me(H0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=em();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=em();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new So;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xa(e))throw e;me(H0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vs("INTERNAL UNHANDLED ERROR: ",z0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Cg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:z0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function z0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Mu extends wd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new B0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B0(e),this._firestoreClient=void 0,await e}}}function YM(n,e){const t=typeof n=="object"?n:hd(),i=typeof n=="string"?n:Hf,o=dd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=sA("firestore");a&&zM(o,...a)}return o}function kC(n){if(n._terminated)throw new he(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KM(n),n._firestoreClient}function KM(n){var i,o,a;const e=n._freezeSettings(),t=(function(d,p,h,_){return new hN(d,p,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,NC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new GM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni(an.fromBase64String(e))}catch(t){throw new he(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ni(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,ni._jsonSchema))return ni.fromBase64String(e.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:Gt("string",ni._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:Gt("string",ji._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new es(e.vectorValues);throw new he(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:Gt("string",es._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=/^__.*__$/;class $M{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uu(e,this.data,t,this.fieldTransforms)}}class VC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class xg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UC(this.Ac)&&JM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ad(e)}Cc(e,t,i,o=!1){return new xg({Ac:e,methodName:t,Dc:i,path:on.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ng(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new QM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XM(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);Dg("Data must be an object, but it was:",u,i);const d=LC(i,u);let p,h;if(a.merge)p=new Gn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const S=Mm(e,T,t);if(!u.contains(S))throw new he(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);FC(_,S)||_.push(S)}p=new Gn(_),h=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,h=u.fieldTransforms;return new $M(new Nn(d),p,h)}class xd extends bd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}class Mg extends bd{_toFieldTransform(e){return new FN(e.path,new bu)}isEqual(e){return e instanceof Mg}}function WM(n,e,t,i){const o=n.Cc(1,e,t);Dg("Data must be an object, but it was:",o,i);const a=[],u=Nn.empty();Ur(i,((p,h)=>{const _=Pg(e,p,t);h=Nt(h);const T=o.yc(_);if(h instanceof xd)a.push(_);else{const S=qu(h,T);S!=null&&(a.push(_),u.set(_,S))}}));const d=new Gn(a);return new VC(u,d,o.fieldTransforms)}function ZM(n,e,t,i,o,a){const u=n.Cc(1,e,t),d=[Mm(e,i,t)],p=[o];if(a.length%2!=0)throw new he(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(Mm(e,a[S])),p.push(a[S+1]);const h=[],_=Nn.empty();for(let S=d.length-1;S>=0;--S)if(!FC(h,d[S])){const I=d[S];let k=p[S];k=Nt(k);const F=u.yc(I);if(k instanceof xd)h.push(I);else{const P=qu(k,F);P!=null&&(h.push(I),_.set(I,P))}}const T=new Gn(h);return new VC(_,T,u.fieldTransforms)}function jM(n,e,t,i=!1){return qu(t,n.Cc(i?4:3,e))}function qu(n,e){if(OC(n=Nt(n)))return Dg("Unsupported field value:",e,n),LC(n,e);if(n instanceof bd)return(function(i,o){if(!UC(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=qu(d,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Nt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return UN(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=yt.fromDate(i);return{timestampValue:Kf(o.serializer,a)}}if(i instanceof yt){const a=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kf(o.serializer,a)}}if(i instanceof ji)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ni)return{bytesValue:nC(o.serializer,i._byteString)};if(i instanceof Ht){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:mg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof es)return(function(u,d){return{mapValue:{fields:{[NA]:{stringValue:MA},[Bf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return dg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${pd(i)}`)})(n,e)}function LC(n,e){const t={};return CA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(n,((i,o)=>{const a=qu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function OC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof ji||n instanceof ni||n instanceof Ht||n instanceof bd||n instanceof es)}function Dg(n,e,t){if(!OC(t)||!SA(t)){const i=pd(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Mm(n,e,t){if((e=Nt(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Pg(n,e);throw Xf("Field path arguments must be of type string or ",n,!1,void 0,t)}const eD=new RegExp("[~\\*/\\[\\]]");function Pg(n,e,t){if(e.search(eD)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xf(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new he(re.INVALID_ARGUMENT,d+n+p)}function FC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tD extends qC{data(){return super.data()}}function kg(n,e){return typeof e=="string"?Pg(n,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class GC extends Vg{}function iD(n,e,...t){let i=[];e instanceof Vg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof Lg)).length,d=a.filter((p=>p instanceof Ug)).length;if(u>1||u>0&&d>0)throw new he(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ug extends GC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ug(e,t,i)}_apply(e){const t=this._parse(e);return HC(e._query,t),new Uo(e.firestore,e.converter,Tm(e._query,t))}_parse(e){const t=Ng(e.firestore);return(function(a,u,d,p,h,_,T){let S;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){J0(T,_);const k=[];for(const F of T)k.push(K0(p,a,F));S={arrayValue:{values:k}}}else S=K0(p,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||J0(T,_),S=jM(d,u,T,_==="in"||_==="not-in");return qt.create(h,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lg extends Vg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)HC(u,p),u=Tm(u,p)})(e._query,t),new Uo(e.firestore,e.converter,Tm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends GC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Og(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new he(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ru(a,u)})(e._query,this._field,this._direction);return new Uo(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Wa(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function sD(n,e="asc"){const t=e,i=kg("orderBy",n);return Og._create(i,t)}function K0(n,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new he(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FA(e)&&t.indexOf("/")!==-1)throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ht.fromString(t));if(!Se.isDocumentKey(i))throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return a0(n,new Se(i))}if(t instanceof Ht)return a0(n,t._key);throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(t)}.`)}function J0(n,e){if(!Array.isArray(n)||n.length===0)throw new he(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HC(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rD{convertValue(e,t="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ur(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[Bf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>xt(u.doubleValue)));return new es(t)}convertGeoPoint(e){return new ji(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=yd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){const t=Mr(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ht.fromString(e);nt(lC(i),9688,{name:e});const o=new Iu(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return o.isEqual(t)||Vs(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Co extends qC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(kg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Co._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Co._jsonSchemaVersion="firestore/documentSnapshot/1.0",Co._jsonSchema={type:Gt("string",Co._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Pf extends Co{data(e={}){return super.data(e)}}class Va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new du(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pf(this._firestore,this._userDataWriter,i.key,i,new du(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Pf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new du(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Pf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new du(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:aD(d.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}Va._jsonSchemaVersion="firestore/querySnapshot/1.0",Va._jsonSchema={type:Gt("string",Va._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class BC extends rD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function lD(n,e,t,...i){n=Ao(n,Ht);const o=Ao(n.firestore,Mu),a=Ng(o);let u;return u=typeof(e=Nt(e))=="string"||e instanceof Rd?ZM(a,"updateDoc",n._key,e,t,i):WM(a,"updateDoc",n._key,e),zC(o,[u.toMutation(n._key,Wi.exists(!0))])}function uD(n,e){const t=Ao(n.firestore,Mu),i=PC(n),o=oD(n.converter,e);return zC(t,[XM(Ng(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Wi.exists(!1))]).then((()=>i))}function cD(n,...e){var p,h,_;n=Nt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Y0(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Y0(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let a,u,d;if(n instanceof Ht)u=Ao(n.firestore,Mu),d=fg(n._key.path),a={next:T=>{e[i]&&e[i](fD(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=Ao(n,Uo);u=Ao(T.firestore,Mu),d=T._query;const S=new BC(u);a={next:I=>{e[i]&&e[i](new Va(u,S,T,I))},error:e[i+1],complete:e[i+2]},nD(n._query)}return(function(S,I,k,F){const P=new qM(F),O=new EM(I,P,k);return S.asyncQueue.enqueueAndForget((async()=>yM(await O0(S),O))),()=>{P.Nu(),S.asyncQueue.enqueueAndForget((async()=>_M(await O0(S),O)))}})(kC(u),d,o,a)}function zC(n,e){return(function(i,o){const a=new So;return i.asyncQueue.enqueueAndForget((async()=>MM(await BM(i),o,a))),a.promise})(kC(n),e)}function fD(n,e,t){const i=t.docs.get(e._key),o=new BC(n);return new Co(n,o,e._key,i,new du(t.hasPendingWrites,t.fromCache),e.converter)}function Dm(){return new Mg("serverTimestamp")}(function(e,t=!0){(function(o){$a=o})(Po),wo(new xr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Mu(new $x(i.getProvider("auth-internal")),new Wx(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new he(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Qi($T,QT,e),Qi($T,QT,"esm2020")})();var dD="firebase",hD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(dD,hD,"app");function YC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pD=YC,KC=new Pu("auth","Firebase",YC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=new ng("@firebase/auth");function mD(n,...e){Wf.logLevel<=He.WARN&&Wf.warn(`Auth (${Po}): ${n}`,...e)}function kf(n,...e){Wf.logLevel<=He.ERROR&&Wf.error(`Auth (${Po}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(n,...e){throw qg(n,...e)}function Ei(n,...e){return qg(n,...e)}function Fg(n,e,t){const i={...pD(),[e]:t};return new Pu("auth","Firebase",i).create(e,{appName:n.name})}function Ps(n){return Fg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gD(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&si(n,"argument-error"),Fg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return KC.create(n,...e)}function Ce(n,e,...t){if(!n)throw qg(e,...t)}function Ms(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kf(e),new Error(e)}function Ls(n,e){n||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function yD(){return $0()==="http:"||$0()==="https:"}function $0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yD()||Cb()||"connection"in navigator)?navigator.onLine:!0}function vD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ls(t>e,"Short delay should be less than long delay!"),this.isMobile=Eb()||Ib()}get(){return _D()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){Ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SD=new Gu(3e4,6e4);function Or(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Fs(n,e,t,i,o={}){return $C(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=ku({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return Ab()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Do(n.emulatorConfig.host)&&(h.credentials="include"),JC.fetch()(await QC(n,n.config.apiHost,t,d),h)})}async function $C(n,e,t){n._canInitEmulator=!1;const i={...TD,...e};try{const o=new CD(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Tf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Tf(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Tf(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Fg(n,_,h);si(n,_)}}catch(o){if(o instanceof ss)throw o;si(n,"network-request-failed",{message:String(o)})}}async function Hu(n,e,t,i,o={}){const a=await Fs(n,e,t,i,o);return"mfaPendingCredential"in a&&si(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function QC(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Gg(n.config,o):`${n.config.apiScheme}://${o}`;return ED.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function AD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),SD.get())})}}function Tf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ei(n,e,i);return o.customData._tokenResponse=t,o}function Q0(n){return n!==void 0&&n.enterprise!==void 0}class ID{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wD(n,e){return Fs(n,"GET","/v2/recaptchaConfig",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(n,e){return Fs(n,"POST","/v1/accounts:delete",e)}async function Zf(n,e){return Fs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bD(n,e=!1){const t=Nt(n),i=await t.getIdToken(e),o=Hg(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Tu(nm(o.auth_time)),issuedAtTime:Tu(nm(o.iat)),expirationTime:Tu(nm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function nm(n){return Number(n)*1e3}function Hg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{const o=nA(t);return o?JSON.parse(o):(kf("Failed to decode base64 JWT payload"),null)}catch(o){return kf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function X0(n){const e=Hg(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ss&&xD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function xD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Ja(n,Zf(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?XC(o.providerUserInfo):[],u=DD(n.providerData,a),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function MD(n){const e=Nt(n);await jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DD(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function XC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(n,e){const t=await $C(n,{},async()=>{const i=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await QC(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Do(n.emulatorConfig.host)&&(p.credentials="include"),JC.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kD(n,e){return Fs(n,"POST","/v2/accounts:revokeToken",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=X0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await PD(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ua;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new ND(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bD(this,e)}reload(){return MD(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await jf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await Ja(this,RD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:I,providerData:k,stsTokenManager:F}=t;Ce(T&&F,e,"internal-error");const P=Ua.fromJSON(this.name,F);Ce(typeof T=="string",e,"internal-error"),Tr(i,e.name),Tr(o,e.name),Ce(typeof S=="boolean",e,"internal-error"),Ce(typeof I=="boolean",e,"internal-error"),Tr(a,e.name),Tr(u,e.name),Tr(d,e.name),Tr(p,e.name),Tr(h,e.name),Tr(_,e.name);const O=new vi({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:P,createdAt:h,lastLoginAt:_});return k&&Array.isArray(k)&&(O.providerData=k.map(Q=>({...Q}))),p&&(O._redirectEventId=p),O}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ua;o.updateFromServerResponse(t);const a=new vi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await jf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?XC(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Ua;d.updateFromIdToken(i);const p=new vi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function Ds(n){Ls(n instanceof Function,"Expected a class definition");let e=W0.get(n);return e?(Ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}WC.type="NONE";const Z0=WC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n,e,t){return`firebase:${n}:${e}:${t}`}class La{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Vf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Vf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?vi._fromGetAccountInfoResponse(this.auth,t,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new La(Ds(Z0),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Ds(Z0);const u=Vf(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const S=await Zf(e,{idToken:_}).catch(()=>{});if(!S)break;T=await vi._fromGetAccountInfoResponse(e,S,_)}else T=vi._fromJSON(e,_);h!==a&&(d=T),a=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new La(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new La(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iI(e))return"Blackberry";if(sI(e))return"Webos";if(jC(e))return"Safari";if((e.includes("chrome/")||eI(e))&&!e.includes("edge/"))return"Chrome";if(nI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ZC(n=hn()){return/firefox\//i.test(n)}function jC(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eI(n=hn()){return/crios\//i.test(n)}function tI(n=hn()){return/iemobile/i.test(n)}function nI(n=hn()){return/android/i.test(n)}function iI(n=hn()){return/blackberry/i.test(n)}function sI(n=hn()){return/webos/i.test(n)}function Bg(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VD(n=hn()){var e;return Bg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function UD(){return wb()&&document.documentMode===10}function rI(n=hn()){return Bg(n)||nI(n)||sI(n)||iI(n)||/windows phone/i.test(n)||tI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n,e=[]){let t;switch(n){case"Browser":t=j0(hn());break;case"Worker":t=`${j0(hn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Po}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e={}){return Fs(n,"GET","/v2/passwordPolicy",Or(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=6;class qD{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eE(this),this.idTokenSubscription=new eE(this),this.beforeStateQueue=new LD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),i=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Ps(this));const t=e?Nt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OD(this),t=new qD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await kD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ds(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&mD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fr(n){return Nt(n)}class eE{constructor(e){this.auth=e,this.observer=null,this.addObserver=kb(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HD(n){Nd=n}function aI(n){return Nd.loadJS(n)}function BD(){return Nd.recaptchaEnterpriseScript}function zD(){return Nd.gapiScript}function YD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class KD{constructor(){this.enterprise=new JD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class JD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $D="recaptcha-enterprise",lI="NO_RECAPTCHA";class QD{constructor(e){this.type=$D,this.auth=Fr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{wD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new ID(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;Q0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(lI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KD().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&Q0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=BD();p.length!==0&&(p+=d),aI(p).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function tE(n,e,t,i=!1,o=!1){const a=new QD(n);let u;if(o)u=lI;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Vm(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await tE(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await tE(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(n,e){const t=dd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Io(a,e??{}))return o;si(o,"already-initialized")}return t.initialize({options:e})}function WD(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ZD(n,e,t){const i=Fr(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=uI(e),{host:u,port:d}=jD(e),p=d===null?"":`:${d}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Io(h,i.config.emulator)&&Io(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Do(u)?(eg(`${a}//${u}${p}`),tg("Auth",!0)):eP()}function uI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jD(n){const e=uI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:nE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:nE(u)}}}function nE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function eP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,t){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function tP(n,e){return Fs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(n,e){return Hu(n,"POST","/v1/accounts:signInWithPassword",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e){return Hu(n,"POST","/v1/accounts:signInWithEmailLink",Or(n,e))}async function sP(n,e){return Hu(n,"POST","/v1/accounts:signInWithEmailLink",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends zg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Du(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Du(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,t,"signInWithPassword",nP);case"emailLink":return iP(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,i,"signUpPassword",tP);case"emailLink":return sP(e,{idToken:t,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n,e){return Hu(n,"POST","/v1/accounts:signInWithIdp",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="http://localhost";class xo extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new xo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}buildRequest(){const e={requestUri:rP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ku(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aP(n){const e=au(lu(n)).link,t=e?au(lu(e)).deep_link_id:null,i=au(lu(n)).deep_link_id;return(i?au(lu(i)).link:null)||i||t||e||n}class Yg{constructor(e){const t=au(lu(e)),i=t.apiKey??null,o=t.oobCode??null,a=oP(t.mode??null);Ce(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=aP(e);try{return new Yg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(e,t){return Du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Yg.parseLink(t);return Ce(i,"argument-error"),Du._fromEmailAndCode(e,i.code,i.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Kg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Bu{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.FACEBOOK_SIGN_IN_METHOD="facebook.com";Er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ns.credential(t,i)}catch{return null}}}Ns.GOOGLE_SIGN_IN_METHOD="google.com";Ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Bu{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Bu{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ar.credential(t,i)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(n,e){return Hu(n,"POST","/v1/accounts:signUp",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await vi._fromIdTokenResponse(e,i,o),u=iE(i);return new No({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=iE(i);return new No({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function iE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends ss{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new ed(e,t,i,o)}}function cI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(n,a,e,i):a})}async function uP(n,e,t=!1){const i=await Ja(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e,t=!1){const{auth:i}=n;if(xn(i.app))return Promise.reject(Ps(i));const o="reauthenticate";try{const a=await Ja(n,cI(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=Hg(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),No._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&si(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(n,e,t=!1){if(xn(n.app))return Promise.reject(Ps(n));const i="signIn",o=await cI(n,i,e),a=await No._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function fP(n,e){return fI(Fr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(n){const e=Fr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dP(n,e,t){if(xn(n.app))return Promise.reject(Ps(n));const i=Fr(n),u=await Vm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lP).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&dI(n),p}),d=await No._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function hP(n,e,t){return xn(n.app)?Promise.reject(Ps(n)):fP(Nt(n),ja.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dI(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(n,e){return Fs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Nt(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ja(i,pP(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function gP(n,e,t,i){return Nt(n).onIdTokenChanged(e,t,i)}function yP(n,e,t){return Nt(n).beforeAuthStateChanged(e,t)}function _P(n,e,t,i){return Nt(n).onAuthStateChanged(e,t,i)}function vP(n){return Nt(n).signOut()}const td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=1e3,EP=10;class pI extends hI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);UD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,EP):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},TP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pI.type="LOCAL";const SP=pI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends hI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mI.type="SESSION";const gI=mI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Md(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),p=await AP(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const h=Jg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function IP(n){ts().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function wP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function bP(){return yI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebaseLocalStorageDb",xP=1,nd="firebaseLocalStorage",vI="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dd(n,e){return n.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function NP(){const n=indexedDB.deleteDatabase(_I);return new zu(n).toPromise()}function Um(){const n=indexedDB.open(_I,xP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(nd,{keyPath:vI})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(nd)?e(i):(i.close(),await NP(),e(await Um()))})})}async function sE(n,e,t){const i=Dd(n,!0).put({[vI]:e,value:t});return new zu(i).toPromise()}async function MP(n,e){const t=Dd(n,!1).get(e),i=await new zu(t).toPromise();return i===void 0?null:i.value}function rE(n,e){const t=Dd(n,!0).delete(e);return new zu(t).toPromise()}const DP=800,PP=3;class TI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>PP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(bP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await wP(),!this.activeServiceWorker)return;this.sender=new CP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await sE(e,td,"1"),await rE(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>sE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>MP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Dd(o,!1).getAll();return new zu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TI.type="LOCAL";const kP=TI;new Gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n,e){return e?Ds(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VP(n){return fI(n.auth,new $g(n),n.bypassAuthState)}function UP(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),cP(t,new $g(n),n.bypassAuthState)}async function LP(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),uP(t,new $g(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VP;case"linkViaPopup":case"linkViaRedirect":return LP;case"reauthViaPopup":case"reauthViaRedirect":return UP;default:si(this.auth,"internal-error")}}resolve(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new Gu(2e3,1e4);async function FP(n,e,t){if(xn(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const i=Fr(n);gD(n,e,Kg);const o=EI(i,t);return new Eo(i,"signInViaPopup",e,o).executeNotNull()}class Eo extends SI{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OP.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="pendingRedirect",Uf=new Map;class GP extends SI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Uf.get(this.auth._key());if(!e){try{const i=await HP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Uf.set(this.auth._key(),e)}return this.bypassAuthState||Uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HP(n,e){const t=YP(e),i=zP(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function BP(n,e){Uf.set(n._key(),e)}function zP(n){return Ds(n._redirectPersistence)}function YP(n){return Vf(qP,n.config.apiKey,n.name)}async function KP(n,e,t=!1){if(xn(n.app))return Promise.reject(Ps(n));const i=Fr(n),o=EI(i,e),u=await new GP(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=600*1e3;class $P{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!AI(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JP&&this.cachedEventUids.clear(),this.cachedEventUids.has(oE(e))}saveEventToCache(e){this.cachedEventUids.add(oE(e)),this.lastProcessedEventTime=Date.now()}}function oE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(n,e={}){return Fs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZP=/^https?/;async function jP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XP(n);for(const t of e)try{if(ek(t))return}catch{}si(n,"unauthorized-domain")}function ek(n){const e=Pm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!ZP.test(t))return!1;if(WP.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new Gu(3e4,6e4);function aE(){const n=ts().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nk(n){return new Promise((e,t)=>{var o,a,u;function i(){aE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aE(),t(Ei(n,"network-request-failed"))},timeout:tk.get()})}if((a=(o=ts().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=ts().gapi)!=null&&u.load)i();else{const d=YD("iframefcb");return ts()[d]=()=>{gapi.load?i():t(Ei(n,"network-request-failed"))},aI(`${zD()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Lf=null,e})}let Lf=null;function ik(n){return Lf=Lf||nk(n),Lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new Gu(5e3,15e3),rk="__/auth/iframe",ok="emulator/auth/iframe",ak={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uk(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gg(e,ok):`https://${n.config.authDomain}/${rk}`,i={apiKey:e.apiKey,appName:n.name,v:Po},o=lk.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${ku(i).slice(1)}`}async function ck(n){const e=await ik(n),t=ts().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:uk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ak,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ei(n,"network-request-failed"),d=ts().setTimeout(()=>{a(u)},sk.get());function p(){ts().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dk=500,hk=600,pk="_blank",mk="http://localhost";class lE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gk(n,e,t,i=dk,o=hk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...fk,width:i.toString(),height:o.toString(),top:a,left:u},h=hn().toLowerCase();t&&(d=eI(h)?pk:t),ZC(h)&&(e=e||mk,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[I,k])=>`${S}${I}=${k},`,"");if(VD(h)&&d!=="_self")return yk(e||"",d),new lE(null);const T=window.open(e||"",d,_);Ce(T,n,"popup-blocked");try{T.focus()}catch{}return new lE(T)}function yk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="__/auth/handler",vk="emulator/auth/handler",Tk=encodeURIComponent("fac");async function uE(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Po,eventId:o};if(e instanceof Kg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Pb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof Bu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),h=p?`#${Tk}=${encodeURIComponent(p)}`:"";return`${Ek(n)}?${ku(d).slice(1)}${h}`}function Ek({config:n}){return n.emulator?Gg(n,vk):`https://${n.authDomain}/${_k}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="webStorageSupport";class Sk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gI,this._completeRedirectFn=KP,this._overrideRedirectResult=BP}async _openPopup(e,t,i,o){var u;Ls((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await uE(e,t,i,Pm(),o);return gk(e,a,Jg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await uE(e,t,i,Pm(),o);return IP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Ls(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ck(e),i=new $P(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(im,{type:im},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[im];a!==void 0&&t(!!a),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rI()||jC()||Bg()}}const Ak=Sk;var cE="@firebase/auth",fE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wk(n){wo(new xr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oI(n)},h=new GD(i,o,a,p);return WD(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),wo(new xr("auth-internal",e=>{const t=Fr(e.getProvider("auth").getImmediate());return(i=>new Ck(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(cE,fE,Ik(n)),Qi(cE,fE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=300,bk=oA("authIdTokenMaxAge")||Rk;let dE=null;const xk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>bk)return;const o=t==null?void 0:t.token;dE!==o&&(dE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Nk(n=hd()){const e=dd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XD(n,{popupRedirectResolver:Ak,persistence:[kP,SP,gI]}),i=oA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=xk(a.toString());yP(t,u,()=>u(t.currentUser)),gP(t,d=>u(d))}}const o=iA("auth");return o&&ZD(t,`http://${o}`),t}function Mk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}HD({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Ei("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",Mk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wk("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebasestorage.googleapis.com",Dk="storageBucket",Pk=120*1e3,kk=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends ss{constructor(e,t,i=0){super(sm(e),`Firebase Storage: ${t} (${sm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var is;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(is||(is={}));function sm(n){return"storage/"+n}function Vk(){const n="An unknown error occurred, please check the error payload for server response.";return new rs(is.UNKNOWN,n)}function Uk(){return new rs(is.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lk(){return new rs(is.CANCELED,"User canceled the upload/download.")}function Ok(n){return new rs(is.INVALID_URL,"Invalid URL '"+n+"'.")}function Fk(n){return new rs(is.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function hE(n){return new rs(is.INVALID_ARGUMENT,n)}function II(){return new rs(is.APP_DELETED,"The Firebase app was deleted.")}function qk(n){return new rs(is.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ti.makeFromUrl(e,t)}catch{return new Ti(e,"")}if(i.path==="")return i;throw Fk(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function h(ee){ee.path_=decodeURIComponent(ee.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",I=new RegExp(`^https?://${T}/${_}/b/${o}/o${S}`,"i"),k={bucket:1,path:3},F=t===CI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",O=new RegExp(`^https?://${F}/${o}/${P}`,"i"),z=[{regex:d,indices:p,postModify:a},{regex:I,indices:k,postModify:h},{regex:O,indices:{bucket:1,path:2},postModify:h}];for(let ee=0;ee<z.length;ee++){const le=z[ee],ae=le.regex.exec(e);if(ae){const N=ae[le.indices.bucket];let M=ae[le.indices.path];M||(M=""),i=new Ti(N,M),le.postModify(i);break}}if(i==null)throw Ok(e);return i}}class Gk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let h=!1;function _(...P){h||(h=!0,e.apply(null,P))}function T(P){o=setTimeout(()=>{o=null,n(I,p())},P)}function S(){a&&clearTimeout(a)}function I(P,...O){if(h){S();return}if(P){S(),_.call(null,P,...O);return}if(p()||u){S(),_.call(null,P,...O);return}i<64&&(i*=2);let z;d===1?(d=2,z=0):z=(i+Math.random())*1e3,T(z)}let k=!1;function F(P){k||(k=!0,S(),!h&&(o!==null?(P||(d=2),clearTimeout(o),T(0)):P||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,F(!0)},t),F}function Bk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){return n!==void 0}function pE(n,e,t,i){if(i<e)throw hE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw hE(`Invalid value for '${n}'. Expected ${t} or less.`)}function Yk(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var id;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(id||(id={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t,i,o,a,u,d,p,h,_,T,S=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,F)=>{this.resolve_=k,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Ef(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===id.NO_ERROR,p=a.getStatus();if(!d||Kk(p,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===id.ABORT;i(!1,new Ef(!1,null,_));return}const h=this.successCodes_.indexOf(p)!==-1;i(!0,new Ef(h,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());zk(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=Vk();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?II():Lk();u(p)}else{const p=Uk();u(p)}};this.canceled_?t(!1,new Ef(!1,null,!0)):this.backoffId_=Hk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Bk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ef{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function $k(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Qk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Xk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Wk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Zk(n,e,t,i,o,a,u=!0,d=!1){const p=Yk(n.urlParams),h=n.url+p,_=Object.assign({},n.headers);return Xk(_,e),$k(_,t),Qk(_,a),Wk(_,i),new Jk(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function e2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this._service=e,t instanceof Ti?this._location=t:this._location=Ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sd(e,t)}get root(){const e=new Ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e2(this._location.path)}get storage(){return this._service}get parent(){const e=jk(this._location.path);if(e===null)return null;const t=new Ti(this._location.bucket,e);return new sd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw qk(e)}}function mE(n,e){const t=e==null?void 0:e[Dk];return t==null?null:Ti.makeFromBucketSpec(t,n)}function t2(n,e,t,i={}){n.host=`${e}:${t}`;const o=Do(e);o&&(eg(`https://${n.host}/b`),tg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:aA(a,n.app.options.projectId))}class n2{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=CI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pk,this._maxUploadRetryTime=kk,this._requests=new Set,o!=null?this._bucket=Ti.makeFromBucketSpec(o,this._host):this._bucket=mE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ti.makeFromBucketSpec(this._url,e):this._bucket=mE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sd(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new Gk(II());{const u=Zk(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const gE="@firebase/storage",yE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="storage";function i2(n=hd(),e){n=Nt(n);const i=dd(n,wI).getImmediate({identifier:e}),o=sA("storage");return o&&s2(i,...o),i}function s2(n,e,t,i={}){t2(n,e,t,i)}function r2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new n2(t,i,o,e,Po)}function o2(){wo(new xr(wI,r2,"PUBLIC").setMultipleInstances(!0)),Qi(gE,yE,""),Qi(gE,yE,"esm2020")}o2();const rm={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0};let Sf=null,Mo=null,Pd=null,a2=null,Lm=null;try{if(!rm.apiKey||rm.apiKey==="your_firebase_api_key")throw new Error("Missing or invalid VITE_FIREBASE_API_KEY in .env file.");Sf=Vx().length?hd():cA(rm),Mo=Nk(Sf),Pd=YM(Sf),a2=i2(Sf)}catch(n){console.error("Firebase Initialization Error:",n),Lm=n}const Qg="contacts",RI=(n,e)=>{const t=iD(DC(Pd,`users/${n}/${Qg}`),sD("name","asc"));return cD(t,i=>{const o=i.docs.map(a=>({id:a.id,...a.data()}));e(o)})},l2=async(n,e)=>uD(DC(Pd,`users/${n}/${Qg}`),{...e,createdAt:Dm(),updatedAt:Dm()}),u2=async(n,e,t)=>{const i=PC(Pd,`users/${n}/${Qg}`,e);return lD(i,{...t,updatedAt:Dm()})},c2=({user:n,onLogout:e,currentScreen:t,onNavigate:i,logs:o=[]})=>{const[a,u]=Ee.useState(""),[d,p]=Ee.useState(""),[h,_]=Ee.useState(""),[T,S]=Ee.useState([]);jm.useEffect(()=>{if(n!=null&&n.uid){console.log("Dashboard: ...",n.uid);const O=RI(n.uid,Q=>{console.log("Dashboard:  Firestore :",Q.length),console.log(":",Q),S(Q)});return()=>O()}else console.log("Dashboard:  user.uid")},[n]);const I=[{name:"",icon:"groups"},{name:"",icon:"storefront"},{name:"",icon:"sentiment_satisfied"},{name:"",icon:"family_restroom"},{name:"VIP",icon:"grade"}],k=Ee.useMemo(()=>{let O=T.filter(z=>{var ae,N;const ee=z.name.toLowerCase().includes(h.toLowerCase())||((ae=z.company)==null?void 0:ae.toLowerCase().includes(h.toLowerCase())),le=d===""||((N=z.tags)==null?void 0:N.includes(d));return ee&&le});a==="AI "?O=O.filter(z=>{var ae;const ee=(ae=z.tags)==null?void 0:ae.includes("VIP"),le=!z.interactions||z.interactions.length===0;return ee||le}):a===""&&(O=O.filter(z=>{var ee,le;return((ee=z.tags)==null?void 0:ee.includes(""))||((le=z.tags)==null?void 0:le.includes(""))}));const Q={};return O.forEach(z=>{var ae;const ee=(((ae=z.initials)==null?void 0:ae[0])||z.name.charAt(0)).toUpperCase(),le=/^[A-Z]$/.test(ee)?ee:"#";Q[le]||(Q[le]=[]),Q[le].push(z)}),Object.keys(Q).sort().reduce((z,ee)=>(z[ee]=Q[ee],z),{})},[d,h,T,a]),F=()=>w.jsxs("div",{className:"flex flex-col gap-4 p-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:""}),w.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:[o.length," "]})]}),w.jsx("div",{className:"flex flex-col gap-3",children:o.map(O=>w.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm border border-slate-50 dark:border-slate-700 flex gap-4",children:[w.jsx("div",{className:`w-10 h-10 rounded-xl shrink-0 flex items-center justify-center ${O.type==="create"?"bg-green-50 text-green-600":O.type==="update"?"bg-blue-50 text-blue-600":O.type==="photo"?"bg-amber-50 text-amber-600":"bg-purple-50 text-purple-600"}`,children:w.jsx("span",{className:"material-symbols-outlined text-[20px]",children:O.type==="create"?"person_add":O.type==="update"?"edit_note":O.type==="photo"?"image":"event_repeat"})}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[w.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:O.action}),w.jsx("span",{className:"text-[10px] text-slate-400",children:O.timestamp})]}),w.jsxs("p",{className:"text-[11px] text-slate-500 font-medium mb-1",children:["",O.contactName]}),w.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:O.details})]})]},O.id))})]}),P=()=>w.jsxs("div",{className:"flex flex-col gap-4 pt-2",children:[w.jsx("div",{className:"px-4",children:w.jsxs("div",{className:"relative flex items-center bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 px-4 py-3 shadow-sm transition-all focus-within:ring-2 focus-within:ring-primary/20",children:[w.jsx("span",{className:"material-symbols-outlined text-slate-400 mr-2",children:"search"}),w.jsx("input",{type:"text",placeholder:"...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm p-0 text-slate-700 dark:text-white",value:h,onChange:O=>_(O.target.value)})]})}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsxs("div",{className:"flex items-center justify-between px-5",children:[w.jsx("h3",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest",children:""}),w.jsx("span",{className:"material-symbols-outlined text-slate-300 text-[16px]",children:"settings"})]}),w.jsx("div",{className:"flex gap-2.5 px-4 overflow-x-auto no-scrollbar py-1",children:I.map(O=>w.jsxs("button",{onClick:()=>p(O.name),className:`flex items-center gap-1.5 flex-none px-4 py-2 rounded-full text-xs font-bold transition-all ${d===O.name?"bg-primary text-white shadow-md shadow-primary/20 scale-105":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border border-slate-100 dark:border-slate-700 hover:border-primary/50"}`,children:[w.jsx("span",{className:"material-symbols-outlined text-[16px]",style:{fontVariationSettings:d===O.name?"'FILL' 1":""},children:O.icon}),O.name]},O.name))})]}),w.jsx("div",{className:"flex gap-2 px-4 py-1 border-t border-slate-50 dark:border-slate-800 mt-1 pt-3",children:["","AI ",""].map(O=>w.jsx("button",{onClick:()=>u(O),className:`flex-none px-5 py-2 rounded-xl text-xs font-bold transition-all ${a===O?"bg-slate-900 dark:bg-white text-white dark:text-slate-900":"text-slate-400 dark:text-slate-500"}`,children:O},O))}),w.jsx("div",{className:"px-4 pb-12 min-h-[400px]",children:Object.entries(k).map(([O,Q])=>w.jsxs("div",{className:"mb-6",children:[w.jsx("h2",{className:"text-primary text-[11px] font-bold mb-3 ml-2 uppercase tracking-widest bg-blue-50 dark:bg-blue-900/20 w-7 h-7 flex items-center justify-center rounded-lg",children:O}),w.jsx("div",{className:"flex flex-col gap-3",children:Q.map(z=>w.jsxs("div",{onClick:()=>i(Le.CONTACT_DETAIL,z),className:"bg-white dark:bg-slate-800 rounded-3xl p-3.5 flex items-center justify-between shadow-sm border border-slate-50 dark:border-slate-700 cursor-pointer active:scale-[0.98] transition-all hover:shadow-md",children:[w.jsxs("div",{className:"flex items-center gap-3.5",children:[w.jsx("div",{className:"relative",children:z.avatar?w.jsx("img",{src:z.avatar,className:"w-12 h-12 rounded-full object-cover ring-2 ring-white dark:ring-slate-700",alt:z.name}):w.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-sm font-bold bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900 dark:to-purple-900 text-indigo-600 dark:text-indigo-200 ring-2 ring-white dark:ring-slate-700",children:z.initials||z.name.charAt(0)})}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-[15px]",children:z.name}),w.jsxs("p",{className:"text-slate-400 text-[11px] font-medium mt-0.5",children:[z.role," ",z.company?`@ ${z.company}`:""]})]})]}),w.jsx("button",{className:"w-10 h-10 rounded-2xl bg-[#f1f5f9] dark:bg-slate-700/50 flex items-center justify-center text-slate-400",children:w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px"},children:z.actionIcon||"chevron_right"})})]},z.id))})]},O))})]});return w.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] dark:bg-slate-950 pb-20",children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-4 bg-white dark:bg-slate-900 sticky top-0 z-30 border-b border-slate-50 dark:border-slate-800",children:[w.jsx("button",{className:"text-slate-800 dark:text-white",children:w.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),w.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:t===Le.HISTORY?"":""}),w.jsx("button",{onClick:()=>i(Le.CONTACT_DETAIL),className:"text-primary",children:w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"28px",fontVariationSettings:"'FILL' 1"},children:"add_circle"})})]}),w.jsx("div",{className:"flex flex-col overflow-y-auto no-scrollbar",children:t===Le.HISTORY?F():P()}),w.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-[480px] mx-auto bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-100 dark:border-slate-800 flex justify-around py-2.5 px-4 z-40",children:[w.jsxs("button",{onClick:()=>i(Le.DASHBOARD),className:`flex flex-col items-center gap-1 min-w-[64px] ${t===Le.DASHBOARD?"text-primary":"text-slate-400"}`,children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontVariationSettings:t===Le.DASHBOARD?"'FILL' 1":"",fontSize:"26px"},children:"contacts"}),w.jsx("span",{className:"text-[11px] font-bold",children:""})]}),w.jsxs("button",{onClick:()=>i(Le.CHAT),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"smart_toy"}),w.jsx("span",{className:"text-[11px] font-medium",children:""})]}),w.jsxs("button",{onClick:()=>i(Le.HISTORY),className:`flex flex-col items-center gap-1 min-w-[64px] ${t===Le.HISTORY?"text-primary":"text-slate-400"}`,children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontVariationSettings:t===Le.HISTORY?"'FILL' 1":"",fontSize:"26px"},children:"history"}),w.jsx("span",{className:"text-[11px] font-bold",children:"History"})]}),w.jsxs("button",{onClick:e,className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"login"}),w.jsx("span",{className:"text-[11px] font-medium",children:""})]})]})]})};var f2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let d2,h2;function p2(){return{geminiUrl:d2,vertexUrl:h2}}function m2(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=p2();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qs{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function g2(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Om(n,o,a,0,u)}}function Om(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])Om(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of d)p[h]=u[h];for(const[h,_]of Object.entries(p)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);m(u,T,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&Om(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y2(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function _2(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],T2(u)),e}function v2(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],E2(u)),e}function T2(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>S2(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function E2(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>A2(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function S2(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],x2(t)),e}function A2(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],N2(t)),e}function C2(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function I2(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function w2(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],R2(u)),e}function R2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function bI(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],b2(u)),e}function b2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function x2(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Xg(i));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function N2(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Xg(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _E;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_E||(_E={}));var vE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(vE||(vE={}));var TE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(TE||(TE={}));var Tt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Tt||(Tt={}));var EE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(EE||(EE={}));var SE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(SE||(SE={}));var AE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(AE||(AE={}));var CE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(CE||(CE={}));var IE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(IE||(IE={}));var wE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(wE||(wE={}));var RE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(RE||(RE={}));var bE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(bE||(bE={}));var xE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(xE||(xE={}));var NE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(NE||(NE={}));var ME;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ME||(ME={}));var DE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(DE||(DE={}));var PE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(PE||(PE={}));var kE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(kE||(kE={}));var VE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(VE||(VE={}));var rd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(rd||(rd={}));var UE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(UE||(UE={}));var LE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(LE||(LE={}));var OE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OE||(OE={}));var Fm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fm||(Fm={}));var FE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(FE||(FE={}));var qE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(qE||(qE={}));var GE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(GE||(GE={}));var HE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(HE||(HE={}));var BE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(BE||(BE={}));var zE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zE||(zE={}));var YE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(YE||(YE={}));var KE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(KE||(KE={}));var JE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(JE||(JE={}));var $E;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})($E||($E={}));var QE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(QE||(QE={}));var XE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(XE||(XE={}));var WE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WE||(WE={}));var ZE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ZE||(ZE={}));var jE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(jE||(jE={}));var eS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(eS||(eS={}));var tS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(tS||(tS={}));var nS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(nS||(nS={}));var iS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(iS||(iS={}));var sS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(sS||(sS={}));var rS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(rS||(rS={}));var oS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(oS||(oS={}));var aS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(aS||(aS={}));var lS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(lS||(lS={}));var uS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(uS||(uS={}));var cS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cS||(cS={}));var fS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(fS||(fS={}));var dS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(dS||(dS={}));var hS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hS||(hS={}));var pS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pS||(pS={}));var mS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(mS||(mS={}));var Da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Da||(Da={}));class qm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ru{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[I,k]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(k!==null||k!==void 0)&&T.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,I]of Object.entries(T))S!=="inlineData"&&(I!==null||I!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class gS{}class yS{}class M2{}class D2{}class P2{}class k2{}class _S{}class vS{}class TS{}class V2{}class od{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new od;let o;const a=e;return t?o=v2(a):o=_2(a),Object.assign(i,o),i}}class ES{}class SS{}class AS{}class CS{}class U2{}class L2{}class O2{}class Wg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Wg,a=w2(e);return Object.assign(i,a),i}}class F2{}class q2{}class G2{}class IS{}class H2{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class B2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Zg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Zg,a=bI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function We(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function xI(n,e){const t=We(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function NI(n){return Array.isArray(n)?n.map(e=>ad(e)):[ad(n)]}function ad(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function MI(n){const e=ad(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function DI(n){const e=ad(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function PI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>wS(e)):[wS(n)]}function Gm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function RS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function bS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function dn(n){if(n==null)throw new Error("ContentUnion is required");return Gm(n)?n:{role:"user",parts:PI(n)}}function jg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=dn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=dn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>dn(t)):[dn(e)]}function ii(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(RS(n)||bS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(n)]}const e=[],t=[],i=Gm(n[0]);for(const o of n){const a=Gm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(RS(o)||bS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:PI(t)}),e}function z2(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Tt).includes(t[0].toUpperCase())?t[0].toUpperCase():Tt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Tt).includes(i.toUpperCase())?i.toUpperCase():Tt.TYPE_UNSPECIFIED})}}function Fa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&z2(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Tt).includes(d.toUpperCase())?d.toUpperCase():Tt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Fa(d);else if(i.includes(u)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(Fa(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(d))p[h]=Fa(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function ey(n){return Fa(n)}function ty(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ny(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function el(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Fa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Fa(e.response));return n}function tl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Y2(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Gs(n,e){if(typeof e!="string")throw new Error("name must be a string");return Y2(n,e,"cachedContents")}function kI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function qr(n){return Xg(n)}function K2(n){return n!=null&&typeof n=="object"&&"name"in n}function J2(n){return n!=null&&typeof n=="object"&&"video"in n}function $2(n){return n!=null&&typeof n=="object"&&"uri"in n}function VI(n){var e;let t;if(K2(n)&&(t=n.name),!($2(n)&&(t=n.uri,t===void 0))&&!(J2(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function UI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function LI(n){for(const e of["models","tunedModels","publisherModels"])if(Q2(n,e))return n[e];return[]}function Q2(n,e){return n!==null&&typeof n=="object"&&e in n}function X2(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function W2(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=X2(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function OI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Z2(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function FI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function nl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function qI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j2(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>PV(u))),m(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function eV(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function tV(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Of(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&m(e,["state"],qI(o));const a=f(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&m(e,["dest"],j2(FI(h))),e}function Hm(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["state"]);o!=null&&m(e,["state"],qI(o));const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&m(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&m(e,["src"],nV(T));const S=f(n,["outputConfig"]);S!=null&&m(e,["dest"],eV(FI(S)));const I=f(n,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function nV(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function iV(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>DV(n,u))),m(t,["requests","requests"],a)}return t}function sV(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rV(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function oV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function aV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function lV(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],uV(i));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(I=>I)),m(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function uV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function GI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>qV(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function cV(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function fV(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],tV(Z2(o))),t}function xS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],iV(n,OI(n,o)));const a=f(e,["config"]);return a!=null&&cV(a,t),t}function dV(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],We(n,i));const o=f(e,["src"]);o!=null&&m(t,["inputConfig"],sV(OI(n,o)));const a=f(e,["config"]);return a!=null&&fV(a,t),t}function hV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function pV(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],EV(n,o));const a=f(e,["config"]);return a!=null&&hV(a,t),t}function mV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function gV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function yV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function _V(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function vV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=jg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(m(t,["_self"],TV(o,t)),g2(t,{"requests[].*":"requests[].request.*"})),t}function TV(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function EV(n,e){const t={},i=f(e,["fileName"]);i!=null&&m(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],vV(n,o)),t}function SV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function AV(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CV(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IV(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],GI(dn(o)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&m(i,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const O=f(e,["responseSchema"]);O!=null&&m(i,["responseSchema"],ey(O));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&m(i,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=f(e,["safetySettings"]);if(t!==void 0&&z!=null){let D=z;Array.isArray(D)&&(D=D.map(Ve=>GV(Ve))),m(t,["safetySettings"],D)}const ee=f(e,["tools"]);if(t!==void 0&&ee!=null){let D=tl(ee);Array.isArray(D)&&(D=D.map(Ve=>BV(el(Ve)))),m(t,["tools"],D)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&m(t,["toolConfig"],HV(le)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&m(t,["cachedContent"],Gs(n,ae));const N=f(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const x=f(e,["speechConfig"]);if(x!=null&&m(i,["speechConfig"],ty(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&m(i,["thinkingConfig"],U);const L=f(e,["imageConfig"]);L!=null&&m(i,["imageConfig"],MV(L));const H=f(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(i,["enableEnhancedCivicAnswers"],H),i}function wV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>lV(h))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function RV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function bV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function xV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function NV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function MV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function DV(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["request","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let d=ii(o);Array.isArray(d)&&(d=d.map(p=>GI(p))),m(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&m(t,["request","generationConfig"],IV(n,u,f(t,["request"],{}))),t}function PV(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],wV(t));const i=f(n,["error"]);return i!=null&&m(e,["error"],i),e}function kV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function VV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function UV(n){const e={},t=f(n,["config"]);return t!=null&&kV(t,e),e}function LV(n){const e={},t=f(n,["config"]);return t!=null&&VV(t,e),e}function OV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Of(u))),m(e,["batchJobs"],a)}return e}function FV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Hm(u))),m(e,["batchJobs"],a)}return e}function qV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],SV(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],AV(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],rV(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function GV(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function HV(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],CV(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function BV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],xV(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],NV(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Os;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Os||(Os={}));class Lo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zV extends qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lo(Os.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=xS(this.apiClient,e),i=t._url,o=de("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const _ of p){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=S,T.request=I}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=dV(this.apiClient,e);return d=de("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Hm(_))}else{const h=xS(this.apiClient,e);return d=de("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Of(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pV(this.apiClient,e);return a=de("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Of(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=bV(this.apiClient,e);return d=de("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Hm(_))}else{const h=RV(this.apiClient,e);return d=de("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Of(_))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=aV(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=oV(this.apiClient,e);u=de("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=LV(e);return d=de("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=FV(_),S=new IS;return Object.assign(S,T),S})}else{const h=UV(e);return d=de("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=OV(_),S=new IS;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=gV(this.apiClient,e);return d=de("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>_V(_))}else{const h=mV(this.apiClient,e);return d=de("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>yV(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YV(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function NS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>pU(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function KV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=ii(u);Array.isArray(_)&&(_=_.map(T=>NS(T))),m(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],NS(dn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>gU(T))),m(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],mU(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function JV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=ii(u);Array.isArray(T)&&(T=T.map(S=>S)),m(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],dn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>yU(S))),m(e,["tools"],T)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function $V(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],xI(n,i));const o=f(e,["config"]);return o!=null&&KV(o,t),t}function QV(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],xI(n,i));const o=f(e,["config"]);return o!=null&&JV(o,t),t}function XV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Gs(n,i)),t}function WV(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Gs(n,i)),t}function ZV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function jV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function eU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function tU(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nU(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function sU(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Gs(n,i)),t}function rU(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Gs(n,i)),t}function oU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function aU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function lU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function uU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function cU(n){const e={},t=f(n,["config"]);return t!=null&&lU(t,e),e}function fU(n){const e={},t=f(n,["config"]);return t!=null&&uU(t,e),e}function dU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function hU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function pU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],eU(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],tU(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],YV(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function mU(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],nU(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function gU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],oU(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],aU(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function yU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>iU(S))),m(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function _U(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function vU(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function TU(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Gs(n,i));const o=f(e,["config"]);return o!=null&&_U(o,t),t}function EU(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Gs(n,i));const o=f(e,["config"]);return o!=null&&vU(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SU extends qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lo(Os.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=QV(this.apiClient,e);return d=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=$V(this.apiClient,e);return d=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=rU(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=sU(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=WV(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=jV(_),S=new AS;return Object.assign(S,T),S})}else{const h=XV(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=ZV(_),S=new AS;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=EU(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=TU(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=fU(e);return d=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=hU(_),S=new CS;return Object.assign(S,T),S})}else{const h=cU(e);return d=de("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=dU(_),S=new CS;return Object.assign(S,T),S})}}}function ld(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function MS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(n){return this instanceof Re?(this.v=n,this):new Re(n)}function Si(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(k){return Promise.resolve(k).then(I,T)}}function d(I,k){i[I]&&(o[I]=function(F){return new Promise(function(P,O){a.push([I,F,P,O])>1||p(I,F)})},k&&(o[I]=k(o[I])))}function p(I,k){try{h(i[I](k))}catch(F){S(a[0][3],F)}}function h(I){I.value instanceof Re?Promise.resolve(I.value.v).then(_,T):S(a[0][2],I)}function _(I){p("next",I)}function T(I){p("throw",I)}function S(I,k){I(k),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Ai(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof MS=="function"?MS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AU(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:HI(t)}function HI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function CU(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function DS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!HI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class IU{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new wU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class wU{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),CU(a)}async sendMessage(e){var t;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(T))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?DS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Si(this,arguments,function*(){var o,a,u,d,p,h;const _=[];try{for(var T=!0,S=Ai(e),I;I=yield Re(S.next()),o=I.done,!o;T=!0){d=I.value,T=!1;const k=d;if(AU(k)){const F=(h=(p=k.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;F!==void 0&&_.push(F)}yield yield Re(k)}}catch(k){a={error:k}}finally{try{!T&&!o&&(u=S.return)&&(yield Re(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...DS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RU(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function bU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function xU(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],VI(t)),e}function NU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function MU(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],VI(t)),e}function DU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function PU(n){const e={},t=f(n,["config"]);return t!=null&&DU(t,e),e}function kU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VU extends qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lo(Os.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PU(e);return a=de("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=kU(p),_=new F2;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RU(e);return a=de("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=bU(p),_=new q2;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MU(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xU(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=NU(p),_=new G2;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ff(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function UU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>ZU(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function LU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function OU(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function qU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const F=f(n,["responseSchema"]);F!=null&&m(e,["responseSchema"],F);const P=f(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const O=f(n,["seed"]);O!=null&&m(e,["seed"],O);const Q=f(n,["speechConfig"]);Q!=null&&m(e,["speechConfig"],Q);const z=f(n,["stopSequences"]);z!=null&&m(e,["stopSequences"],z);const ee=f(n,["temperature"]);ee!=null&&m(e,["temperature"],ee);const le=f(n,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const ae=f(n,["topK"]);ae!=null&&m(e,["topK"],ae);const N=f(n,["topP"]);if(N!=null&&m(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function HU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function BU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],ny(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],UU(dn(k)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ae=tl(F);Array.isArray(ae)&&(ae=ae.map(N=>eL(el(N)))),m(e,["setup","tools"],ae)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],jU(P));const O=f(n,["inputAudioTranscription"]);e!==void 0&&O!=null&&m(e,["setup","inputAudioTranscription"],O);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&m(e,["setup","outputAudioTranscription"],Q);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const ee=f(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&m(e,["setup","contextWindowCompression"],ee);const le=f(n,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function zU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],qU(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],ny(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],dn(k));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let N=tl(F);Array.isArray(N)&&(N=N.map(M=>tL(el(M)))),m(e,["setup","tools"],N)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],P);const O=f(n,["inputAudioTranscription"]);e!==void 0&&O!=null&&m(e,["setup","inputAudioTranscription"],O);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&m(e,["setup","outputAudioTranscription"],Q);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const ee=f(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&m(e,["setup","contextWindowCompression"],ee);const le=f(n,["proactivity"]);e!==void 0&&le!=null&&m(e,["setup","proactivity"],le);const ae=f(n,["explicitVadSignal"]);return e!==void 0&&ae!=null&&m(e,["setup","explicitVadSignal"],ae),t}function YU(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],We(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],BU(o,t)),t}function KU(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],We(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],zU(o,t)),t}function JU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function $U(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["weightedPrompts"],i)}return e}function QU(n){const e={},t=f(n,["media"]);if(t!=null){let h=NI(t);Array.isArray(h)&&(h=h.map(_=>Ff(_))),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],Ff(DI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],Ff(MI(a)));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function XU(n){const e={},t=f(n,["media"]);if(t!=null){let h=NI(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],DI(i));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],MI(a));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function WU(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],nL(u));const d=f(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=f(n,["voiceActivityDetectionSignal"]);return h!=null&&m(e,["voiceActivityDetectionSignal"],h),e}function ZU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],LU(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],OU(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],Ff(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function jU(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],GU(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],HU(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function tL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>FU(S))),m(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function nL(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["promptTokensDetails"],I)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["cacheTokensDetails"],I)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["responseTokensDetails"],I)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["toolUsePromptTokensDetails"],I)}const S=f(n,["trafficType"]);return S!=null&&m(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iL(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function sL(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],rL(i));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(I=>I)),m(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function rL(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function oL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let a=ii(o);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["contents"],a)}return t}function aL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function lL(n){const e={},t=f(n,["values"]);t!=null&&m(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&m(e,["statistics"],uL(i)),e}function uL(n){const e={},t=f(n,["truncated"]);t!=null&&m(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function Vd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>_O(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function cL(n){const e={},t=f(n,["controlType"]);t!=null&&m(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function fL(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function dL(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],dn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>KI(d))),m(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],iO(a)),t}function hL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let u=ii(o);Array.isArray(u)&&(u=u.map(d=>Vd(d))),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&fL(a),t}function pL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let u=ii(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&dL(a,t),t}function mL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function gL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function yL(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],We(n,i)),t}function _L(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],We(n,i)),t}function vL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function TL(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function EL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&m(e,["parameters","outputOptions","compressionQuality"],F);const P=f(n,["addWatermark"]);e!==void 0&&P!=null&&m(e,["parameters","addWatermark"],P);const O=f(n,["labels"]);e!==void 0&&O!=null&&m(e,["labels"],O);const Q=f(n,["editMode"]);e!==void 0&&Q!=null&&m(e,["parameters","editMode"],Q);const z=f(n,["baseSteps"]);return e!==void 0&&z!=null&&m(e,["parameters","editConfig","baseSteps"],z),t}function SL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>CO(p))),m(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&EL(u,t),t}function AL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Ud(a))),m(e,["generatedImages"],o)}return e}function CL(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function IL(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),t}function wL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let d=jg(n,o);Array.isArray(d)&&(d=d.map(p=>p)),m(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&CL(a,t);const u=f(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],We(n,u)),t}function RL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let u=jg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&IL(a,t),t}function bL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function xL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>lL(u))),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function NL(n){const e={},t=f(n,["endpoint"]);t!=null&&m(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function ML(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function DL(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PL(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kL(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function VL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Vd(dn(o)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&m(i,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const O=f(e,["responseSchema"]);O!=null&&m(i,["responseSchema"],ey(O));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&m(i,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=f(e,["safetySettings"]);if(t!==void 0&&z!=null){let D=z;Array.isArray(D)&&(D=D.map(Ve=>IO(Ve))),m(t,["safetySettings"],D)}const ee=f(e,["tools"]);if(t!==void 0&&ee!=null){let D=tl(ee);Array.isArray(D)&&(D=D.map(Ve=>DO(el(Ve)))),m(t,["tools"],D)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&m(t,["toolConfig"],MO(le)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&m(t,["cachedContent"],Gs(n,ae));const N=f(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const x=f(e,["speechConfig"]);if(x!=null&&m(i,["speechConfig"],ty(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&m(i,["thinkingConfig"],U);const L=f(e,["imageConfig"]);L!=null&&m(i,["imageConfig"],lO(L));const H=f(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(i,["enableEnhancedCivicAnswers"],H),i}function UL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],dn(o));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&m(i,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const O=f(e,["responseSchema"]);O!=null&&m(i,["responseSchema"],ey(O));const Q=f(e,["responseJsonSchema"]);Q!=null&&m(i,["responseJsonSchema"],Q);const z=f(e,["routingConfig"]);z!=null&&m(i,["routingConfig"],z);const ee=f(e,["modelSelectionConfig"]);ee!=null&&m(i,["modelConfig"],ee);const le=f(e,["safetySettings"]);if(t!==void 0&&le!=null){let Z=le;Array.isArray(Z)&&(Z=Z.map(ue=>ue)),m(t,["safetySettings"],Z)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let Z=tl(ae);Array.isArray(Z)&&(Z=Z.map(ue=>KI(el(ue)))),m(t,["tools"],Z)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&m(t,["toolConfig"],N);const M=f(e,["labels"]);t!==void 0&&M!=null&&m(t,["labels"],M);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&m(t,["cachedContent"],Gs(n,x));const U=f(e,["responseModalities"]);U!=null&&m(i,["responseModalities"],U);const L=f(e,["mediaResolution"]);L!=null&&m(i,["mediaResolution"],L);const H=f(e,["speechConfig"]);H!=null&&m(i,["speechConfig"],ty(H));const D=f(e,["audioTimestamp"]);D!=null&&m(i,["audioTimestamp"],D);const Ve=f(e,["thinkingConfig"]);Ve!=null&&m(i,["thinkingConfig"],Ve);const ft=f(e,["imageConfig"]);if(ft!=null&&m(i,["imageConfig"],uO(ft)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function PS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let u=ii(o);Array.isArray(u)&&(u=u.map(d=>Vd(d))),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],VL(n,a,t)),t}function kS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["contents"]);if(o!=null){let u=ii(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],UL(n,a,t)),t}function VS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>sL(h))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function US(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&m(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function LL(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=f(n,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function OL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&m(e,["parameters","outputOptions","compressionQuality"],F);const P=f(n,["addWatermark"]);e!==void 0&&P!=null&&m(e,["parameters","addWatermark"],P);const O=f(n,["labels"]);e!==void 0&&O!=null&&m(e,["labels"],O);const Q=f(n,["imageSize"]);e!==void 0&&Q!=null&&m(e,["parameters","sampleImageSize"],Q);const z=f(n,["enhancePrompt"]);return e!==void 0&&z!=null&&m(e,["parameters","enhancePrompt"],z),t}function FL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&LL(a,t),t}function qL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&OL(a,t),t}function GL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>jL(u))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],zI(o)),e}function HL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Ud(u))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],YI(o)),e}function BL(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],Ld(_));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>YO(I))),m(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function zL(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(n,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&m(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","negativePrompt"],S);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&m(e,["instances[0]","lastFrame"],Ii(F));const P=f(n,["referenceImages"]);if(e!==void 0&&P!=null){let z=P;Array.isArray(z)&&(z=z.map(ee=>KO(ee))),m(e,["instances[0]","referenceImages"],z)}const O=f(n,["mask"]);e!==void 0&&O!=null&&m(e,["instances[0]","mask"],zO(O));const Q=f(n,["compressionQuality"]);return e!==void 0&&Q!=null&&m(e,["parameters","compressionQuality"],Q),t}function YL(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],QL(u)),e}function KL(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],XL(u)),e}function JL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],Ld(a));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],JI(u));const d=f(e,["source"]);d!=null&&WL(d,t);const p=f(e,["config"]);return p!=null&&BL(p,t),t}function $L(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],Ii(a));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],$I(u));const d=f(e,["source"]);d!=null&&ZL(d,t);const p=f(e,["config"]);return p!=null&&zL(p,t),t}function QL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>tO(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function XL(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>nO(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function WL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ld(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],JI(a)),t}function ZL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ii(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],$I(a)),t}function jL(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],cO(t));const i=f(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],zI(o)),e}function Ud(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],BI(t));const i=f(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&m(e,["safetyAttributes"],YI(o));const a=f(n,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function eO(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["mask"],BI(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function tO(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],HO(t)),e}function nO(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],BO(t)),e}function iO(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const F=f(n,["responseSchema"]);F!=null&&m(e,["responseSchema"],F);const P=f(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const O=f(n,["seed"]);O!=null&&m(e,["seed"],O);const Q=f(n,["speechConfig"]);Q!=null&&m(e,["speechConfig"],Q);const z=f(n,["stopSequences"]);z!=null&&m(e,["stopSequences"],z);const ee=f(n,["temperature"]);ee!=null&&m(e,["temperature"],ee);const le=f(n,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const ae=f(n,["topK"]);ae!=null&&m(e,["topK"],ae);const N=f(n,["topP"]);if(N!=null&&m(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sO(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],We(n,i)),t}function rO(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],We(n,i)),t}function oO(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function aO(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function lO(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function uO(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);i!=null&&m(e,["imageSize"],i);const o=f(n,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const a=f(n,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function cO(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],qr(t));const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function BI(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],qr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Ld(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],qr(t));const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ii(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],qr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function fO(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],UI(n,d)),i}function dO(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],UI(n,d)),i}function hO(n,e){const t={},i=f(e,["config"]);return i!=null&&fO(n,i,t),t}function pO(n,e){const t={},i=f(e,["config"]);return i!=null&&dO(n,i,t),t}function mO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=LI(o);Array.isArray(a)&&(a=a.map(u=>Bm(u))),m(e,["models"],a)}return e}function gO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=LI(o);Array.isArray(a)&&(a=a.map(u=>zm(u))),m(e,["models"],a)}return e}function yO(n){const e={},t=f(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Bm(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["version"]);a!=null&&m(e,["version"],a);const u=f(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],PO(u));const d=f(n,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(n,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=f(n,["temperature"]);_!=null&&m(e,["temperature"],_);const T=f(n,["maxTemperature"]);T!=null&&m(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&m(e,["topP"],S);const I=f(n,["topK"]);I!=null&&m(e,["topK"],I);const k=f(n,["thinking"]);return k!=null&&m(e,["thinking"],k),e}function zm(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["versionId"]);a!=null&&m(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>NL(S))),m(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&m(e,["labels"],d);const p=f(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],kO(p));const h=f(n,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=f(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),m(e,["checkpoints"],T)}return e}function _O(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],ML(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],DL(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],iL(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function vO(n){const e={},t=f(n,["productImage"]);return t!=null&&m(e,["image"],Ii(t)),e}function TO(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","enhancePrompt"],S);const I=f(n,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),t}function EO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["source"]);o!=null&&AO(o,t);const a=f(e,["config"]);return a!=null&&TO(a,t),t}function SO(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Ud(o))),m(e,["generatedImages"],i)}return e}function AO(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Ii(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vO(d))),m(e,["instances[0]","productImages"],u)}return t}function CO(n){const e={},t=f(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Ii(t));const i=f(n,["referenceId"]);i!=null&&m(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],yO(a));const u=f(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],cL(u));const d=f(n,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function zI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function YI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function IO(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function wO(n){const e={},t=f(n,["image"]);return t!=null&&m(e,["image"],Ii(t)),e}function RO(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function bO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["source"]);o!=null&&NO(o,t);const a=f(e,["config"]);return a!=null&&RO(a,t),t}function xO(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>eO(o))),m(e,["generatedMasks"],i)}return e}function NO(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ii(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],wO(a)),t}function MO(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],PL(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function DO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],oO(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],aO(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function KI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>kL(S))),m(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function PO(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function kO(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function VO(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function UO(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function LO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","name"],We(n,i));const o=f(e,["config"]);return o!=null&&VO(o,t),t}function OO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["config"]);return o!=null&&UO(o,t),t}function FO(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=f(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&m(e,["parameters","sampleCount"],S);const I=f(n,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),t}function qO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],We(n,i));const o=f(e,["image"]);o!=null&&m(t,["instances[0]","image"],Ii(o));const a=f(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&FO(u,t),t}function GO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Ud(a))),m(e,["generatedImages"],o)}return e}function HO(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],qr(i));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function BO(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],qr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function zO(n){const e={},t=f(n,["image"]);t!=null&&m(e,["_self"],Ii(t));const i=f(n,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function YO(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Ld(t));const i=f(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function KO(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Ii(t));const i=f(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function JI(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&m(e,["encodedVideo"],qr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function $I(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],qr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JO(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function $O(n){const e={},t=f(n,["config"]);return t!=null&&JO(t,e),e}function QO(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function XO(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&QO(i,e),e}function WO(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function ZO(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),t}function jO(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],t4(u)),e}function e4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&m(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&ZO(o,e),e}function t4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function n4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function i4(n){const e={},t=f(n,["config"]);return t!=null&&n4(t,e),e}function s4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function QI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function r4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&QI(i,e),e}function o4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a4="Content-Type",l4="X-Server-Timeout",u4="User-Agent",Ym="x-goog-api-client",c4="1.34.0",f4=`google-genai-sdk/${c4}`,d4="v1beta1",h4="v1beta";class p4{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:d4,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:h4,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&m4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await LS(o),new qm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await LS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Si(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Re(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const k=JSON.parse(T);if("error"in k){const F=JSON.parse(JSON.stringify(k.error)),P=F.status,O=F.code,Q=`got status: ${P}. ${JSON.stringify(k)}`;if(O>=400&&O<600)throw new kd({message:Q,status:O})}}catch(k){if(k.name==="ApiError")throw k}u+=T;let S=-1,I=0;for(;;){S=-1,I=0;for(const P of p){const O=u.indexOf(P);O!==-1&&(S===-1||O<S)&&(S=O,I=P.length)}if(S===-1)break;const k=u.substring(0,S);u=u.substring(S+I);const F=k.trim();if(F.startsWith(d)){const P=F.substring(d.length).trim();try{const O=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new qm(O))}catch(O){throw new Error(`exception parsing stream chunk ${P}. ${O}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=f4+" "+this.clientOptions.userAgentExtra;return e[u4]=t,e[Ym]=t,e[a4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(l4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},h=this.getFileName(e),_=de("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&QI(i,T);const S=await this.fetchUploadUrl(h,d,p,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function LS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new kd({message:o,status:t}):new Error(o)}}function m4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g4="mcp_used/unknown";let y4=!1;function XI(n){for(const e of n)if(_4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return y4}function WI(n){var e;const t=(e=n[Ym])!==null&&e!==void 0?e:"";n[Ym]=(t+` ${g4}`).trimStart()}function _4(n){return n!==null&&typeof n=="object"&&n instanceof iy}function v4(n){return Si(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Re(t.listTools({cursor:o}));for(const d of u.tools)yield yield Re(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class iy{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new iy(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,p=(t=void 0,Ai(v4(_))),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),W2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function T4(n,e,t){const i=new B2;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class E4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=C4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(z=>{h=z}),T=e.callbacks,S=function(){h({})},I=this.apiClient,k={onopen:S,onmessage:z=>{T4(I,T.onmessage,z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(z){}},F=this.webSocketFactory.create(p,A4(u),k);F.connect(),await _;const Q={setup:{model:We(this.apiClient,e.model)}};return F.send(JSON.stringify(Q)),new S4(F,this.apiClient)}}class S4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=$U(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=JU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Da.PLAY)}pause(){this.sendPlaybackControl(Da.PAUSE)}stop(){this.sendPlaybackControl(Da.STOP)}resetContext(){this.sendPlaybackControl(Da.RESET_CONTEXT)}close(){this.conn.close()}}function A4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function C4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function w4(n,e,t){const i=new H2;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=WU(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class R4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new E4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&XI(e.config.tools)&&WI(T);const S=M4(T);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const x=this.apiClient.getApiKey();let U="BidiGenerateContent",L="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",L="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${U}?${L}=${x}`}let I=()=>{};const k=new Promise(x=>{I=x}),F=e.callbacks,P=function(){var x;(x=F==null?void 0:F.onopen)===null||x===void 0||x.call(F),I({})},O=this.apiClient,Q={onopen:P,onmessage:x=>{w4(O,F.onmessage,x)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(x){}},z=this.webSocketFactory.create(_,N4(S),Q);z.connect(),await k;let ee=We(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const x=this.apiClient.getProject(),U=this.apiClient.getLocation();ee=`projects/${x}/locations/${U}/`+ee}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[rd.AUDIO]}:e.config.responseModalities=[rd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const x of ae)if(this.isCallableTool(x)){const U=x;N.push(await U.tool())}else N.push(x);N.length>0&&(e.config.tools=N);const M={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=KU(this.apiClient,M):le=YU(this.apiClient,M),delete le.config,z.send(JSON.stringify(le)),new x4(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const b4={turnComplete:!0};class x4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ii(t.turns),e.isVertexAI()||(i=i.map(o=>Vd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(I4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},b4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:XU(e)}:t={realtimeInput:QU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function N4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function M4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OS=10;function FS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(qa(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function qa(n){return"callTool"in n&&typeof n.callTool=="function"}function D4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>qa(o)))!==null&&i!==void 0?i:!1}function qS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(qa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function GS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P4 extends qs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!D4(t)||FS(t.config))return await this.generateContentInternal(p);const h=qS(t);if(h.length>0){const F=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let _,T;const S=ii(p.contents),I=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:OS;let k=0;for(;k<I&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const F=_.candidates[0].content,P=[];for(const O of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(qa(O)){const z=await O.callTool(_.functionCalls);P.push(...z)}k++,T={role:"user",parts:P},p.contents=ii(p.contents),p.contents.push(F),p.contents.push(T),GS(p.config)&&(S.push(F),S.push(T))}return GS(p.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),FS(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const p=qS(t);if(p.length>0){const T=p.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Lo(Os.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>qa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&XI(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),WI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(qa(u)){const d=u,p=await d.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:OS;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,_,T){return Si(this,arguments,function*(){for(var S,I,k,F,P,O;d<a;){u&&(d++,u=!1);const le=yield Re(h.processParamsMaybeAddMcpUsage(T)),ae=yield Re(h.generateContentStreamInternal(le)),N=[],M=[];try{for(var Q=!0,z=(I=void 0,Ai(ae)),ee;ee=yield Re(z.next()),S=ee.done,!S;Q=!0){F=ee.value,Q=!1;const x=F;if(yield yield Re(x),x.candidates&&(!((P=x.candidates[0])===null||P===void 0)&&P.content)){M.push(x.candidates[0].content);for(const U of(O=x.candidates[0].content.parts)!==null&&O!==void 0?O:[])if(d<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(U.functionCall.name)){const L=yield Re(_.get(U.functionCall.name).callTool([U.functionCall]));N.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(x){I={error:x}}finally{try{!Q&&!S&&(k=z.return)&&(yield Re(k.call(z)))}finally{if(I)throw I.error}}if(N.length>0){u=!0;const x=new ru;x.candidates=[{content:{role:"user",parts:N}}],yield yield Re(x);const U=[];U.push(...M),U.push({role:"user",parts:N});const L=ii(T.contents).concat(U);T.contents=L}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=kS(this.apiClient,e);return d=de("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=US(_),S=new ru;return Object.assign(S,T),S})}else{const h=PS(this.apiClient,e);return d=de("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=VS(_),S=new ru;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=kS(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Si(this,arguments,function*(){var S,I,k,F;try{for(var P=!0,O=Ai(T),Q;Q=yield Re(O.next()),S=Q.done,!S;P=!0){F=Q.value,P=!1;const z=F,ee=US(yield Re(z.json()));ee.sdkHttpResponse={headers:z.headers};const le=new ru;Object.assign(le,ee),yield yield Re(le)}}catch(z){I={error:z}}finally{try{!P&&!S&&(k=O.return)&&(yield Re(k.call(O)))}finally{if(I)throw I.error}}})})}else{const h=PS(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return Si(this,arguments,function*(){var S,I,k,F;try{for(var P=!0,O=Ai(T),Q;Q=yield Re(O.next()),S=Q.done,!S;P=!0){F=Q.value,P=!1;const z=F,ee=VS(yield Re(z.json()));ee.sdkHttpResponse={headers:z.headers};const le=new ru;Object.assign(le,ee),yield yield Re(le)}}catch(z){I={error:z}}finally{try{!P&&!S&&(k=O.return)&&(yield Re(k.call(O)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=RL(this.apiClient,e);return d=de("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=xL(_),S=new gS;return Object.assign(S,T),S})}else{const h=wL(this.apiClient,e);return d=de("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=bL(_),S=new gS;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=qL(this.apiClient,e);return d=de("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=HL(_),S=new yS;return Object.assign(S,T),S})}else{const h=FL(this.apiClient,e);return d=de("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=GL(_),S=new yS;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=SL(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=AL(p),_=new M2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=qO(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=GO(p),_=new D2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=EO(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=SO(p),_=new P2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=bO(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=xO(p),_=new k2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=rO(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>zm(_))}else{const h=sO(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Bm(_))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=pO(this.apiClient,e);return d=de("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gO(_),S=new _S;return Object.assign(S,T),S})}else{const h=hO(this.apiClient,e);return d=de("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=mO(_),S=new _S;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=OO(this.apiClient,e);return d=de("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>zm(_))}else{const h=LO(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Bm(_))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=_L(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=TL(_),S=new vS;return Object.assign(S,T),S})}else{const h=yL(this.apiClient,e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=vL(_),S=new vS;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=pL(this.apiClient,e);return d=de("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gL(_),S=new TS;return Object.assign(S,T),S})}else{const h=hL(this.apiClient,e);return d=de("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=mL(_),S=new TS;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=oL(this.apiClient,e);return a=de("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=aL(p),_=new V2;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=$L(this.apiClient,e);return d=de("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=KL(_),S=new od;return Object.assign(S,T),S})}else{const h=JL(this.apiClient,e);return d=de("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=YL(_),S=new od;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k4 extends qs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=I2(e);return d=de("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=C2(e);return d=de("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=y2(e);return a=de("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V4(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function U4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Y4(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function L4(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],z4(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function O4(n,e){const t={},i=f(e,["config"]);return i!=null&&m(t,["config"],L4(n,i,t)),t}function F4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function q4(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function G4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function H4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function B4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],ny(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],U4(dn(k)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ae=tl(F);Array.isArray(ae)&&(ae=ae.map(N=>J4(el(N)))),m(e,["setup","tools"],ae)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],K4(P));const O=f(n,["inputAudioTranscription"]);e!==void 0&&O!=null&&m(e,["setup","inputAudioTranscription"],O);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&m(e,["setup","outputAudioTranscription"],Q);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const ee=f(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&m(e,["setup","contextWindowCompression"],ee);const le=f(n,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function z4(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],We(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],B4(o,t)),t}function Y4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],F4(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],q4(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],V4(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function K4(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function J4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],G4(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],H4(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function Q4(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=$4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class X4 extends qs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=O4(this.apiClient,e);a=de("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=Q4(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W4(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function Z4(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&W4(i,e),e}function j4(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function e3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function t3(n){const e={},t=f(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&e3(i,e),e}function n3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i3 extends qs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Lo(Os.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=j4(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Z4(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=t3(e);return a=de("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=n3(p),_=new U2;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s3 extends qs{constructor(e,t=new i3(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Lo(Os.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$O(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WO(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=XO(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=i4(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=s4(p),_=new L2;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r4(e);return a=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=o4(p),_=new O2;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=e4(e);return a=de("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=jO(p),_=new Wg;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return ZI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const r3=()=>ZI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Km(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Jm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri extends Error{}class yn extends ri{constructor(e,t,i,o){super(`${yn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Od({message:i,cause:Jm(t)});const a=t;return e===400?new ew(e,a,i,o):e===401?new tw(e,a,i,o):e===403?new nw(e,a,i,o):e===404?new iw(e,a,i,o):e===409?new sw(e,a,i,o):e===422?new rw(e,a,i,o):e===429?new ow(e,a,i,o):e>=500?new aw(e,a,i,o):new yn(e,a,i,o)}}class $m extends yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Od extends yn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class jI extends Od{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ew extends yn{}class tw extends yn{}class nw extends yn{}class iw extends yn{}class sw extends yn{}class rw extends yn{}class ow extends yn{}class aw extends yn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o3=/^[a-z][a-z0-9+.-]*:/i,a3=n=>o3.test(n);let Qm=n=>(Qm=Array.isArray,Qm(n));const l3=Qm;let u3=l3;const HS=u3;function c3(n){if(!n)return!0;for(const e in n)return!1;return!0}function f3(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const d3=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ri(`${n} must be an integer`);if(e<0)throw new ri(`${n} must be a positive integer`);return e},h3=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p3=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ma="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const g3=()=>{var n,e,t,i,o;const a=m3();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":zS(Deno.build.os),"X-Stainless-Arch":BS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":zS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":BS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=y3();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ma,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function y3(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const BS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",zS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Af;const _3=()=>Af??(Af=g3());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lw(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function T3(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return lw({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function uw(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function E3(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S3=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function om(n,e,t){return cw(),new File(n,e??"unknown_file",t)}function A3(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const C3=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",I3=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&fw(n),w3=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function R3(n,e,t){if(cw(),n=await n,I3(n))return n instanceof File?n:om([await n.arrayBuffer()],n.name);if(w3(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),om(await Xm(o),e,t)}const i=await Xm(n);if(e||(e=A3(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return om(i,e,t)}async function Xm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(fw(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(C3(n))try{for(var d=!0,p=Ai(n),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const _=o;u.push(...await Xm(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${b3(n)}`)}return u}function b3(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dw{constructor(e){this._client=e}}dw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hw(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const YS=Object.freeze(Object.create(null)),x3=(n=hw)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,T,S)=>{var I,k,F;/[?#]/.test(T)&&(o=!0);const P=i[S];let O=(o?encodeURIComponent:n)(""+P);return S!==i.length&&(P==null||typeof P=="object"&&P.toString===((F=Object.getPrototypeOf((k=Object.getPrototypeOf((I=P.hasOwnProperty)!==null&&I!==void 0?I:YS))!==null&&k!==void 0?k:YS))===null||F===void 0?void 0:F.toString))&&(O=P+"",a.push({start:_.length+T.length,length:O.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(S===i.length?"":O)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((S,I)=>{const k=" ".repeat(I.start-_),F="^".repeat(I.length);return _=I.start+I.length,S+k+F},"");throw new ri(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),Cf=x3(hw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pw extends dw{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=ld(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ri("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ri("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Cf`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Cf`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Cf`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=ld(a,["api_version"]);return this._client.get(Cf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}pw._key=Object.freeze(["interactions"]);class mw extends pw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N3(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let If;function sy(n){let e;return(If??(e=new globalThis.TextEncoder,If=e.encode.bind(e)))(n)}let wf;function KS(n){let e;return(wf??(e=new globalThis.TextDecoder,wf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?sy(e):e;this.buffer=N3([this.buffer,t]);const i=[];let o;for(;(o=M3(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(KS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=KS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Fd.NEWLINE_CHARS=new Set([`
`,"\r"]);Fd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function M3(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function D3(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ud={off:0,error:200,warn:300,info:400,debug:500},JS=(n,e,t)=>{if(n){if(f3(ud,n))return n;gn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ud))}`)}};function hu(){}function Rf(n,e,t){return!e||ud[n]>ud[t]?hu:e[n].bind(e)}const P3={error:hu,warn:hu,info:hu,debug:hu};let $S=new WeakMap;function gn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return P3;const o=$S.get(t);if(o&&o[0]===i)return o[1];const a={error:Rf("error",t,i),warn:Rf("warn",t,i),info:Rf("info",t,i),debug:Rf("debug",t,i)};return $S.set(t,[i,a]),a}const vo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?gn(i):console;function u(){return Si(this,arguments,function*(){var p,h,_,T;if(o)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var I=!0,k=Ai(k3(e,t)),F;F=yield Re(k.next()),p=F.done,!p;I=!0){T=F.value,I=!1;const P=T;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Re(JSON.parse(P.data))}catch(O){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),O}}}catch(P){h={error:P}}finally{try{!I&&!p&&(_=k.return)&&(yield Re(_.call(k)))}finally{if(h)throw h.error}}S=!0}catch(P){if(Km(P))return yield Re(void 0);throw P}finally{S||t.abort()}})}return new Pa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return Si(this,arguments,function*(){var p,h,_,T;const S=new Fd,I=uw(e);try{for(var k=!0,F=Ai(I),P;P=yield Re(F.next()),p=P.done,!p;k=!0){T=P.value,k=!1;const O=T;for(const Q of S.decode(O))yield yield Re(Q)}}catch(O){h={error:O}}finally{try{!k&&!p&&(_=F.return)&&(yield Re(_.call(F)))}finally{if(h)throw h.error}}for(const O of S.flush())yield yield Re(O)})}function u(){return Si(this,arguments,function*(){var p,h,_,T;if(o)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var I=!0,k=Ai(a()),F;F=yield Re(k.next()),p=F.done,!p;I=!0){T=F.value,I=!1;const P=T;S||P&&(yield yield Re(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!I&&!p&&(_=k.return)&&(yield Re(_.call(k)))}finally{if(h)throw h.error}}S=!0}catch(P){if(Km(P))return yield Re(void 0);throw P}finally{S||t.abort()}})}return new Pa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Pa(()=>o(e),this.controller,this.client),new Pa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return lw({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=sy(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function k3(n,e){return Si(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ri("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ri("Attempted to iterate over a response with no body");const d=new U3,p=new Fd,h=uw(n.body);try{for(var _=!0,T=Ai(V3(h)),S;S=yield Re(T.next()),i=S.done,!i;_=!0){u=S.value,_=!1;const I=u;for(const k of p.decode(I)){const F=d.decode(k);F&&(yield yield Re(F))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=T.return)&&(yield Re(a.call(T)))}finally{if(o)throw o.error}}for(const I of p.flush()){const k=d.decode(I);k&&(yield yield Re(k))}})}function V3(n){return Si(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,p=Ai(n),h;h=yield Re(p.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?sy(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let I;for(;(I=D3(u))!==-1;)yield yield Re(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!d&&!t&&(o=p.return)&&(yield Re(o.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Re(u))})}class U3{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=L3(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function L3(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function O3(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return gn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Pa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return gn(n).debug(`[${i}] response parsed`,vo({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ry extends Promise{constructor(e,t,i=O3){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new ry(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gw=Symbol("brand.privateNullableHeaders");function*F3(n){if(!n)return;if(gw in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():HS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=HS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const ou=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of F3(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[gw]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const am=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=f2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yw;class qd{constructor(e){var t,i,o,a,u,d,p,{baseURL:h=am("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=am("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=ld(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:qd.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const k="warn";this.logLevel=k,this.logLevel=(u=(a=JS(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:JS(am("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=I.fetch)!==null&&p!==void 0?p:v3(),this.encoder=S3,this._options=I,this.apiKey=_,this.apiVersion=T,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=ou([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return ou([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ou([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new ri(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ma}`}defaultIdempotencyKey(){return`stainless-node-retry-${r3()}`}makeStatusError(e,t,i,o){return yn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=a3(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return c3(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new ry(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,p=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=p),await this.prepareOptions(d);const{req:h,url:_,timeout:T}=await this.buildRequest(d,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(gn(this).debug(`[${S}] sending request`,vo({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new $m;const F=new AbortController,P=await this.fetchWithTimeout(_,h,T,F).catch(Jm),O=Date.now();if(P instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new $m;const ee=Km(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return gn(this).info(`[${S}] connection ${ee?"timed out":"failed"} - ${z}`),gn(this).debug(`[${S}] connection ${ee?"timed out":"failed"} (${z})`,vo({retryOfRequestLogID:i,url:_,durationMs:O-k,message:P.message})),this.retryRequest(d,t,i??S);throw gn(this).info(`[${S}] connection ${ee?"timed out":"failed"} - error; no more retries left`),gn(this).debug(`[${S}] connection ${ee?"timed out":"failed"} (error; no more retries left)`,vo({retryOfRequestLogID:i,url:_,durationMs:O-k,message:P.message})),ee?new jI:new Od({cause:P})}const Q=`[${S}${I}] ${h.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${O-k}ms`;if(!P.ok){const z=await this.shouldRetry(P);if(t&&z){const x=`retrying, ${t} attempts remaining`;return await E3(P.body),gn(this).info(`${Q} - ${x}`),gn(this).debug(`[${S}] response error (${x})`,vo({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:O-k})),this.retryRequest(d,t,i??S,P.headers)}const ee=z?"error; no more retries left":"error; not retryable";gn(this).info(`${Q} - ${ee}`);const le=await P.text().catch(x=>Jm(x).message),ae=h3(le),N=ae?void 0:le;throw gn(this).debug(`[${S}] response error (${ee})`,vo({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-k})),this.makeStatusError(P.status,ae,N,P.headers)}return gn(this).info(Q),gn(this).debug(`[${S}] response start`,vo({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:O-k})),{response:P,options:d,controller:F,requestLogID:S,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,p=ld(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),p);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const p=o==null?void 0:o.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await p3(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:p,query:h,defaultBaseURL:_}=u,T=this.buildURL(p,h,_);"timeout"in u&&d3("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=ou([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),_3()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=ou([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:T3(e)}:this.encoder({body:e,headers:i})}}qd.DEFAULT_TIMEOUT=6e4;class Wt extends qd{constructor(){super(...arguments),this.interactions=new mw(this)}}yw=Wt;Wt.GeminiNextGenAPIClient=yw;Wt.GeminiNextGenAPIClientError=ri;Wt.APIError=yn;Wt.APIConnectionError=Od;Wt.APIConnectionTimeoutError=jI;Wt.APIUserAbortError=$m;Wt.NotFoundError=iw;Wt.ConflictError=sw;Wt.RateLimitError=ow;Wt.BadRequestError=ew;Wt.AuthenticationError=tw;Wt.InternalServerError=aw;Wt.PermissionDeniedError=nw;Wt.UnprocessableEntityError=rw;Wt.toFile=R3;Wt.Interactions=mw;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q3(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function G3(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function H3(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function B3(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function z3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Y3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec"],QS(I))}else if(o==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec"],QS(I))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(p==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function K3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&i6(a);const u=f(n,["config"]);return u!=null&&z3(u,t),t}function J3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&s6(a,t,e);const u=f(n,["config"]);return u!=null&&Y3(u,t,e),t}function $3(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function Q3(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function X3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function W3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function Z3(n,e){const t={},i=f(n,["config"]);return i!=null&&X3(i,t),t}function j3(n,e){const t={},i=f(n,["config"]);return i!=null&&W3(i,t),t}function e6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>_w(d))),m(t,["tuningJobs"],u)}return t}function t6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Wm(d))),m(t,["tuningJobs"],u)}return t}function n6(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["model"],i);const o=f(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function i6(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["examples","examples"],o)}return t}function s6(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function _w(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["state"]);a!=null&&m(t,["state"],kI(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&m(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&m(t,["tunedModel"],n6(S)),t}function Wm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["state"]);a!=null&&m(t,["state"],kI(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&m(t,["error"],_);const T=f(n,["description"]);T!=null&&m(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&m(t,["baseModel"],S);const I=f(n,["tunedModel"]);I!=null&&m(t,["tunedModel"],I);const k=f(n,["preTunedModel"]);k!=null&&m(t,["preTunedModel"],k);const F=f(n,["supervisedTuningSpec"]);F!=null&&m(t,["supervisedTuningSpec"],F);const P=f(n,["preferenceOptimizationSpec"]);P!=null&&m(t,["preferenceOptimizationSpec"],P);const O=f(n,["tuningDataStats"]);O!=null&&m(t,["tuningDataStats"],O);const Q=f(n,["encryptionSpec"]);Q!=null&&m(t,["encryptionSpec"],Q);const z=f(n,["partnerModelTuningSpec"]);z!=null&&m(t,["partnerModelTuningSpec"],z);const ee=f(n,["customBaseModel"]);ee!=null&&m(t,["customBaseModel"],ee);const le=f(n,["experiment"]);le!=null&&m(t,["experiment"],le);const ae=f(n,["labels"]);ae!=null&&m(t,["labels"],ae);const N=f(n,["outputUri"]);N!=null&&m(t,["outputUri"],N);const M=f(n,["pipelineJob"]);M!=null&&m(t,["pipelineJob"],M);const x=f(n,["serviceAccount"]);x!=null&&m(t,["serviceAccount"],x);const U=f(n,["tunedModelDisplayName"]);U!=null&&m(t,["tunedModelDisplayName"],U);const L=f(n,["veoTuningSpec"]);return L!=null&&m(t,["veoTuningSpec"],L),t}function r6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(n,["done"]);u!=null&&m(t,["done"],u);const d=f(n,["error"]);return d!=null&&m(t,["error"],d),t}function QS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o6 extends qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lo(Os.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Fm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Q3(e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Wm(_))}else{const h=$3(e);return d=de("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>_w(_))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=j3(e);return d=de("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=t6(_),S=new ES;return Object.assign(S,T),S})}else{const h=Z3(e);return d=de("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=e6(_),S=new ES;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=G3(e);return d=de("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=B3(_),S=new SS;return Object.assign(S,T),S})}else{const h=q3(e);return d=de("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=H3(_),S=new SS;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=J3(e,e);return a=de("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>Wm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=K3(e);return a=de("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>r6(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const l6=1024*1024*8,u6=3,c6=1e3,f6=2,cd="x-goog-upload-status";async function d6(n,e,t){var i;const o=await vw(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[cd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function h6(n,e,t){var i;const o=await vw(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[cd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=bI(a),d=new Zg;return Object.assign(d,u),d}async function vw(n,e,t){var i,o;let a=0,u=0,d=new qm(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(l6,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let T=0,S=c6;for(;T<u6&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[cd]));)T++,await m6(S),S=S*f6;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[cd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function p6(n){return{size:n.size,type:n.type}}function m6(n){return new Promise(e=>setTimeout(e,n))}class g6{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await d6(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await h6(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await p6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y6{create(e,t,i){return new _6(e,t,i)}}class _6{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XS="x-goog-api-key";class v6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(XS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(XS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T6="gl-node/";class E6{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Wt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=m2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new v6(this.apiKey);this.apiClient=new p4({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:T6+"web",uploader:new g6,downloader:new a6}),this.models=new P4(this.apiClient),this.live=new R4(this.apiClient,o,new y6),this.batches=new zV(this.apiClient),this.chats=new IU(this.models,this.apiClient),this.caches=new SU(this.apiClient),this.files=new VU(this.apiClient),this.operations=new k4(this.apiClient),this.authTokens=new X4(this.apiClient),this.tunings=new o6(this.apiClient),this.fileSearchStores=new s3(this.apiClient)}}const lm={},WS=(lm==null?void 0:lm.GEMINI_API_KEY)||void 0||void 0,S6=()=>WS?new E6({apiKey:WS}):(console.warn("API Key is missing. AI features will not work."),null),ZS=S6(),Gd=()=>{if(!ZS)throw new Error("API Key must be set in .env to use AI features.");return ZS.models},A6=async(n,e,t)=>{try{const i=t.map(u=>{var d;return{id:u.id,name:u.name,role:u.role,company:u.company,tags:u.tags,notes:u.notes,lastInteraction:(d=u.interactions)!=null&&d[0]?`${u.interactions[0].date} (${u.interactions[0].title})`:"None"}}),o=`
      You are NetworkAI, a personal networking assistant.
      
      **Current Date**: ${new Date().toLocaleDateString()}
      
      **Your Knowledge Base (User's Contacts)**: 
      ${JSON.stringify(i)}
      
      **Strict Rules**:
      1. You must answer questions **ONLY** based on the contact data provided above. Do not invent or hallucinate contacts.
      2. If the user asks about someone not in the list, say you couldn't find them in the database.
      3. Provide 3 relevant follow-up questions suggestions based on the context of your answer.
      4. If relevant, return the IDs of the contacts mentioned in your answer.
      
      **Response Format**:
      Return a JSON object with this structure:
      {
        "answer": "Your natural language response here (in Traditional Chinese)",
        "suggestedQuestions": ["Question 1", "Question 2", "Question 3"],
        "relevantContactIds": ["id1", "id2"] (or empty array)
      }
    `,a=await Gd().generateContent({model:"gemini-2.0-flash-exp",contents:n.map(u=>({role:u.role==="user"?"user":"model",parts:[{text:u.text}]})).concat([{role:"user",parts:[{text:e}]}]),config:{systemInstruction:o,responseMimeType:"application/json",responseSchema:{type:Tt.OBJECT,properties:{answer:{type:Tt.STRING},suggestedQuestions:{type:Tt.ARRAY,items:{type:Tt.STRING}},relevantContactIds:{type:Tt.ARRAY,items:{type:Tt.STRING}}},required:["answer","suggestedQuestions"]}}});return JSON.parse(a.text||"{}")}catch(i){return console.error("Gemini API Error:",i),{answer:"",suggestedQuestions:[],relevantContactIds:[]}}},C6=async(n,e)=>{try{const t=await Gd().generateContent({model:"gemini-2.0-flash-exp",contents:[{parts:[{inlineData:{data:n.split(",")[1],mimeType:e}},{text:"Extract contact information from this business card. Return the name, role/title, company name, phone number, and email address."}]}],config:{responseMimeType:"application/json",responseSchema:{type:Tt.OBJECT,properties:{name:{type:Tt.STRING},role:{type:Tt.STRING},company:{type:Tt.STRING},phone:{type:Tt.STRING},email:{type:Tt.STRING}},required:["name","role","company","phone","email"]}}});return JSON.parse(t.text)}catch(t){throw console.error("OCR Error:",t),t}},I6=async(n,e)=>{try{const t=`
       3 
      
      
      ${n.name}
      ${n.role}
      ${n.company}
      ${n.notes}
      
      
      ${e.map(o=>`- ${o.date} [${o.type}] ${o.title}: ${o.description}`).join(`
`)}
      
      
    `,i=await Gd().generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:t}]}],config:{systemInstruction:" AI  JSON  'topic' ()  'reason' ()",responseMimeType:"application/json",responseSchema:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{topic:{type:Tt.STRING},reason:{type:Tt.STRING}},required:["topic","reason"]}}}});return JSON.parse(i.text||"[]")}catch(t){return console.error("Suggested Topics Error:",t),[]}},w6=async n=>{try{const e=`
      LinkedIn  Facebook${n}
      
      
      1. ****
      2. ****
      3. ****
      4. ****
      5. ** ( Facebook)** Facebook
      
      ......
    `;return(await Gd().generateContent({model:"gemini-2.0-flash-exp",contents:[{role:"user",parts:[{text:e}]}],config:{tools:[{googleSearch:{}}],systemInstruction:"",temperature:.5}})).text||""}catch(e){return console.error("Profile Summary Error:",e),""}},R6=({user:n,onLogout:e,onNavigateHome:t,onNavigate:i})=>{const[o,a]=Ee.useState([]);Ee.useEffect(()=>{if(n.uid){const O=RI(n.uid,Q=>{a(Q)});return()=>O()}},[n.uid]);const[u,d]=Ee.useState([{role:"model",text:"Hello! ",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}]),[p,h]=Ee.useState(["",""," VIP "]),[_,T]=Ee.useState(""),[S,I]=Ee.useState(!1),k=Ee.useRef(null);Ee.useEffect(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[u,S]);const F=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),P=async O=>{const Q=O||_;if(!Q.trim()||S)return;const z={role:"user",text:Q,time:F()};d(ee=>[...ee,z]),T(""),I(!0);try{const ee=await A6(u,Q,o),le=ee.relevantContactIds?o.filter(N=>ee.relevantContactIds.includes(N.id)):[],ae={role:"model",text:ee.answer,time:F(),contacts:le};d(N=>[...N,ae]),ee.suggestedQuestions&&ee.suggestedQuestions.length>0&&h(ee.suggestedQuestions)}catch{d(le=>[...le,{role:"model",text:"",time:F()}])}finally{I(!1)}};return w.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] dark:bg-slate-950",children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-4 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-100 dark:border-slate-800",children:[w.jsx("button",{onClick:t,className:"text-slate-800 dark:text-white",children:w.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"chevron_left"})}),w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("h1",{className:"text-base font-bold text-slate-900 dark:text-white",children:"Networking Assistant"}),w.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[w.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),w.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Online"})]})]}),w.jsx("button",{className:"text-slate-800 dark:text-white",children:w.jsx("span",{className:"material-symbols-outlined",children:"more_horiz"})})]}),w.jsxs("div",{ref:k,className:"flex-1 overflow-y-auto px-4 pb-44 no-scrollbar",children:[w.jsx("div",{className:"flex justify-center my-6",children:w.jsx("span",{className:"text-[11px] font-bold text-slate-300 dark:text-slate-600 uppercase tracking-widest bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-lg",children:"Today"})}),w.jsxs("div",{className:"flex flex-col gap-6",children:[u.map((O,Q)=>w.jsxs("div",{className:`flex flex - col ${O.role==="user"?"items-end":"items-start"} `,children:[w.jsxs("div",{className:`flex items - end gap - 2.5 max - w - [90 %] ${O.role==="user"?"flex-row-reverse":"flex-row"} `,children:[O.role==="model"&&w.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden shrink-0 border border-slate-100",children:w.jsx("img",{src:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop",alt:"AI"})}),w.jsxs("div",{className:"flex flex-col gap-1.5",children:[w.jsx("div",{className:`px - 4 py - 3 rounded - [20px] text - [15px] leading - relaxed shadow - sm ${O.role==="user"?"bg-primary text-white rounded-br-none":"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 border border-slate-50 dark:border-slate-700 rounded-bl-none"} `,children:O.text}),O.role==="user"&&w.jsxs("span",{className:"text-[10px] text-slate-400 font-medium pr-1",children:["Read ",O.time]})]})]}),O.contacts&&O.contacts.length>0&&w.jsxs("div",{className:"w-full max-w-[90%] mt-3 flex flex-col gap-2 ml-11",children:[O.contacts.map(z=>w.jsxs("div",{onClick:()=>i(Le.CONTACT_DETAIL,z),className:"bg-white dark:bg-slate-800 rounded-2xl p-3 flex items-center justify-between border border-slate-50 dark:border-slate-700 shadow-sm hover:border-primary/30 transition-all cursor-pointer",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:z.avatar,className:"w-11 h-11 rounded-full object-cover",alt:z.name}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:z.name}),w.jsx("p",{className:"text-slate-400 text-[11px] mt-0.5",children:z.role})]})]}),w.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-50 dark:bg-slate-700 flex items-center justify-center text-slate-300",children:w.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})})]},z.id)),w.jsxs("button",{className:"flex items-center justify-end gap-1 text-primary text-[13px] font-bold mt-2 pr-2 hover:underline",children:["Explore all ",O.contacts.length," profiles ",w.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_right_alt"})]})]})]},Q)),S&&w.jsxs("div",{className:"flex items-end gap-2.5",children:[w.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden shrink-0 border border-slate-100",children:w.jsx("img",{src:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop",alt:"AI"})}),w.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl px-4 py-3 shadow-sm border border-slate-50 dark:border-slate-700 rounded-bl-none",children:w.jsxs("div",{className:"flex gap-1",children:[w.jsx("div",{className:"w-1.5 h-1.5 bg-primary/40 rounded-full animate-bounce"}),w.jsx("div",{className:"w-1.5 h-1.5 bg-primary/40 rounded-full animate-bounce [animation-delay:0.2s]"}),w.jsx("div",{className:"w-1.5 h-1.5 bg-primary/40 rounded-full animate-bounce [animation-delay:0.4s]"})]})})]})]})]}),w.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-[480px] mx-auto bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-t border-slate-100 dark:border-slate-800 z-50",children:[w.jsx("div",{className:"flex gap-2 px-4 py-3 overflow-x-auto no-scrollbar",children:p.map((O,Q)=>w.jsx("button",{onClick:()=>P(O),className:"flex-none px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-primary text-[13px] font-bold rounded-xl hover:bg-primary hover:text-white transition-all whitespace-nowrap border border-blue-100 dark:border-blue-800",children:O},Q))}),w.jsxs("div",{className:"flex items-center gap-3 px-4 pb-6 pt-1",children:[w.jsx("button",{className:"w-11 h-11 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-400 hover:text-primary transition-colors shrink-0",children:w.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})}),w.jsxs("div",{className:"relative flex-1",children:[w.jsx("input",{type:"text",placeholder:"Ask about your network..",className:"w-full h-11 bg-slate-100 dark:bg-slate-800 border-none rounded-full px-5 pr-11 text-sm text-slate-800 dark:text-white placeholder:text-slate-400 focus:ring-2 focus:ring-primary/20 transition-all",value:_,onChange:O=>T(O.target.value),onKeyDown:O=>O.key==="Enter"&&P()}),w.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:w.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"mic"})})]}),w.jsx("button",{onClick:()=>P(),disabled:!_.trim()||S,className:`w - 11 h - 11 rounded - full flex items - center justify - center transition - all shrink - 0 ${_.trim()?"bg-primary text-white shadow-lg shadow-primary/30 active:scale-95":"bg-slate-100 dark:bg-slate-800 text-slate-300"} `,children:w.jsx("span",{className:"material-symbols-outlined text-[22px]",children:"send"})})]}),w.jsxs("div",{className:"flex items-center justify-center gap-1.5 pb-4 opacity-30",children:[w.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"lock"}),w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Personal Context Encrypted"})]})]})]})},b6=({contact:n,userId:e,onBack:t,onNavigate:i,onAddLog:o})=>{const a=!n,[u,d]=Ee.useState(""),[p,h]=Ee.useState((n==null?void 0:n.name)||""),[_,T]=Ee.useState((n==null?void 0:n.role)||""),[S,I]=Ee.useState((n==null?void 0:n.company)||""),[k,F]=Ee.useState((n==null?void 0:n.phone)||""),[P,O]=Ee.useState((n==null?void 0:n.email)||""),[Q,z]=Ee.useState((n==null?void 0:n.birthday)||""),[ee,le]=Ee.useState((n==null?void 0:n.linkedin)||""),[ae,N]=Ee.useState((n==null?void 0:n.facebook)||""),[M,x]=Ee.useState((n==null?void 0:n.notes)||""),[U,L]=Ee.useState({linkedin:!1,facebook:!1}),[H,D]=Ee.useState((n==null?void 0:n.photos)||[]),Ve=Ee.useRef(null),[ft,Z]=Ee.useState((n==null?void 0:n.tags)||[]),[ue,ve]=Ee.useState(["","","","VIP"]),[Ye,$e]=Ee.useState(!1),[G,ie]=Ee.useState(""),[fe,pe]=Ee.useState([]),[we,xe]=Ee.useState(!1),[Ue,Et]=Ee.useState(!1),[tt,oi]=Ee.useState(null),[os,as]=Ee.useState(!1),Hn=Ee.useRef(null),_n=Ee.useRef(null),Hs=Ee.useRef(null),[ls,us]=Ee.useState(!1),[Zt,dt]=Ee.useState({type:"meeting",date:new Date().toISOString().split("T")[0],title:"",description:""}),[pt,wi]=Ee.useState((n==null?void 0:n.interactions)||[]),il=()=>{if(!Zt.title||!Zt.date)return alert("");const j={id:Date.now().toString(),...Zt,timeLabel:""};wi([j,...pt]),us(!1),dt({type:"meeting",date:new Date().toISOString().split("T")[0],title:"",description:""})},Oo=j=>{var Tn;const _e=(Tn=j.target.files)==null?void 0:Tn[0];if(!_e)return;const Ze=new FileReader;Ze.onloadend=()=>{const Kt=Ze.result;oi(Kt),Mt(Kt)},Ze.readAsDataURL(_e),j.target.value=""},Bt=async(j=!1)=>{if(!e)return j||alert(" (User ID missing)"),!1;if(!p.trim())return j&&a?!0:(j||alert(""),!1);try{const _e={name:p,role:_,company:S,phone:k,email:P,birthday:Q,linkedin:ee,facebook:ae,notes:M,tags:ft,photos:H,interactions:pt,avatar:(n==null?void 0:n.avatar)||null,initials:p?p.charAt(0).toUpperCase():"?",updatedAt:new Date().toISOString()};return a?(await l2(e,_e),j||o({action:"",contactName:p||"",type:"create",details:` ${p} `})):(await u2(e,n.id,_e),j||o({action:"",contactName:p||"",type:"update",details:` ${p} `})),!0}catch(_e){if(console.error("Save failed:",_e),!j){let Ze="";_e.code==="permission-denied"?Ze="":_e.message&&(Ze=`: ${_e.message}`),alert(Ze)}return!1}},cs=async()=>{await Bt(!1)&&t()},Gr=async()=>{await Bt(!0),t()},Ri=async j=>{await Bt(!0),i(j)},bi=j=>{Z(_e=>_e.includes(j)?_e.filter(Ze=>Ze!==j):[..._e,j])},Fo=()=>{const j=G.trim();j&&(ue.includes(j)||ve(_e=>[..._e,j]),ft.includes(j)||Z(_e=>[..._e,j]),ie(""),$e(!1))},qo=j=>{const _e=j.target.files;if(!_e)return;const Ze=5-H.length;Array.from(_e).slice(0,Ze).forEach(Kt=>{const ai=new FileReader;ai.onloadend=()=>{D(At=>{const Bn=[...At,ai.result].slice(0,5);return o({action:"",contactName:p||"",type:"photo",details:` ${p||""} `}),Bn})},ai.readAsDataURL(Kt)})},Hr=async()=>{if(!p)return alert("");xe(!0);try{const j=await I6({name:p,role:_,company:S,notes:M},pt);pe(j),o({action:"AI ",contactName:p,type:"interaction",details:" AI "})}catch(j){console.error(j)}finally{xe(!1)}},Br=async j=>{const _e=j==="linkedin"?ee:ae;if(!_e)return alert(` ${j==="linkedin"?"LinkedIn":"Facebook"} `);L(Ze=>({...Ze,[j]:!0}));try{const Ze=await w6(_e),Tn=j==="linkedin"?"LinkedIn ":"Facebook ";x(Kt=>Kt?`${Kt}

${Tn}
${Ze}`:`${Tn}
${Ze}`),o({action:"AI ",contactName:p,type:"interaction",details:` ${Tn} `})}catch(Ze){console.error(Ze),alert("")}finally{L(Ze=>({...Ze,[j]:!1}))}};Ee.useEffect(()=>{let j=null;return Ue&&navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(_e=>{j=_e,Hn.current&&(Hn.current.srcObject=_e)}),()=>j==null?void 0:j.getTracks().forEach(_e=>_e.stop())},[Ue]);const Mn=()=>{var j;if(Hn.current&&_n.current){const _e=_n.current,Ze=Hn.current;_e.width=Ze.videoWidth,_e.height=Ze.videoHeight,(j=_e.getContext("2d"))==null||j.drawImage(Ze,0,0);const Tn=_e.toDataURL("image/jpeg");oi(Tn),Et(!1)}},Mt=async j=>{if(j){as(!0);try{const _e=await C6(j,"image/jpeg");_e.name&&h(_e.name),_e.role&&T(_e.role),_e.company&&I(_e.company),_e.phone&&F(_e.phone),_e.email&&O(_e.email)}catch(_e){console.error(_e),alert("")}finally{as(!1)}}},vn=()=>w.jsxs("div",{className:"flex flex-col gap-6",children:[w.jsxs("section",{className:"bg-white dark:bg-slate-800 rounded-3xl p-5 border border-slate-100 dark:border-slate-700 shadow-sm",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white text-sm flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-primary",children:"badge"}),""]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"file",accept:"image/*",hidden:!0,ref:Hs,onChange:Oo}),w.jsx("button",{onClick:()=>{var j;return(j=Hs.current)==null?void 0:j.click()},className:"text-[11px] font-bold text-slate-600 dark:text-slate-300 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 rounded-lg",children:""}),w.jsx("button",{onClick:()=>Et(!0),className:"text-[11px] font-bold text-primary px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:""})]})]}),w.jsxs("div",{className:"aspect-[1.6/1] border-2 border-dashed border-slate-100 dark:border-slate-700 rounded-2xl flex items-center justify-center overflow-hidden relative group",children:[tt?w.jsx("img",{src:tt,className:"w-full h-full object-contain"}):w.jsx("span",{className:"material-symbols-outlined text-slate-200 text-4xl",children:"add_a_photo"}),tt&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{oi(null)},className:"absolute top-2 right-2 w-8 h-8 bg-black/50 rounded-full text-white flex items-center justify-center hover:bg-black/70 transition-colors",title:"",children:w.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})}),!os&&w.jsxs("button",{onClick:()=>tt&&Mt(tt),className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-primary hover:bg-blue-600 text-white px-5 py-2.5 rounded-full font-bold text-sm shadow-lg transition-transform active:scale-95",children:[w.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"document_scanner"}),""]})]})]}),os&&w.jsxs("div",{className:"mt-3 text-center text-xs text-primary font-bold animate-pulse flex items-center justify-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"progress_activity"}),"AI ..."]})]}),w.jsxs("section",{children:[w.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[w.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white text-sm flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"photo_library"})," (",H.length,"/5)"]}),w.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,ref:Ve,onChange:qo})]}),w.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 border border-slate-100 dark:border-slate-700 grid grid-cols-3 gap-3",children:[H.map((j,_e)=>w.jsx("div",{className:"aspect-square rounded-xl overflow-hidden border border-slate-100",children:w.jsx("img",{src:j,className:"w-full h-full object-cover"})},_e)),H.length<5&&w.jsx("button",{onClick:()=>{var j;return(j=Ve.current)==null?void 0:j.click()},className:"aspect-square rounded-xl border-2 border-dashed border-slate-100 flex items-center justify-center text-slate-300",children:w.jsx("span",{className:"material-symbols-outlined",children:"add_photo_alternate"})})]})]}),w.jsxs("section",{children:[w.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 px-1",children:""}),w.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 border border-slate-100 dark:border-slate-700 flex flex-wrap gap-2",children:[ue.map(j=>w.jsx("button",{onClick:()=>bi(j),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${ft.includes(j)?"bg-primary text-white shadow-md":"bg-slate-50 dark:bg-slate-700 text-slate-400"}`,children:j},j)),Ye?w.jsxs("div",{className:"flex gap-1",children:[w.jsx("input",{autoFocus:!0,className:"w-20 px-2 py-1 text-xs border rounded-lg focus:ring-0",value:G,onChange:j=>ie(j.target.value),onKeyDown:j=>j.key==="Enter"&&Fo()}),w.jsx("button",{onClick:Fo,className:"text-primary material-symbols-outlined text-sm",children:"check"})]}):w.jsx("button",{onClick:()=>$e(!0),className:"px-3 py-1.5 rounded-full border border-dashed border-slate-200 text-slate-300 text-xs font-bold",children:""})]})]}),w.jsxs("section",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-[32px] p-6 shadow-xl relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-40 h-40 bg-white/10 rounded-full blur-3xl"}),w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("h4",{className:"font-bold text-white text-sm flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-indigo-200",children:"auto_awesome"}),"AI "]}),w.jsx("button",{onClick:Hr,className:"bg-white/20 hover:bg-white/30 text-white text-[10px] font-bold px-3 py-1 rounded-full backdrop-blur-md transition-all",children:we?"...":""})]}),fe.length>0?w.jsx("div",{className:"flex flex-col gap-3",children:fe.map((j,_e)=>w.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-2xl p-3.5 backdrop-blur-sm",children:[w.jsx("p",{className:"text-white text-sm font-bold leading-snug",children:j.topic}),w.jsxs("p",{className:"text-white/60 text-[10px] mt-1.5 flex items-center gap-1",children:[w.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"lightbulb"}),j.reason]})]},_e))}):w.jsxs("div",{className:"py-4 text-center",children:[w.jsx("p",{className:"text-white/70 text-xs mb-4",children:" AI "}),w.jsx("button",{onClick:Hr,className:"bg-white text-indigo-600 px-6 py-2 rounded-full text-xs font-bold shadow-lg active:scale-95 transition-all",children:""})]})]}),w.jsxs("section",{className:"flex flex-col gap-4",children:[w.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm px-1",children:""}),w.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 divide-y divide-slate-50 dark:divide-slate-700",children:[w.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""}),w.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0",value:k,onChange:j=>F(j.target.value),placeholder:"09xx-xxx-xxx"})]}),w.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""}),w.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0",value:P,onChange:j=>O(j.target.value),placeholder:"example@mail.com"})]}),w.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""}),w.jsx("input",{type:"date",className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0",value:Q,onChange:j=>z(j.target.value)})]}),w.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[w.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex justify-between items-center",children:["LinkedIn",w.jsxs("button",{onClick:()=>Br("linkedin"),disabled:U.linkedin,className:"flex items-center gap-1 text-[10px] text-primary bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800 transition-colors disabled:opacity-50",children:[w.jsx("span",{className:"material-symbols-outlined text-[12px]",children:U.linkedin?"hourglass_empty":"auto_awesome"}),U.linkedin?"...":"AI "]})]}),w.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0 placeholder:text-slate-300",value:ee,onChange:j=>le(j.target.value),placeholder:"https://linkedin.com/in/..."})]}),w.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[w.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex justify-between items-center",children:["Facebook",w.jsxs("button",{onClick:()=>Br("facebook"),disabled:U.facebook,className:"flex items-center gap-1 text-[10px] text-blue-600 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800 transition-colors disabled:opacity-50",children:[w.jsx("span",{className:"material-symbols-outlined text-[12px]",children:U.facebook?"hourglass_empty":"auto_awesome"}),U.facebook?"...":"AI "]})]}),w.jsx("input",{className:"w-full bg-transparent border-none p-0 text-sm font-medium text-slate-800 dark:text-white focus:ring-0 placeholder:text-slate-300",value:ae,onChange:j=>N(j.target.value),placeholder:"https://facebook.com/..."})]}),w.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[w.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""}),w.jsx("textarea",{className:"w-full bg-transparent border-none p-0 text-sm text-slate-600 dark:text-slate-300 resize-none min-h-[80px] focus:ring-0",value:M,onChange:j=>x(j.target.value),placeholder:"..."})]})]})]})]});return w.jsxs("div",{className:"flex flex-col h-full bg-[#f8fafc] dark:bg-slate-950 pb-24 overflow-y-auto no-scrollbar relative",children:[Ue&&w.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col",children:[w.jsx("video",{ref:Hn,autoPlay:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover opacity-80"}),w.jsx("canvas",{ref:_n,className:"hidden"}),w.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-between p-8 text-white",children:[w.jsx("button",{onClick:()=>Et(!1),className:"self-start w-10 h-10 rounded-full bg-white/20 flex items-center justify-center backdrop-blur-md",children:w.jsx("span",{className:"material-symbols-outlined",children:"close"})}),w.jsx("div",{className:"w-[85%] aspect-[1.6/1] border-2 border-white/50 rounded-2xl shadow-[0_0_0_1000px_rgba(0,0,0,0.6)]"}),w.jsx("button",{onClick:Mn,className:"w-20 h-20 rounded-full border-4 border-white p-1 mb-8",children:w.jsx("div",{className:"w-full h-full rounded-full bg-white"})})]})]}),w.jsxs("div",{className:"flex items-center justify-between px-4 py-4 bg-white dark:bg-slate-900 sticky top-0 z-50 border-b border-slate-50 dark:border-slate-800",children:[w.jsx("button",{onClick:Gr,className:"text-slate-800 dark:text-white",children:w.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),w.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:a?"":""}),w.jsx("button",{onClick:cs,className:"text-primary font-bold text-sm px-4 py-1.5 bg-blue-50 dark:bg-blue-900/20 rounded-full",children:""})]}),w.jsxs("div",{className:"flex flex-col items-center pt-8 pb-6 px-4 bg-white dark:bg-slate-900",children:[w.jsx("div",{className:"relative mb-6",children:w.jsx("img",{src:(n==null?void 0:n.avatar)||`https://ui-avatars.com/api/?name=${p||"?"}&background=random`,className:"w-32 h-32 rounded-[40px] object-cover border-4 border-white shadow-xl",alt:"Avatar"})}),w.jsx("input",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2 text-center bg-transparent border-none focus:ring-0 p-0 w-full",value:p,onChange:j=>h(j.target.value),placeholder:"..."}),w.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-slate-400 text-sm w-full",children:[w.jsx("input",{className:"bg-transparent border-none focus:ring-0 p-0 text-right flex-1 min-w-0",value:_,onChange:j=>T(j.target.value),placeholder:""}),w.jsx("span",{className:"text-slate-300",children:"@"}),w.jsx("input",{className:"bg-transparent border-none focus:ring-0 p-0 text-left flex-1 min-w-0",value:S,onChange:j=>I(j.target.value),placeholder:""})]})]}),w.jsx("div",{className:"flex px-4 border-b border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-[60px] z-40",children:["",""].map(j=>w.jsx("button",{onClick:()=>d(j),className:`flex-1 py-4 text-sm font-bold border-b-2 transition-all ${u===j?"border-primary text-primary":"border-transparent text-slate-400"}`,children:j},j))}),w.jsx("div",{className:"p-4",children:u===""?vn():w.jsxs("div",{className:"flex flex-col gap-6 pt-4",children:[ls?w.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-top-4",children:[w.jsx("h5",{className:"font-bold text-slate-800 dark:text-white mb-3",children:""}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("div",{className:"flex gap-2",children:["meeting","call","email"].map(j=>w.jsx("button",{onClick:()=>dt({...Zt,type:j}),className:`flex-1 py-1.5 rounded-lg text-xs font-bold border ${Zt.type===j?"bg-primary text-white border-primary":"bg-slate-50 dark:bg-slate-900 text-slate-500 border-slate-100"}`,children:j==="meeting"?"":j==="call"?"":""},j))}),w.jsx("input",{type:"date",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-xl px-3 py-2 text-sm",value:Zt.date,onChange:j=>dt({...Zt,date:j.target.value})}),w.jsx("input",{placeholder:" ()",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-xl px-3 py-2 text-sm",value:Zt.title,onChange:j=>dt({...Zt,title:j.target.value})}),w.jsx("textarea",{placeholder:"...",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-xl px-3 py-2 text-sm min-h-[80px]",value:Zt.description,onChange:j=>dt({...Zt,description:j.target.value})}),w.jsxs("div",{className:"flex gap-2 pt-2",children:[w.jsx("button",{onClick:()=>us(!1),className:"flex-1 py-2 text-slate-500 font-bold text-xs",children:""}),w.jsx("button",{onClick:il,className:"flex-1 py-2 bg-primary text-white rounded-xl font-bold text-xs shadow-md shadow-blue-500/30",children:""})]})]})]}):w.jsxs("button",{onClick:()=>us(!0),className:"flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 py-3 rounded-2xl border border-dashed border-slate-300 dark:border-slate-600 font-bold text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[w.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),""]}),w.jsx("div",{className:"flex flex-col gap-6 pl-4 border-l-2 border-slate-100 ml-4",children:pt.length>0?pt.map(j=>w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute -left-[29px] top-0 w-6 h-6 rounded-full bg-blue-100 text-primary flex items-center justify-center",children:w.jsx("span",{className:"material-symbols-outlined text-[16px]",children:j.type==="meeting"?"restaurant":"call"})}),w.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm border border-slate-50",children:[w.jsx("h5",{className:"font-bold text-sm mb-1",children:j.title}),w.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:j.date}),w.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:j.description})]})]},j.id)):w.jsx("div",{className:"text-center py-10 text-slate-300 text-sm",children:""})})]})}),w.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-[480px] mx-auto bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-100 dark:border-slate-800 flex justify-around py-2.5 px-4 z-40 shadow-[0_-4px_12px_rgba(0,0,0,0.05)]",children:[w.jsxs("button",{onClick:()=>Ri(Le.DASHBOARD),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"contacts"}),w.jsx("span",{className:"text-[11px] font-bold",children:""})]}),w.jsxs("button",{onClick:()=>Ri(Le.CHAT),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"smart_toy"}),w.jsx("span",{className:"text-[11px] font-medium",children:""})]}),w.jsxs("button",{onClick:()=>Ri(Le.HISTORY),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"history"}),w.jsx("span",{className:"text-[11px] font-bold",children:"History"})]}),w.jsxs("button",{onClick:()=>Ri(Le.LOGIN),className:"flex flex-col items-center gap-1 min-w-[64px] text-slate-400",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"26px"},children:"login"}),w.jsx("span",{className:"text-[11px] font-medium",children:""})]})]})]})},Hd=n=>{switch(n.code){case"auth/email-already-in-use":return" Email ";case"auth/invalid-email":return"Email ";case"auth/operation-not-allowed":return"";case"auth/weak-password":return"";case"auth/user-disabled":return"";case"auth/user-not-found":return"";case"auth/wrong-password":return"";case"auth/popup-closed-by-user":return"";case"auth/popup-blocked":return"";default:return" ("+n.code+")"}},x6=async(n,e,t)=>{try{const i=await dP(Mo,n,e);return await mP(i.user,{displayName:t}),{user:i.user,error:null}}catch(i){return{user:null,error:Hd(i)}}},N6=async(n,e)=>{try{return{user:(await hP(Mo,n,e)).user,error:null}}catch(t){return{user:null,error:Hd(t)}}},M6=async()=>{try{const n=new Ns;return{user:(await FP(Mo,n)).user,error:null}}catch(n){return{user:null,error:Hd(n)}}},D6=async()=>{try{return await vP(Mo),{error:null}}catch(n){return{error:Hd(n)}}},P6=()=>{const[n,e]=Ee.useState(Le.LOGIN),[t,i]=Ee.useState(null),[o,a]=Ee.useState(null),[u,d]=Ee.useState(!0),[p,h]=Ee.useState([{id:"init-1",action:"",contactName:"NetworkAI",timestamp:"",details:" NetworkAI",type:"create"}]);jm.useEffect(()=>{if(!Mo){console.warn("Firebase Auth not initialized. Skipping auth listener."),d(!1);return}const O=_P(Mo,Q=>{var z;Q?(i({email:Q.email||"",name:Q.displayName||((z=Q.email)==null?void 0:z.split("@")[0])||"User",uid:Q.uid}),(n===Le.LOGIN||n===Le.REGISTER)&&e(Le.DASHBOARD)):(i(null),e(Le.LOGIN)),d(!1)});return()=>O()},[n]);const _=O=>{const Q={...O,id:Date.now().toString(),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};h(z=>[Q,...z])},T=async(O,Q)=>{if(!Q)return;const{error:z}=await N6(O,Q);z&&alert(z)},S=async()=>{const{error:O}=await M6();O&&alert(O)},I=async(O,Q,z)=>{if(!Q||!z)return;const{error:ee}=await x6(O,Q,z);ee&&alert(ee)},k=async()=>{await D6(),i(null),a(null),e(Le.LOGIN)},F=(O,Q)=>{Q?a(Q):O!==Le.CONTACT_DETAIL&&a(null),e(O)},P=()=>{if(Lm)return w.jsxs("div",{className:"flex h-screen flex-col items-center justify-center p-8 text-center",children:[w.jsx("div",{className:"text-red-500 font-bold text-xl mb-4",children:""}),w.jsx("p",{className:"text-slate-600 mb-2",children:" Firebase "}),w.jsx("p",{className:"text-slate-400 text-sm bg-slate-100 p-2 rounded",children:Lm.message}),w.jsx("p",{className:"mt-8 text-sm text-slate-500",children:" .env "})]});if(u)return w.jsx("div",{className:"flex h-screen items-center justify-center",children:"..."});if(!t&&n!==Le.LOGIN&&n!==Le.REGISTER)return w.jsx(Yp,{onLogin:T,onGoogleLogin:S,onNavigateRegister:()=>F(Le.REGISTER)});switch(n){case Le.LOGIN:return w.jsx(Yp,{onLogin:T,onGoogleLogin:S,onNavigateRegister:()=>F(Le.REGISTER)});case Le.REGISTER:return w.jsx(ub,{onRegister:I,onNavigateLogin:()=>F(Le.LOGIN)});case Le.DASHBOARD:case Le.HISTORY:return w.jsx(c2,{user:t,onLogout:k,currentScreen:n,onNavigate:F,logs:p});case Le.CHAT:return w.jsx(R6,{user:t,onLogout:k,onNavigateHome:()=>F(Le.DASHBOARD),onNavigate:F});case Le.CONTACT_DETAIL:return w.jsx(b6,{contact:o,userId:t==null?void 0:t.uid,onBack:()=>F(Le.DASHBOARD),onNavigate:F,onAddLog:_});default:return w.jsx(Yp,{onLogin:T,onGoogleLogin:S,onNavigateRegister:()=>F(Le.REGISTER)})}};return w.jsx(lb,{children:P()})};class k6 extends Ee.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){var e,t;return this.state.hasError?w.jsxs("div",{className:"p-8 max-w-2xl mx-auto mt-10 bg-red-50 border border-red-200 rounded-lg text-red-900",children:[w.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),w.jsx("p",{className:"font-bold mb-2",children:(e=this.state.error)==null?void 0:e.toString()}),w.jsx("pre",{className:"bg-white p-4 rounded overflow-auto text-xs font-mono border border-red-100 mb-4",children:(t=this.state.errorInfo)==null?void 0:t.componentStack}),w.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",onClick:()=>window.location.reload(),children:"Reload Application"})]}):this.props.children}}const Tw=document.getElementById("root");if(!Tw)throw new Error("Could not find root element to mount to");console.log("Mounting React App...");const V6=ab.createRoot(Tw);V6.render(w.jsx(jm.StrictMode,{children:w.jsx(k6,{children:w.jsx(P6,{})})}));
